[{"id":"5ca7bcc8.ff48b4","type":"tab","label":"Flow 1"},{"id":"1e5ebc44.f4cfb4","type":"tab","label":"Receiver + APIAI","disabled":false,"info":""},{"id":"495bc4b0.0f837c","type":"tab","label":"Menu Principal","disabled":false,"info":""},{"id":"a8463e25.e555b","type":"tab","label":"Fluxo Consultar","disabled":false,"info":""},{"id":"70e10602.ab07d8","type":"tab","label":"Fluxo Me Ajuda"},{"id":"3e11eb34.344f14","type":"tab","label":"Fluxo Quero Investir"},{"id":"fb7270a.0c3fe9","type":"tab","label":"Fluxo Perfil"},{"id":"8a52eade.40f148","type":"tab","label":"Fluxo Só Na Poupança","disabled":false,"info":""},{"id":"baad02b0.36999","type":"tab","label":"Fluxo Transferência"},{"id":"5fdbe0b9.637a4","type":"subflow","name":"Bancos e comprovante","info":"","in":[{"x":120,"y":320,"wires":[{"id":"184fe6ee.b80ee9"}]}],"out":[{"x":1340,"y":460,"wires":[{"id":"98292aae.d49988","port":0}]}]},{"id":"94f329f8.499948","type":"subflow","name":"Valida login","info":"Saida de cima é logado\nSaida de baixo não logado","in":[{"x":360,"y":140,"wires":[{"id":"78627daf.69e294"}]}],"out":[{"x":640,"y":100,"wires":[{"id":"78627daf.69e294","port":0}]},{"x":640,"y":180,"wires":[{"id":"78627daf.69e294","port":1}]}]},{"id":"c0875af8.7cf1d8","type":"subflow","name":"API.AI","info":"","in":[{"x":340,"y":440,"wires":[{"id":"4ef4db96.aaea64"}]}],"out":[{"x":720,"y":240,"wires":[{"id":"4ef4db96.aaea64","port":0}]},{"x":720,"y":280,"wires":[{"id":"4ef4db96.aaea64","port":1}]},{"x":720,"y":320,"wires":[{"id":"4ef4db96.aaea64","port":2},{"id":"b0260eba.3242f","port":0}]},{"x":720,"y":360,"wires":[{"id":"4ef4db96.aaea64","port":3}]},{"x":720,"y":400,"wires":[{"id":"4ef4db96.aaea64","port":4}]},{"x":720,"y":440,"wires":[{"id":"4ef4db96.aaea64","port":5}]},{"x":720,"y":480,"wires":[{"id":"4ef4db96.aaea64","port":6}]}]},{"id":"9dc9bbf9.89db48","type":"subflow","name":"Home Broker","info":"","in":[{"x":240,"y":380,"wires":[{"id":"cd3e0302.5c1d7"}]}],"out":[{"x":680,"y":320,"wires":[{"id":"a48bee73.cddd1","port":0}]}]},{"id":"fb3356c4.1da0f8","type":"subflow","name":"Abrir Conta","info":"","in":[{"x":300,"y":160,"wires":[{"id":"9caa5a60.950118"}]}],"out":[{"x":580,"y":220,"wires":[{"id":"4301741c.44036c","port":0}]}]},{"id":"fdb8e9c2.836b68","type":"subflow","name":"Header x-www-form","info":"","in":[{"x":140,"y":160,"wires":[{"id":"6df42d27.3def24"}]}],"out":[{"x":500,"y":140,"wires":[{"id":"6df42d27.3def24","port":0}]},{"x":500,"y":180,"wires":[{"id":"6df42d27.3def24","port":1}]}]},{"id":"a7fbe337.09148","type":"subflow","name":"Header vnd.api+json","info":"","in":[{"x":140,"y":160,"wires":[{"id":"2f1fded4.8b48a2"}]}],"out":[{"x":500,"y":140,"wires":[{"id":"2f1fded4.8b48a2","port":0}]},{"x":500,"y":180,"wires":[{"id":"2f1fded4.8b48a2","port":1}]}]},{"id":"5675ea4c.327a84","type":"subflow","name":"Header application/json","info":"","in":[{"x":140,"y":160,"wires":[{"id":"efa1bad6.526178"}]}],"out":[{"x":500,"y":140,"wires":[{"id":"efa1bad6.526178","port":0}]},{"x":500,"y":180,"wires":[{"id":"efa1bad6.526178","port":1}]}]},{"id":"fc9c8a8d.bb96f8","type":"chatbot-facebook-node","z":"5ca7bcc8.ff48b4","botname":"ATIVA","usernames":"","log":""},{"id":"63f49b27.572604","type":"chatbot-apiai-token","z":"5ca7bcc8.ff48b4","name":"API.ai"},{"id":"e50a0cfd.37861","type":"chatbot-apiai-token","z":"5ca7bcc8.ff48b4","name":"API.ai"},{"id":"78627daf.69e294","type":"function","z":"94f329f8.499948","name":"Valida login","func":"if(global.get(\"token\")){\n    if(global.get(\"token\").length >= 200){\n        msg.payload = global.get(\"token\");\n        return [msg, null];\n    }\n}else{\n    msg.payload = \"Não logado\";\n    return [null,msg];\n}\n","outputs":"2","noerr":0,"x":510,"y":140,"wires":[[],[]],"outputLabels":["logado","não logado"]},{"id":"9e963c1f.b82ad","type":"comment","z":"70e10602.ab07d8","name":"Fluxo Me Ajuda","info":"","x":253.00000762939453,"y":127.0000114440918,"wires":[]},{"id":"7e971f53.d73f6","type":"link in","z":"70e10602.ab07d8","name":"Fluxo me ajuda","links":["fac204e2.f55868","245cb83a.c80db8","ae3be07a.5c3fd","28bba49d.dcac1c"],"x":239.00001168251038,"y":190.00002193450928,"wires":[["3d3c8db3.383fa2"]]},{"id":"4aeb4b31.b1ebe4","type":"link out","z":"70e10602.ab07d8","name":"Output Quero Investir","links":["9ee32ea0.13298","e170d505.202298"],"x":1655,"y":140,"wires":[]},{"id":"499cb0f8.294a","type":"link out","z":"70e10602.ab07d8","name":"Output Perfil","links":["9d724f8a.717c3"],"x":1655,"y":180,"wires":[]},{"id":"98a410eb.f57a3","type":"link out","z":"70e10602.ab07d8","name":"Output Só Na poupança","links":["59f0ee19.ebe0a"],"x":1655,"y":220,"wires":[]},{"id":"59f0ee19.ebe0a","type":"link in","z":"8a52eade.40f148","name":"Comparativo Poupança","links":["14a67453.5b2a2c","98a410eb.f57a3"],"x":235,"y":140,"wires":[["67c4f5ac.72638c"]]},{"id":"d239442c.a61188","type":"function","z":"a8463e25.e555b","name":"API Ação por nome","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = \"Ação não encontrada\";\n        return [msg, null];\n    }\n    else{\n        let mensagem = '';\n        const description = msg.payload.data.attributes.description;\n        const price = msg.payload.data.attributes.price;\n        const minimum_price = msg.payload.data.attributes.minimum_price;\n        const max_price = msg.payload.data.attributes.max_price;\n        mensagem = `Descrição: ${description},  preço: ${price}, preço minimo: ${minimum_price}, preço máximo: ${max_price} \\n`;\n        msg.payload = `Encontrei a seguinte ação :\\n${mensagem}`;\n        return [null, msg];\n    }\n}else{\n    msg.payload = \"Ação não encontrada\";\n    return [msg, null];\n}","outputs":"2","noerr":0,"x":730,"y":2320,"wires":[["eeeb8d5a.a4aa2"],["eeeb8d5a.a4aa2"]]},{"id":"41337377.599b7c","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":280,"y":2400,"wires":[["2ca06519.fd74ba"]]},{"id":"e3941bf.95592e8","type":"link out","z":"495bc4b0.0f837c","name":"Tranfer flow","links":["a2605bda.5fb868"],"x":1255,"y":200,"wires":[]},{"id":"70a05137.4019","type":"link out","z":"495bc4b0.0f837c","name":"Output Consultar ","links":["e170d505.202298"],"x":1255,"y":80,"wires":[]},{"id":"c52d353c.c582c8","type":"link in","z":"a8463e25.e555b","name":"stocks mais detalhes","links":["6ed3542e.a2aa4c"],"x":155,"y":2100,"wires":[["8e48a85d.f9aee8"]]},{"id":"30bfce48.dc3b62","type":"link out","z":"a8463e25.e555b","name":"hightlights","links":["7a3d041.69d60fc"],"x":1035,"y":180,"wires":[]},{"id":"25882b56.ef4564","type":"comment","z":"a8463e25.e555b","name":"Ações por nome - stocks/stock/{name}","info":"","x":292,"y":2202,"wires":[]},{"id":"4677c665.bca898","type":"link out","z":"a8463e25.e555b","name":"position por nome","links":["d4836b49.ab4078"],"x":995,"y":2400,"wires":[]},{"id":"ee155564.e869b8","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/stocks/stock/{{payload}}","tls":"","x":510,"y":2320,"wires":[["d239442c.a61188"]]},{"id":"daf9905a.b50ae","type":"link out","z":"a8463e25.e555b","name":"position","links":["a4a35b8a.f9cfa8"],"x":995,"y":2360,"wires":[]},{"id":"7a3d041.69d60fc","type":"link in","z":"a8463e25.e555b","name":"extract","links":["30bfce48.dc3b62","c0d42117.02a05"],"x":155,"y":3060,"wires":[["1cca240e.91aafc"]]},{"id":"8b2ccdce.0cb7a","type":"comment","z":"a8463e25.e555b","name":"Nota de corretagem","info":"","x":250,"y":3500,"wires":[]},{"id":"b78d4163.68aa1","type":"link out","z":"a8463e25.e555b","name":"","links":["7a3d041.69d60fc"],"x":1055,"y":3340,"wires":[]},{"id":"d4836b49.ab4078","type":"link in","z":"a8463e25.e555b","name":"Fluxo Consultar","links":["d0073c46.c597d","4677c665.bca898","5207f26f.c6091c","f236ba2d.72d0d8","3728059.bf9f3fa","bb8c6fe6.c48e4","38b2b341.a4624c"],"x":195,"y":200,"wires":[["2a521383.0fac5c"]]},{"id":"60d6476b.b0e668","type":"comment","z":"3e11eb34.344f14","name":"Fluxo Quero Investir","info":"","x":446,"y":187,"wires":[]},{"id":"b8dadb34.3a5bc8","type":"link in","z":"3e11eb34.344f14","name":"Principais Produtos","links":["612f731.e91ee8c","bfb58c38.504b2","b02b2043.9b8af","afdc4959.9ec268","50f73104.e82dc","8c6719e5.510308","e81b9be1.a65e98","27f8d764.fca998","2c06201b.4a7aa","a93c74f9.3e30f8"],"x":371,"y":227,"wires":[["dc0b1dfe.9d87e"]]},{"id":"a1caba96.6782e8","type":"comment","z":"3e11eb34.344f14","name":"Mostrar produtos","info":"","x":636,"y":187,"wires":[]},{"id":"4a1960c8.4941c","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["637c897c.e34638","5741c2a6.441d5c"],"x":1105,"y":145,"wires":[]},{"id":"692b8489.17584c","type":"link out","z":"3e11eb34.344f14","name":"funds hightlights","links":["ae02eaaa.69c348"],"x":1151,"y":167,"wires":[]},{"id":"38dbe1b5.7e61fe","type":"link out","z":"3e11eb34.344f14","name":"td","links":["93e40f13.90508","5a7347df.36d4e8","e6f48335.ddb81"],"x":1151,"y":207,"wires":[]},{"id":"ce8aa.637be7568","type":"link out","z":"3e11eb34.344f14","name":"private hightlights","links":["fa4d0651.d9aa68"],"x":1151,"y":247,"wires":[]},{"id":"10196579.f3318b","type":"comment","z":"a8463e25.e555b","name":"Renda Variável","info":"","x":220,"y":740,"wires":[]},{"id":"af3b564b.422288","type":"link in","z":"a8463e25.e555b","name":"Posiçao consolidada","links":["5badc121.5a8a2","e507508e.ca383"],"x":155,"y":780,"wires":[["38f35001.8783c"]]},{"id":"ac8e919b.16bdb","type":"function","z":"a8463e25.e555b","name":"API Variable Incomes","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = \"Você não tem ações no momento.\";\n        return [msg,null];\n    }else{\n        let mensagem = '';\n        const stocks_volume = msg.payload.data.attributes.stocks_volume;\n        const funds_volume = msg.payload.data.attributes.funds_volume;\n        const future_volume = msg.payload.data.attributes.future_volume;\n        const options_volume = msg.payload.data.attributes.options_volume;\n        mensagem += `Volume em ações: ${stocks_volume}, Volume em fundos: ${funds_volume}, Volume em futuros: ${future_volume} e volume em opções: ${options_volume} \\n`;\n        msg.payload = `Sua posição em renda variável é : \\n${mensagem}`;\n        return [null,msg];\n    }\n}else if(msg.payload.errors[0].status == 500){\n    msg.payload = \"Não logado.\";\n    return [msg,null];\n}else{\n    msg.payload = \"Tente novamente.\";\n    return [msg,null];\n}\n","outputs":"2","noerr":0,"x":680,"y":740,"wires":[["83503151.cbbd8"],["83503151.cbbd8"]]},{"id":"4a02b61a.020ee8","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/variable_income","tls":"","x":496,"y":740,"wires":[["ac8e919b.16bdb"]]},{"id":"b5193e22.f0dff","type":"link out","z":"a8463e25.e555b","name":"listen-menu2-variable","links":["16e7e16b.c1c66f"],"x":1135,"y":800,"wires":[]},{"id":"16e7e16b.c1c66f","type":"link in","z":"a8463e25.e555b","name":"Menu Posições RV","links":["b5193e22.f0dff"],"x":175,"y":500,"wires":[["b340a3c7.47472"]]},{"id":"6ed3542e.a2aa4c","type":"link out","z":"a8463e25.e555b","name":"","links":["c52d353c.c582c8"],"x":815,"y":1420,"wires":[]},{"id":"d6694cf2.1b7ae","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/stocks/1107893852","tls":"","x":490,"y":980,"wires":[["cf370cf1.6f4e"]]},{"id":"cf370cf1.6f4e","type":"function","z":"a8463e25.e555b","name":"API Ações","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = \"Você não tem ações no momento.\";\n        return [msg, null];\n    }else{\n        let mensagem = '';\n        for(let data of msg.payload.data){\n            const description = data.attributes.description;\n            const quantity = data.attributes.quantity;\n            const price = data.attributes.price;\n            // const medium_price = data.attributes.medium_price;\n            // const max_price = data.attributes.max_price;\n            mensagem += `Descrição: ${description}, Quantidade: ${quantity}, preço: ${price} \\n`;\n        }    \n    msg.payload = `Você possue as seguintes ações :\\n${mensagem}`;\n    return [null, msg];\n    }\n}else{\n    msg.payload = \"Você não tem ações no momento.\";\n    return [msg, null];\n}","outputs":"2","noerr":0,"x":650,"y":980,"wires":[["2e0b94fb.08321c"],["159b1797.c70008"]],"outputLabels":["if","else"]},{"id":"d59fb7c6.9684c8","type":"function","z":"a8463e25.e555b","name":"API Fundos","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = \"Reparei que você não tem fundos de investimento, segue um dos nossos fundos em destaque, a seguir\";\n        return [msg, null];\n    }else{\n        let mensagem = '';\n        for(let data of msg.payload.data){\n            const nome              = data.attributes.name;\n            const position_date     = data.attributes.position_date;\n            const applied           = data.attributes.applied;\n            const actual            = data.attributes.actual;\n            const protifability     = data.attributes.protifability;\n            mensagem += `Nome: ${nome}, Posição: ${position_date}, Aplicado: ${applied}, Valor Atual: ${actual}, Rentabilidade: ${protifability} \\n`;\n        }    \n    msg.payload = `Você possue os seguintes Fundos :\\n${mensagem}`;\n    return [null, msg];\n    }\n}else{\n    msg.payload = \"Reparei que você não tem fundos de investimento, segue um dos nossos fundos em destaque, a seguir\";\n    return [msg, null];\n}","outputs":"2","noerr":0,"x":650,"y":1240,"wires":[["e2fa4e4d.9c083"],["e0a3bd1d.b5d29"]]},{"id":"ecdcb7b8.dca4f8","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/funds/clients/40561670870","tls":"","x":470,"y":1240,"wires":[["d59fb7c6.9684c8"]]},{"id":"91dc5ef9.91329","type":"link out","z":"a8463e25.e555b","name":"Retorno API Stock","links":["53fdbedc.e7e0d"],"x":1135,"y":1040,"wires":[]},{"id":"53fdbedc.e7e0d","type":"link in","z":"a8463e25.e555b","name":"","links":["91dc5ef9.91329"],"x":155,"y":1480,"wires":[["e0b9d275.742a6"]]},{"id":"f503c5e8.e852c8","type":"comment","z":"a8463e25.e555b","name":"Fundos Em Destaque","info":"","x":1580,"y":860,"wires":[]},{"id":"474dc156.160a3","type":"link out","z":"a8463e25.e555b","name":"Fundos Em Destaque","links":["9c3d488c.f635c8"],"x":1135,"y":1140,"wires":[]},{"id":"9c3d488c.f635c8","type":"link in","z":"a8463e25.e555b","name":"Fundos em destaque Carrossel","links":["474dc156.160a3","70ef54e7.b7ab5c"],"x":1500,"y":900,"wires":[["d408da4e.f07fd8"]]},{"id":"2374819b.f7d52e","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1020,"y":1140,"wires":[["474dc156.160a3"]]},{"id":"6d20c1b5.aebb7","type":"link out","z":"a8463e25.e555b","name":"Tenho Fundos","links":["d9cbf3a5.0e9da"],"x":1135,"y":1340,"wires":[]},{"id":"d9cbf3a5.0e9da","type":"link in","z":"a8463e25.e555b","name":"Logado Com fundos","links":["6d20c1b5.aebb7","4569d4b8.11849c"],"x":155,"y":1660,"wires":[["b8c60f51.85ffc"]]},{"id":"bf8d3d37.03d71","type":"comment","z":"a8463e25.e555b","name":"Fundos - com Posição em Fundos","info":"","x":280,"y":1620,"wires":[]},{"id":"70ef54e7.b7ab5c","type":"link out","z":"a8463e25.e555b","name":"Escolha Ver Fundos em Destaque","links":["9c3d488c.f635c8"],"x":815,"y":1640,"wires":[]},{"id":"1c11c927.d7c697","type":"comment","z":"a8463e25.e555b","name":"Mais Detalhes de um Fundo","info":"","x":260,"y":1860,"wires":[]},{"id":"5b1af059.b9618","type":"link in","z":"a8463e25.e555b","name":"Mais detalhes de um fundo","links":["83890d69.d3d79"],"x":155,"y":1900,"wires":[["1d984a2e.3a7b46"]]},{"id":"aa8646d1.1c6648","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/funds/name/{{payload}}","tls":"","x":490,"y":1980,"wires":[["4ad7be29.d4da6"]]},{"id":"4ad7be29.d4da6","type":"function","z":"a8463e25.e555b","name":"API Fundos por nome","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = 'Não localizei o fundo, mas você pode fazer uma nova busca no nosso site: https://www.ativainvestimentos.com.br/Investimentos/Onde-Investir/Renda-Fixa';\n        return [msg,null];\n    }else{\n        let mensagem = '';\n        for(let data of msg.payload.data){\n            const name                      = data.attributes.name;\n            //   const adm_fee                   = data.attributes.adm_fee;\n            //   const performance_fee           = data.attributes.performance_fee;\n            const application_initial       = data.attributes.application_initial;\n            const one_year_profitability    = data.attributes.one_year_profitability;\n            //   const class_cvm                 = data.attributes.class_cvm;\n            //   const profile                   = data.attributes.profile;\n            mensagem += `Nome: ${name}, Aplicação inicial: ${application_initial}, Rentabilidade esperada: ${one_year_profitability} \\n`;\n        }\n    msg.payload = `Encontrei esses fundos:\\n${mensagem}`;\n    return [null, msg];\n }\n}","outputs":"2","noerr":0,"x":720,"y":1980,"wires":[["f65fb47f.e68088"],["f65fb47f.e68088"]]},{"id":"576f6baa.5c96a4","type":"link out","z":"a8463e25.e555b","name":"","links":["a99d1338.34c37"],"x":815,"y":1600,"wires":[]},{"id":"a99d1338.34c37","type":"link in","z":"a8463e25.e555b","name":"Detalhes do fundo","links":["576f6baa.5c96a4"],"x":155,"y":1780,"wires":[["399e7118.17158e"]]},{"id":"43af2c20.a87444","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/funds/4455632000109","tls":"","x":490,"y":1780,"wires":[["67d5e8e7.df1898"]]},{"id":"d94ef0e.01fc71","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/stocks/1107893852/SLCE3","tls":"","x":490,"y":2100,"wires":[["724a7637.dbc638"]]},{"id":"724a7637.dbc638","type":"function","z":"a8463e25.e555b","name":"API Ação do cliente","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = \"Ação não encontrada\";\n        return [msg, null];\n    } else{\n        let mensagem = '';\n        for(let data of msg.payload.data){\n            const description = data.attributes.description;\n            const price = data.attributes.price;\n            const quantity = data.attributes.quantity;\n            mensagem = `Descrição: ${description},  preço: ${price}, quantidade: ${quantity}, Valor Atual: ${price * quantity} \\n`;     \n        }\n    msg.payload = `Você selecionou esta ação para mais detalhes :\\n${mensagem}`;\n    return [null, msg];\n    }\n}else{\n    msg.payload = \"Ação não encontrada\";\n    return [msg, null];\n}\n","outputs":"2","noerr":0,"x":710,"y":2100,"wires":[["51f131a5.2e564"],["51f131a5.2e564"]]},{"id":"a4a35b8a.f9cfa8","type":"link in","z":"a8463e25.e555b","name":"busca ação por nome","links":["ed27d381.a800e","3b5c8e18.ca8f62","daf9905a.b50ae","3a7962cb.a1724e","82ae518f.a7faf"],"x":155,"y":2240,"wires":[["a0ec60f8.54da6"]]},{"id":"ed27d381.a800e","type":"link out","z":"a8463e25.e555b","name":"","links":["a4a35b8a.f9cfa8"],"x":1235,"y":2160,"wires":[]},{"id":"e870443f.4cb198","type":"comment","z":"a8463e25.e555b","name":"Detalhes de um fundo","info":"","x":240,"y":1740,"wires":[]},{"id":"67d5e8e7.df1898","type":"function","z":"a8463e25.e555b","name":"API Retorna um Fundo específico","func":"if(msg.payload.data){\n    let mensagem = '';\n    const namef                     = msg.payload.data.attributes.name;\n    const adm_fee                   = msg.payload.data.attributes.adm_fee;\n    const performance_fee           = msg.payload.data.attributes.performance_fee;\n    const application_initial       = msg.payload.data.attributes.application_initial;\n    const one_year_profitability    = msg.payload.data.attributes.one_year_profitability;\n    const class_cvm                 = msg.payload.data.attributes.class_cvm;\n    const profile                   = msg.payload.data.attributes.profile;\n    mensagem += `Nome: ${namef}\\nTaxa de administração: ${adm_fee} %\\nTaxa de performance: ${performance_fee} %\\nAplicação inicial: ${application_initial} R$\\nRentabilidade esperada: ${one_year_profitability} R$\\nTipo de fundo: ${class_cvm}\\nPerfil: ${profile}\\n`;\n    msg.payload = `Encontrei esse fundo:\\n${mensagem}`;\n    return msg;\n}else{\n    msg.payload = `Não encontrei esse fundo.`;\n    return msg;\n}","outputs":"1","noerr":0,"x":760,"y":1780,"wires":[["77a00b45.a45954"]]},{"id":"dfa036c5.82f728","type":"link out","z":"a8463e25.e555b","name":"Ver Lista Completa","links":["2e94045d.352a4c"],"x":815,"y":1460,"wires":[]},{"id":"c6b3216a.f1bda","type":"comment","z":"a8463e25.e555b","name":"Ver Lista Completa de Ações","info":"","x":260,"y":2500,"wires":[]},{"id":"2e94045d.352a4c","type":"link in","z":"a8463e25.e555b","name":"LIsta completa de ações","links":["dfa036c5.82f728","76bb1b19.5f59d4","679d4449.71529c"],"x":155,"y":2540,"wires":[["10ecb361.90fe2d"]]},{"id":"8ad59f49.a204f","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/stocks/28415971800","tls":"","x":490,"y":2540,"wires":[["d64a9304.1059e"]]},{"id":"d64a9304.1059e","type":"function","z":"a8463e25.e555b","name":"API Ações","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = \"Você não tem ações no momento.\";\n        return [msg, null];\n    }\n    else{\n        let mensagem = '';\n        for(let data of msg.payload.data){\n            const description = data.attributes.description;\n            const quantity = data.attributes.quantity;\n            const price = data.attributes.price;\n            // const medium_price = data.attributes.medium_price;\n            // const max_price = data.attributes.max_price;\n            mensagem += `Descrição: ${description}, Quantidade: ${quantity}, preço: ${price} \\n`; //, preço medio: ${medium_price}, preço máximo: ${max_price};\n        }    \n    msg.payload = `Você possue as seguintes ações :\\n${mensagem}`;\n    return [null, msg];\n    }\n}else{\n    msg.payload = \"Você não tem ações no momento.\";\n    return [msg, null];\n}\n","outputs":"2","noerr":0,"x":690,"y":2540,"wires":[["c6a77558.c05078"],["c6a77558.c05078"]],"outputLabels":["if","else"]},{"id":"f7f89b15.a67fb8","type":"comment","z":"a8463e25.e555b","name":"Renda Fixa","info":"","x":210,"y":2620,"wires":[]},{"id":"9c059af3.e99e18","type":"link in","z":"a8463e25.e555b","name":"","links":["88aae6d7.659738"],"x":155,"y":2660,"wires":[["ad8f4c35.088dc"]]},{"id":"439ca03c.29e5e","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/fixedIncomes/31147948828","tls":"","x":490,"y":2660,"wires":[["c30c21d2.c70bb"]]},{"id":"c30c21d2.c70bb","type":"function","z":"a8463e25.e555b","name":"API Renda Fixa","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = \"Você não tem ações no momento.\";\n        return [msg, null];\n    }else{\n        let mensagem = '';\n        for(let data of msg.payload.data){\n            const cod_neg           = data.attributes.cod_neg;\n            const type_of_product   = data.attributes.type_of_product;\n            const issuer            = data.attributes.issuer;\n            const actual_value      = data.attributes.actual_value;\n            const quantity          = data.attributes.quantity;\n            const maturity          = data.attributes.maturity;\n            \n            mensagem += `Emissor: ${issuer}, Quantidade: ${quantity}, Valor Atual: ${actual_value}, Vencimento: ${maturity} \\n`; //, preço medio: ${medium_price}, preço máximo: ${max_price};\n        }    \n        \n    msg.payload = `Você possue os seguintes títulos :\\n${mensagem}`;\n    \n    return [null, msg];\n    }\n}\n","outputs":"2","noerr":0,"x":680,"y":2660,"wires":[["fd220b0e.353e08"],["fd220b0e.353e08"]],"outputLabels":["if","else"]},{"id":"e93efb3c.27f958","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":260,"y":2780,"wires":[["548ffc42.0679a4"]]},{"id":"e507508e.ca383","type":"link out","z":"a8463e25.e555b","name":"","links":["af3b564b.422288"],"x":982,"y":2720,"wires":[]},{"id":"505f0f28.fdd2f","type":"link out","z":"a8463e25.e555b","name":"Ver Lista Completa RF","links":["4daf79c6.1389a8"],"x":982,"y":2760,"wires":[]},{"id":"4daf79c6.1389a8","type":"link in","z":"a8463e25.e555b","name":"RF List ","links":["505f0f28.fdd2f"],"x":155,"y":2920,"wires":[["220ced06.5ef252"]]},{"id":"2bf2e29e.66104e","type":"http request","z":"a8463e25.e555b","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/fixedIncomes/34312946850","tls":"","x":490,"y":2920,"wires":[["4413e0c0.ef218"]]},{"id":"4413e0c0.ef218","type":"function","z":"a8463e25.e555b","name":"API Renda Fixa Lista Completa","func":"if(msg.payload.data){\n    if(msg.payload.data.length === 0){\n        msg.payload = \"Você não tem ações no momento.\";\n        return [msg, null];\n    }else{\n        let mensagem = '';\n        for(let data of msg.payload.data){\n            const cod_neg           = data.attributes.cod_neg;\n            const type_of_product   = data.attributes.type_of_product;\n            const issuer            = data.attributes.issuer;\n            const actual_value      = data.attributes.actual_value;\n            const quantity          = data.attributes.quantity;\n            const maturity          = data.attributes.maturity;\n            mensagem += `Emissor: ${issuer}, Quantidade: ${quantity}, Valor Atual: ${actual_value}, Vencimento: ${maturity} \\n`; //, preço medio: ${medium_price}, preço máximo: ${max_price};\n        }    \n    msg.payload = `Você possue as seguintes títulos :\\n${mensagem}`;\n    return [null, msg];\n    }\n}else{\n    msg.payload = \"Você não tem ações no momento.\";\n    return [msg, null];\n}\n","outputs":"2","noerr":0,"x":730,"y":2920,"wires":[["b26d5113.b45b3"],["b26d5113.b45b3"]],"outputLabels":["if","else"]},{"id":"3a7962cb.a1724e","type":"link out","z":"a8463e25.e555b","name":"","links":["a4a35b8a.f9cfa8"],"x":1095,"y":2500,"wires":[]},{"id":"a2605bda.5fb868","type":"link in","z":"baad02b0.36999","name":"Saque ou Transferência","links":["9579714a.6ffaf","e3941bf.95592e8","b2f1742c.bbba08"],"x":255,"y":220,"wires":[["30050edb.da6442"]]},{"id":"43f9b3d8.67683c","type":"comment","z":"a8463e25.e555b","name":"Detalhes de Uma ação do Cliente","info":"","x":270,"y":2060,"wires":[]},{"id":"637c897c.e34638","type":"link in","z":"3e11eb34.344f14","name":"Stocks Hightlights","links":["4a1960c8.4941c","f729f6fe.3614b8"],"x":235,"y":620,"wires":[["c6589434.a348e8","6c04d5a6.afe77c"]]},{"id":"6aa41ac.69f0fe4","type":"comment","z":"3e11eb34.344f14","name":"stocks hightlights","info":"","x":300,"y":580,"wires":[]},{"id":"d5ec69a0.b53528","type":"comment","z":"8a52eade.40f148","name":"Comparativo Poupança","info":"","x":280,"y":80,"wires":[]},{"id":"5cd7f914.32bd78","type":"link out","z":"8a52eade.40f148","name":"","links":["902b2021.9a7a3","9d724f8a.717c3"],"x":1155,"y":360,"wires":[]},{"id":"3b8f2e6e.64cae2","type":"delay","z":"8a52eade.40f148","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":200,"wires":[["519d3a6c.e3cc54"]]},{"id":"54eec6e2.d1c978","type":"link out","z":"8a52eade.40f148","name":"","links":["63190b32.144b74"],"x":1155,"y":320,"wires":[]},{"id":"bb24513f.7ac6c","type":"delay","z":"8a52eade.40f148","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":260,"wires":[["111d992f.eacea7"]]},{"id":"94b0b6a6.6c3208","type":"delay","z":"8a52eade.40f148","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":320,"wires":[["114e69a6.68ae16"]]},{"id":"b5e6ab4.f7dd058","type":"delay","z":"8a52eade.40f148","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":380,"wires":[["da59de79.9ca5e"]]},{"id":"54404fc1.896f1","type":"file in","z":"8a52eade.40f148","name":"","filename":"/var/td.mp4","format":"","sendError":true,"x":350,"y":660,"wires":[["d6120de.6c193f","a950f048.5b186"]]},{"id":"63190b32.144b74","type":"link in","z":"8a52eade.40f148","name":"Video TD 1","links":["54eec6e2.d1c978"],"x":215,"y":660,"wires":[["54404fc1.896f1"]]},{"id":"a950f048.5b186","type":"delay","z":"8a52eade.40f148","name":"","pauseType":"delay","timeout":"20","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":340,"y":740,"wires":[["e7741d71.0cdf5"]]},{"id":"50d8f20b.533f3c","type":"link out","z":"8a52eade.40f148","name":"","links":["6f57af70.5a3d3"],"x":1055,"y":660,"wires":[]},{"id":"bce2841f.592348","type":"link out","z":"8a52eade.40f148","name":"","links":["888528ab.f2a1b8"],"x":1055,"y":700,"wires":[]},{"id":"14a67453.5b2a2c","type":"link out","z":"8a52eade.40f148","name":"","links":["59f0ee19.ebe0a"],"x":1055,"y":740,"wires":[]},{"id":"b568ce2.9b0c03","type":"file in","z":"8a52eade.40f148","name":"","filename":"/var/tdxpoupanca.mp4","format":"","sendError":true,"x":380,"y":900,"wires":[["1f412682.7c1b49","797ef473.5da5dc"]]},{"id":"6f57af70.5a3d3","type":"link in","z":"8a52eade.40f148","name":"Video TD 2","links":["50d8f20b.533f3c"],"x":215,"y":900,"wires":[["b568ce2.9b0c03"]]},{"id":"1cc51587.18cf0a","type":"link out","z":"8a52eade.40f148","name":"","links":["888528ab.f2a1b8"],"x":495,"y":980,"wires":[]},{"id":"797ef473.5da5dc","type":"delay","z":"8a52eade.40f148","name":"","pauseType":"delay","timeout":"20","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":340,"y":980,"wires":[["1cc51587.18cf0a"]]},{"id":"9bd22785.751d38","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":980,"wires":[["d6694cf2.1b7ae"]]},{"id":"25a13650.3817ea","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":1240,"wires":[["ecdcb7b8.dca4f8"]]},{"id":"f3227d51.e1613","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":1980,"wires":[["aa8646d1.1c6648"]]},{"id":"399e7118.17158e","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":1780,"wires":[["43af2c20.a87444"]]},{"id":"8e48a85d.f9aee8","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2100,"wires":[["d94ef0e.01fc71"]]},{"id":"6c660539.05054c","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":2320,"wires":[["ee155564.e869b8"]]},{"id":"10ecb361.90fe2d","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2540,"wires":[["8ad59f49.a204f"]]},{"id":"ad8f4c35.088dc","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2660,"wires":[["439ca03c.29e5e"]]},{"id":"220ced06.5ef252","type":"change","z":"a8463e25.e555b","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2920,"wires":[["2bf2e29e.66104e"]]},{"id":"291cb64d.ef64aa","type":"comment","z":"a8463e25.e555b","name":"Fixed Incomes","info":"","x":220,"y":2880,"wires":[]},{"id":"fa4d0651.d9aa68","type":"link in","z":"3e11eb34.344f14","name":"Titulos Privados Carrossel","links":["ce8aa.637be7568","d6090afa.109b68","47db945d.78b63c","47322933.fad798","947aee91.53642"],"x":275,"y":880,"wires":[["548399a5.ca1f48","fe2de325.e552e"]]},{"id":"4627dcf7.5e8224","type":"comment","z":"3e11eb34.344f14","name":"Titulos privados","info":"","x":340,"y":840,"wires":[]},{"id":"e6f48335.ddb81","type":"link in","z":"3e11eb34.344f14","name":"TD Introdução","links":["5cc45eb5.bb93f","38dbe1b5.7e61fe"],"x":255,"y":1920,"wires":[["b0eae8de.8f2d48","59168258.850efc"]]},{"id":"7c49c838.9a6c68","type":"comment","z":"3e11eb34.344f14","name":"TD Introdução","info":"","x":310,"y":1880,"wires":[]},{"id":"a5aad5b1.870e38","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["1b2a2292.66109d"],"x":1335,"y":2040,"wires":[]},{"id":"59168258.850efc","type":"file in","z":"3e11eb34.344f14","name":"","filename":"/usr/src/node-red/videos-ativa/td-x-poupanca.mp4","format":"","sendError":true,"x":710,"y":2120,"wires":[["f3ce95f5.4fb258"]]},{"id":"7420ce7c.ae721","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"16","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":2040,"wires":[["5c35ee38.531c5"]]},{"id":"5636d17a.9ffc1","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1020,"y":800,"wires":[["b5193e22.f0dff"]]},{"id":"f3e6c82a.8c8e38","type":"link in","z":"a8463e25.e555b","name":"Posição Ações","links":["115378f4.90bfe7"],"x":155,"y":980,"wires":[["9bd22785.751d38"]]},{"id":"115378f4.90bfe7","type":"link out","z":"a8463e25.e555b","name":"Posição Ações","links":["f3e6c82a.8c8e38"],"x":1035,"y":360,"wires":[]},{"id":"479d8853.c9e5a8","type":"link out","z":"a8463e25.e555b","name":"Posição Fundos","links":["f4880b80.635f88"],"x":1035,"y":400,"wires":[]},{"id":"f4880b80.635f88","type":"link in","z":"a8463e25.e555b","name":"Posição Fundos","links":["479d8853.c9e5a8","2ffad774.e1ec08","2599e609.0ff82a"],"x":155,"y":1240,"wires":[["25a13650.3817ea"]]},{"id":"db4fb85a.5d5b88","type":"comment","z":"a8463e25.e555b","name":"Menu Renda Variável","info":"","x":260,"y":460,"wires":[]},{"id":"59259c93.f897c4","type":"comment","z":"a8463e25.e555b","name":"Posição Ações","info":"","x":220,"y":940,"wires":[]},{"id":"eb50c68e.407e68","type":"comment","z":"a8463e25.e555b","name":"Posição Fundos","info":"","x":220,"y":1200,"wires":[]},{"id":"8100e3dd.9ecd7","type":"link out","z":"a8463e25.e555b","name":"Nota de Corretagem","links":["3c8b98a9.b293f8"],"x":1035,"y":480,"wires":[]},{"id":"3c8b98a9.b293f8","type":"link in","z":"a8463e25.e555b","name":"Nota de Corretagem","links":["8100e3dd.9ecd7","f6501949.9eff98"],"x":175,"y":3540,"wires":[["227435f0.8d0d6a"]]},{"id":"83890d69.d3d79","type":"link out","z":"a8463e25.e555b","name":"","links":["5b1af059.b9618"],"x":1215,"y":1840,"wires":[]},{"id":"9cd6bd2a.7a05","type":"link out","z":"70e10602.ab07d8","name":"","links":["1b2a2292.66109d"],"x":1655,"y":380,"wires":[]},{"id":"227435f0.8d0d6a","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":3540,"wires":[["c819f23.411f71"]]},{"id":"73886b99.6fc264","type":"link out","z":"baad02b0.36999","name":"menu logado 4 opções","links":["1b2a2292.66109d"],"x":1595,"y":120,"wires":[]},{"id":"c1b9f0d1.6889f","type":"comment","z":"a8463e25.e555b","name":"Ações do Cliente","info":"","x":220,"y":1440,"wires":[]},{"id":"9caa5a60.950118","type":"delay","z":"fb3356c4.1da0f8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":160,"wires":[["86b04142.f6c63"]]},{"id":"a9d14666.53f548","type":"delay","z":"baad02b0.36999","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1340,"y":220,"wires":[["3b1139a4.fb4bf6"]]},{"id":"d0906e83.32bb3","type":"function","z":"a8463e25.e555b","name":"API Nota de Corretagem","func":"// const chat = msg.chat();\n// const tipo = 'bmf';\n// const inicio ='12-05-2016';\n// const fim = '12-07-2016';\n\nvar startDate       = '';\nvar endDate         = '';\nconst chat          = msg.chat();\nconst type          = chat.get('type');\nconst startDay      = chat.get('startDay');\nconst startMonth    = chat.get('startMonth');\nconst startYear     = chat.get('startYear');\nconst endDay        = chat.get('endDay');\nconst endMonth      = chat.get('endMonth');\nconst endYear       = chat.get('endYear');\n\nif(type === 'bmf'){\n    startDate = `${startMonth}-${startDay}-${startYear}`;\n    endDate = `${endMonth}-${endDay}-${endYear}`;\n}else if(type === 'bovespa'){\n    startDate = `${startDay}-${startMonth}-${startYear}`;\n    endDate = `${endDay}-${endMonth}-${endYear}`;\n}\n\nconst url = `https://api.ativainvestimentos.com.br/v1/consolided_position/nota_corretagem/${type}?dtInicio=${startDate}&dtfim=${endDate}`;\n\nmsg.payload = [\n  {\n    type: 'url',\n    url: url,\n    label: 'Nota de corretagem'\n  }\n];\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":4060,"wires":[["277f83c2.007fcc"]]},{"id":"3b5c8e18.ca8f62","type":"link out","z":"a8463e25.e555b","name":"","links":["a4a35b8a.f9cfa8"],"x":1135,"y":920,"wires":[]},{"id":"ff2ded2d.0356c","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":1115,"y":4120,"wires":[]},{"id":"d506fbdb.72f538","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":1055,"y":3380,"wires":[]},{"id":"1b2a2292.66109d","type":"link in","z":"495bc4b0.0f837c","name":"Menu Principal","links":["52763e26.9a53c","98c30884.a11218","7266064a.a26108","1b95b6c1.825fc9","5bd39c8e.a169b4","4a3ebd67.756844","47e991c9.a54e9","84ddd05a.73fd3","a9654719.f384c8","f01adcfc.8d83d","a660905.7d2fc7","6f234190.936b1","bf58a906.fa4bc8","54da33e6.8fe98c","b05f343c.cea598","df59f94f.b341e8","9cd6bd2a.7a05","e288d7f4.91c428","d506fbdb.72f538","3bae2241.4376de","27d2dc7.1d54c24","eb972454.864cf8","ff2ded2d.0356c","8c5eac0e.d595c","73886b99.6fc264","a5aad5b1.870e38","70374d85.d944a4","d7299c3c.2b732","d5afd59e.eacf38","109f2f85.2a238","106e63d1.ab907c","e4a4f629.904158","c0f070cd.1850c","55aa2033.5e59c","3e4be0be.28741","318cde9e.564ec2","f983c169.86ad5","caa7f0b3.d2b73","da916638.0dea48","e7928ae9.8080f8","b4141a49.b1ebc8","ad01412e.c5e62"],"x":255,"y":280,"wires":[["ca9554ed.ff02d8"]]},{"id":"84e85984.99c6e8","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":3600,"wires":[["7233031f.bdc3fc"]]},{"id":"dac7151f.885ab8","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":3660,"wires":[["4a8a4fbc.e126c"]]},{"id":"3e906b4f.4bc3d4","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":3720,"wires":[["4246d1da.95cdc"]]},{"id":"d00596de.9e9b78","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":3780,"wires":[["a1dab8e4.a411b8"]]},{"id":"4c51e5a.1e3eb1c","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":3840,"wires":[["957d9379.16875"]]},{"id":"ec3b1ef1.2bbec","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":3900,"wires":[["5c70bdac.2e0754"]]},{"id":"130ba267.394e2e","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1000,"y":4120,"wires":[["ff2ded2d.0356c"]]},{"id":"e8fce487.200828","type":"function","z":"a8463e25.e555b","name":"API Consulta Extrato","func":"const chat           = msg.chat();\nconst dataInicial    = chat.get('dataInicial');\nconst dataFinal      = chat.get('dataFinal');\n\nconst url = `https://api.ativainvestimentos.com.br/v1/consolided_position/extrato_cc?dtInicio=${dataInicial}&dtfim=${dataFinal}`;\n\nmsg.payload = [\n  {\n    type: 'url',\n    url: url,\n    label: 'Extato'\n  }\n];\nreturn msg;","outputs":"1","noerr":0,"x":320,"y":3300,"wires":[["dd627e0b.39ed1"]]},{"id":"441221a4.3c3ca","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":280,"y":3380,"wires":[["fe3438c8.26adc8"]]},{"id":"9b57cc82.8862c","type":"comment","z":"a8463e25.e555b","name":"Consulta extrato","info":"","x":220,"y":3020,"wires":[]},{"id":"9d724f8a.717c3","type":"link in","z":"fb7270a.0c3fe9","name":"Fluxo Perfil com pergunta","links":["5cd7f914.32bd78","499cb0f8.294a","15c4bd86.39ae82","5cef9b8e.883d64"],"x":215,"y":80,"wires":[["ef4bfd0e.5ecc1"]]},{"id":"7bfe80fe.93de6","type":"link out","z":"fb7270a.0c3fe9","name":"Periodo","links":["8e04ae9b.c9b0b"],"x":1535,"y":1060,"wires":[]},{"id":"d8a217f1.0bde38","type":"link in","z":"fb7270a.0c3fe9","name":"Valor aporte","links":["b6b899a5.aedc48"],"x":215,"y":760,"wires":[["79154db3.2cb504"]]},{"id":"b6b899a5.aedc48","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["d8a217f1.0bde38"],"x":1175,"y":480,"wires":[]},{"id":"a5284851.934c18","type":"comment","z":"fb7270a.0c3fe9","name":"Carrossel Perfil","info":"","x":280,"y":180,"wires":[]},{"id":"9c2051e5.acc1a","type":"comment","z":"fb7270a.0c3fe9","name":"Valor para investir","info":"","x":430,"y":480,"wires":[]},{"id":"f4317a03.06ea48","type":"comment","z":"fb7270a.0c3fe9","name":"Valor aporte","info":"","x":270,"y":720,"wires":[]},{"id":"6d36753a.7d903c","type":"comment","z":"fb7270a.0c3fe9","name":"Criar API Perfil","info":"","x":1340,"y":1020,"wires":[]},{"id":"25a4ba61.c68726","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":1980,"wires":[["d71fbddc.767cd"]]},{"id":"f68b4c74.4ce8c","type":"function","z":"3e11eb34.344f14","name":"Calculo pocentagem_ir","func":"const chat          = msg.chat();\nconst valor         = Math.round(chat.get('valor_titulos'));\nconst isento_ir     = ['LCI','LCA','CRI','CRA'];\nlet pocentagem_ir   = 0;\nconst periodo_dias  = 1802; \n\nif(periodo_dias <= 180){\n    pocentagem_ir = 22.5;\n    \n}else if(periodo_dias >= 181 && periodo_dias <= 360){\n     pocentagem_ir = 20;\n     \n}else if(periodo_dias >= 361 && periodo_dias <= 720){\n     pocentagem_ir = 17.5;\n     \n}else if(periodo_dias >= 721){\n     pocentagem_ir = 15;\n     \n     node.status({fill:\"green\",shape:\"dot\",text:\"connected\"});\n}else{\n    node.status({fill:\"red\",shape:\"ring\",text:\"período de dias incorreto\"});\n}\n\n\n\n// valor * (1,111 ^ ano_de_vencimento)\n\n// Math.pow((1+ (total_rent/100)), periodo)\n\nconst taxa_diaria       = Math.pow(1+(11,11/100), (1/360));\n\nconst valor_rendimento  = Math.round(valor * Math.pow(taxa_diaria, periodo_dias));\n\nmsg.payload = `No vencimento do título escolhido seus R$${valor} se tornariam R$${valor_rendimento}`;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":2900,"y":1180,"wires":[["73f2eecb.95e6e"]]},{"id":"1f9fbd5b.16f613","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2720,"y":1180,"wires":[["f68b4c74.4ce8c"]]},{"id":"c0fa1c5.39f97e","type":"delay","z":"70e10602.ab07d8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":380,"wires":[["c3742991.a58bc8"]]},{"id":"29f6d58c.61bb0a","type":"link out","z":"70e10602.ab07d8","name":"","links":["efb1fac.ffd1e08"],"x":1655,"y":340,"wires":[]},{"id":"efb1fac.ffd1e08","type":"link in","z":"70e10602.ab07d8","name":"Fluxo me ajuda SIM","links":["29f6d58c.61bb0a"],"x":815,"y":140,"wires":[["79f24259.43dabc"]]},{"id":"9f0ada4d.f065b8","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2720,"y":1240,"wires":[["29f54726.ea94f8"]]},{"id":"c0d42117.02a05","type":"link out","z":"a8463e25.e555b","name":"","links":["7a3d041.69d60fc"],"x":895,"y":3220,"wires":[]},{"id":"17daa215.593fae","type":"function","z":"a8463e25.e555b","name":"Prepara Payload","func":"var startDate       = '';\nvar endDate         = '';\nconst chat          = msg.chat();\nconst type          = chat.get('type');\nconst startDay      = chat.get('startDay');\nconst startMonth    = chat.get('startMonth');\nconst startYear     = chat.get('startYear');\nconst endDay        = chat.get('endDay');\nconst endMonth      = chat.get('endMonth');\nconst endYear       = chat.get('endYear');\n\nstartDate           = `${startDay}-${startMonth}-${startYear}`;\nendDate             = `${endDay}-${endMonth}-${endYear}`;\n\nconst mensagem      = {startDate,endDate};\nmsg.payload         = mensagem;\n\nreturn msg;\n\n\n","outputs":1,"noerr":0,"x":350,"y":3960,"wires":[["b2b9b275.062d4"]]},{"id":"f6501949.9eff98","type":"link out","z":"a8463e25.e555b","name":"","links":["3c8b98a9.b293f8"],"x":1115,"y":3960,"wires":[]},{"id":"9f42c07b.2632d","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1800,"y":180,"wires":[["3bae2241.4376de"]]},{"id":"3bae2241.4376de","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":1895,"y":180,"wires":[]},{"id":"eb972454.864cf8","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":1015,"y":3540,"wires":[]},{"id":"77ee3a73.d9a994","type":"link in","z":"a8463e25.e555b","name":"Recomendações Carrossel","links":["a13471b6.9c687","3a1a8d7a.4ba4e2","5c122854.b7b5f8"],"x":1495,"y":100,"wires":[["b023c1eb.6e2ce"]]},{"id":"f236ba2d.72d0d8","type":"link out","z":"a8463e25.e555b","name":"","links":["d4836b49.ab4078"],"x":815,"y":1680,"wires":[]},{"id":"d0073c46.c597d","type":"link out","z":"a8463e25.e555b","name":"","links":["d4836b49.ab4078"],"x":982,"y":2800,"wires":[]},{"id":"e65f4631.2adc18","type":"link out","z":"a8463e25.e555b","name":"","links":[],"x":815,"y":1500,"wires":[]},{"id":"48463c63.0cffc4","type":"delay","z":"70e10602.ab07d8","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":580,"y":260,"wires":[["8e927c9b.68bf2"]]},{"id":"8ab0e6d0.7013c8","type":"delay","z":"70e10602.ab07d8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1320.499921798706,"y":193.0832920074463,"wires":[["f42eac50.6f2b4"]]},{"id":"de392eb6.49754","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1000,"y":880,"wires":[["b4c70d1c.46475"]]},{"id":"4416fa9c.4f8674","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1000,"y":940,"wires":[["35165c94.153c34"]]},{"id":"e170d505.202298","type":"link in","z":"3e11eb34.344f14","name":"Sabe no que investir","links":["4aeb4b31.b1ebe4","ce093b3b.050028","eaa36c7.a0d1f9","70a05137.4019","4af36113.5e62e"],"x":369,"y":77,"wires":[["3b2f5275.8b94ae"]]},{"id":"bfb58c38.504b2","type":"link out","z":"3e11eb34.344f14","name":"Simular investimento","links":["b8dadb34.3a5bc8"],"x":1149,"y":37,"wires":[]},{"id":"15c4bd86.39ae82","type":"link out","z":"3e11eb34.344f14","name":"","links":["902b2021.9a7a3","9d724f8a.717c3"],"x":1149,"y":77,"wires":[]},{"id":"a6ecf316.746ec","type":"comment","z":"3e11eb34.344f14","name":" sabe no que deseja investir?","info":"","x":474,"y":37,"wires":[]},{"id":"4301741c.44036c","type":"delay","z":"fb3356c4.1da0f8","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":220,"wires":[[]]},{"id":"6227bd73.24ed24","type":"delay","z":"baad02b0.36999","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":760,"y":220,"wires":[["793a2fb3.64517"]]},{"id":"e6b9d473.c906e8","type":"comment","z":"baad02b0.36999","name":"Saque ou transferencia","info":"","x":320,"y":160,"wires":[]},{"id":"6f234190.936b1","type":"link out","z":"baad02b0.36999","name":"Mensagem depois do video","links":["1b2a2292.66109d"],"x":1595,"y":200,"wires":[]},{"id":"5207f26f.c6091c","type":"link out","z":"a8463e25.e555b","name":"","links":["d4836b49.ab4078"],"x":3135,"y":680,"wires":[]},{"id":"8cc2b7b3.bcde08","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":3135,"y":720,"wires":[]},{"id":"3728059.bf9f3fa","type":"link out","z":"a8463e25.e555b","name":"","links":["d4836b49.ab4078"],"x":3135,"y":420,"wires":[]},{"id":"f729f6fe.3614b8","type":"link out","z":"a8463e25.e555b","name":"","links":["637c897c.e34638","5741c2a6.441d5c"],"x":2495,"y":460,"wires":[]},{"id":"b5cacc79.35391","type":"http request","z":"3e11eb34.344f14","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/fixedIncomes/public_titles","tls":"","x":1370,"y":2340,"wires":[["63e0080c.9680e8"]]},{"id":"61256abb.0d00e4","type":"change","z":"3e11eb34.344f14","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":1170,"y":2340,"wires":[["b5cacc79.35391"]]},{"id":"2cf004fd.78601c","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["708c045.85809fc"],"x":1245,"y":2940,"wires":[]},{"id":"abfc6abc.026b28","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["af1b085f.98d268"],"x":1245,"y":2980,"wires":[]},{"id":"d241cbd3.fdee08","type":"comment","z":"3e11eb34.344f14","name":"consulta API tesouro direto","info":"","x":1190,"y":2300,"wires":[]},{"id":"a93c74f9.3e30f8","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["b8dadb34.3a5bc8"],"x":1245,"y":3020,"wires":[]},{"id":"b6c95344.e405e","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":2740,"wires":[["dc57b709.5433e8"]]},{"id":"46a59676.1f0b28","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":2680,"wires":[["85f1962b.7bc598"]]},{"id":"ad4d5ac1.5026f8","type":"function","z":"3e11eb34.344f14","name":"obtem operação, código do TD, IPCA","func":"let mensagem_td = msg.payload.content.split(\" \");\nlet operacao_td = mensagem_td[0];\nlet codigo_td   = mensagem_td[1];\n\nflow.set(\"ipca\",3.5);\n\nif(codigo_td){\n\n    flow.set(\"codigo_td\",codigo_td);\n    \n    msg.payload = {operacao_td,codigo_td};\n    \n    return [msg,null];\n}else{\n    msg.payload = \"Não consegui obter o codigo_td.\";\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":870,"y":2440,"wires":[["bad609d6.5eef48","61256abb.0d00e4"],["1443714a.a65fbf"]]},{"id":"4cf7f7f5.111ff8","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":2980,"wires":[["7f0a696e.02f1e8"]]},{"id":"cb2d90e6.ce275","type":"function","z":"3e11eb34.344f14","name":"simular investimento td","func":"const chat                  = msg.chat();\nconst taxas_td              = flow.get(\"taxas_td\"); //taxas_td\nlet VI                      = chat.get(\"valor_simular_td\");\nlet t                       = chat.get(\"periodo_simular_td\");\nconst value_price_purchase  = msg.payload;\nconst juros_anual           = value_price_purchase/100;\nconst juros_mensal          = Math.pow(juros_anual+1,1/12)-1;\n\n// VI = valor de investimento\n// i = taxa de aplicação (rentabilidade)\n// t = tempo do investimento\n// VI*(1+i)^t\n\nconst resultado = Math.round(VI*(Math.pow(juros_mensal+1, t)));\n\nmsg.payload = `Ao final dos ${t} meses seus R$${VI} se transformariam em R$${resultado}!`;\nreturn msg;","outputs":"1","noerr":0,"x":420,"y":2860,"wires":[["5b2a9403.c75dfc"]]},{"id":"cc1fd69c.bd0e88","type":"subflow:94f329f8.499948","z":"3e11eb34.344f14","name":"","x":420,"y":3320,"wires":[["6c743655.63c248"],["b13b790d.4f3d88"]]},{"id":"6c743655.63c248","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":660,"y":3200,"wires":[["72bf8ff8.5b209"]]},{"id":"c0df8e3.f77ed7","type":"function","z":"3e11eb34.344f14","name":"Saldo suficiente","func":"const chat              = msg.chat();\nconst valor_simular_td  = chat.get(\"valor_simular_td\");\nconst saldo             = msg.payload.total_balance;\n\nif(saldo >= valor_simular_td){\n    return [msg,null];\n\n}else if (saldo < valor_simular_td){\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":420,"y":3960,"wires":[["439bc512.9b4ddc"],["185fa3.ecfc205d"]]},{"id":"bad609d6.5eef48","type":"function","z":"3e11eb34.344f14","name":"investir ou simular","func":"const operacao_td = msg.payload.operacao_td;\n\nif(operacao_td === 'invest'){\n    return [msg,null];\n    \n}else if(operacao_td === 'simulate') {\n    return [null,msg];\n}\n\n","outputs":"2","noerr":0,"x":1190,"y":2400,"wires":[["92c3ccfe.8918a"],["777df5d4.a84bbc"]]},{"id":"21d61837.8e0b58","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":660,"y":3520,"wires":[["63963055.0059d"]]},{"id":"cd1d14b0.5860e8","type":"function","z":"3e11eb34.344f14","name":"Investir valor_real","func":"const chat                  = msg.chat();\nlet purchase_value          = msg.payload;\nlet valor_do_investimento   = chat.get(\"valor_simular_td\");\n\nlet investimento_minimo     = purchase_value / 100;\nlet qtd_desejada            = Math.trunc(valor_do_investimento / investimento_minimo);\nlet qtd_efetiva             = qtd_desejada / 100;\nlet valor_real              = purchase_value * qtd_efetiva;\n\nflow.set(\"qtd_efetiva\",qtd_efetiva);\n\nmsg.payload = valor_real;\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":3820,"wires":[["da464c7.8bf95b"]]},{"id":"708c045.85809fc","type":"link in","z":"3e11eb34.344f14","name":"TD Investir valida login","links":["92c3ccfe.8918a","2cf004fd.78601c"],"x":275,"y":3320,"wires":[["cc1fd69c.bd0e88"]]},{"id":"af9cc173.0e74f","type":"link out","z":"3e11eb34.344f14","name":"Login","links":["1d95b2d1.83041d"],"x":1375,"y":3480,"wires":[]},{"id":"e08fc99d.4e2d28","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1340,"y":4020,"wires":[["be799839.b83fb8"]]},{"id":"b13b790d.4f3d88","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":660,"y":3460,"wires":[["1d92bdf0.2e2dd2"]]},{"id":"50f73104.e82dc","type":"link out","z":"3e11eb34.344f14","name":"Options","links":["b8dadb34.3a5bc8"],"x":1375,"y":3520,"wires":[]},{"id":"be799839.b83fb8","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["af1b085f.98d268"],"x":1515,"y":4020,"wires":[]},{"id":"63e0080c.9680e8","type":"function","z":"3e11eb34.344f14","name":"API atributos TD específico","func":"let mensagem = [];\nconst codigo_td = flow.get(\"codigo_td\");\n\nfor(let data of msg.payload.data){\n    if(data.id == codigo_td){\n        const id                    = data.id;\n        const name                  = data.attributes.name;\n        const code                  = data.attributes.code;\n        const kind                  = data.attributes.kind;\n        const selic                 = data.attributes.selic;\n        const isin                  = data.attributes.isin;\n        const data_of_issue         = data.attributes.data_of_issue;\n        const expiration_date       = data.attributes.expiration_date;\n        const business              = data.attributes.business;\n        const base_value            = data.attributes.base_value;\n        const purchase_value        = data.attributes.purchase_value;\n        const value_price_purchase  = data.attributes.value_price_purchase;\n        const value_for_sale        = data.attributes.value_for_sale;\n        const value_tax_sale        = data.attributes.value_tax_sale;\n        const indexer               = data.attributes.indexer;\n        \n        mensagem.push({\"id\":id,\"name\":name,\"selic\":selic,\"purchase_value\":purchase_value,\"value_price_purchase\":value_price_purchase});\n        \n        flow.set(\"taxas_td\",mensagem);\n        \n        msg.payload = mensagem;\n        return msg;\n    }\n}   \n\n","outputs":"1","noerr":0,"x":1600,"y":2340,"wires":[[]]},{"id":"a92647f9.c1ebe8","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":660,"y":3880,"wires":[["902b3fe1.46323"]]},{"id":"d66538d1.3d9278","type":"link out","z":"3e11eb34.344f14","name":"Investir td  logado","links":["af1b085f.98d268"],"x":1515,"y":4080,"wires":[]},{"id":"9634cc2b.bb2d4","type":"link out","z":"3e11eb34.344f14","name":"Investir td  logado","links":["af1b085f.98d268"],"x":1495,"y":3880,"wires":[]},{"id":"af1b085f.98d268","type":"link in","z":"3e11eb34.344f14","name":"TD Carrossel","links":["bd98fe41.2913e","9634cc2b.bb2d4","d6dd7f90.bf3ce","d66538d1.3d9278","be799839.b83fb8","abfc6abc.026b28","a2367900.7dcab8"],"x":255,"y":2280,"wires":[["289e64e4.0b855c"]]},{"id":"bd98fe41.2913e","type":"link out","z":"3e11eb34.344f14","name":"Carrossel TD","links":["af1b085f.98d268"],"x":1335,"y":2000,"wires":[]},{"id":"92c3ccfe.8918a","type":"link out","z":"3e11eb34.344f14","name":"Investir valida login","links":["708c045.85809fc"],"x":1325,"y":2380,"wires":[]},{"id":"f7d78465.252418","type":"link in","z":"3e11eb34.344f14","name":"TD Simular","links":["777df5d4.a84bbc","29c77462.1771ec","32183ac.484eac6"],"x":255,"y":2680,"wires":[["46a59676.1f0b28"]]},{"id":"777df5d4.a84bbc","type":"link out","z":"3e11eb34.344f14","name":"SImular TD","links":["f7d78465.252418"],"x":1325,"y":2420,"wires":[]},{"id":"dcfa432d.4a931","type":"comment","z":"3e11eb34.344f14","name":"TD Carrossel","info":"","x":310,"y":2240,"wires":[]},{"id":"eba6bccf.18167","type":"comment","z":"3e11eb34.344f14","name":"TD Simular","info":"","x":300,"y":2640,"wires":[]},{"id":"23bffd29.960ac2","type":"comment","z":"3e11eb34.344f14","name":"TD Investir valida login","info":"","x":360,"y":3280,"wires":[]},{"id":"860c3094.f22c5","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":2920,"wires":[["3a81d0cb.688c5"]]},{"id":"3a182234.0d731e","type":"comment","z":"3e11eb34.344f14","name":"Saldo insuficiente","info":"","x":680,"y":4060,"wires":[]},{"id":"70374d85.d944a4","type":"link out","z":"3e11eb34.344f14","name":"Investir td  logado","links":["1b2a2292.66109d"],"x":1295,"y":4120,"wires":[]},{"id":"42813e3e.9fe1e","type":"comment","z":"a8463e25.e555b","name":"Recomendações","info":"","x":1560,"y":60,"wires":[]},{"id":"f4212ac4.5e5d68","type":"link out","z":"a8463e25.e555b","name":"x1","links":["6e925a79.08a7b4"],"x":1035,"y":100,"wires":[]},{"id":"6e925a79.08a7b4","type":"link in","z":"a8463e25.e555b","name":"Consultar Renda Variável Carrossel","links":["f4212ac4.5e5d68"],"x":1495,"y":380,"wires":[["94ada792.73bd28"]]},{"id":"f5fe150d.e463b8","type":"link out","z":"a8463e25.e555b","name":"x2","links":["d9ce4761.0261e8"],"x":1035,"y":140,"wires":[]},{"id":"d9ce4761.0261e8","type":"link in","z":"a8463e25.e555b","name":"Consultar Renda Fixa Carrossel","links":["f5fe150d.e463b8"],"x":1495,"y":640,"wires":[["fea8bfc.bf4bb4"]]},{"id":"bb1184be.413368","type":"http request","z":"3e11eb34.344f14","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/fixedIncomes/public_titles","tls":"","x":610,"y":2800,"wires":[["b04fe3e4.b61b1"]]},{"id":"7a8126e1.b52b38","type":"change","z":"3e11eb34.344f14","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":2800,"wires":[["bb1184be.413368"]]},{"id":"b04fe3e4.b61b1","type":"function","z":"3e11eb34.344f14","name":"API Titulos TD","func":"if(msg.payload.data){\n    let mensagem = [];\n    const codigo_td = flow.get(\"codigo_td\");\n     \n    for(let data of msg.payload.data){\n        if(data.id == codigo_td){\n            \n        //flow.set(\"value_price_purchase\",value_price_purchase);\n        \n        msg.payload = data.attributes.value_price_purchase;\n        \n        return [msg,null];\n        }\n    }  \n}else{\n     msg.payload = \"Não consegui consultar o Tesouro direto. Tente novamente mais tarde.\"\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":840,"y":2800,"wires":[["cb2d90e6.ce275"],["5123812.960c38"]]},{"id":"7f837171.01c85","type":"http request","z":"3e11eb34.344f14","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/fixedIncomes/public_titles","tls":"","x":890,"y":3720,"wires":[["f1a2e3a6.688ae"]]},{"id":"439bc512.9b4ddc","type":"change","z":"3e11eb34.344f14","name":"","rules":[{"t":"set","p":"headers","pt":"msg","to":"{\"content-type\":\"application/vnd.api+json\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":3720,"wires":[["7f837171.01c85"]]},{"id":"f1a2e3a6.688ae","type":"function","z":"3e11eb34.344f14","name":"API TD purchase_value","func":"const codigo_td = flow.get(\"codigo_td\");\n \nif(msg.payload.data){ \n    for(let data of msg.payload.data){\n        if(data.id == codigo_td){\n            msg.payload = data.attributes.purchase_value;\n            return [msg,null];\n        }\n    }  \n}else{\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":1110,"y":3720,"wires":[["cd1d14b0.5860e8"],["200f6352.ae79bc"]]},{"id":"da464c7.8bf95b","type":"function","z":"3e11eb34.344f14","name":"Arredonda valor_real","func":"const valor_real = msg.payload;\n\nconst valor_real_ajustado = valor_real.toFixed(2);\n\nconst mensagem = `Arredondando o valor para esse investimento R$${valor_real_ajustado}`;\n\nmsg.payload = mensagem;\n\nreturn msg;","outputs":1,"noerr":0,"x":940,"y":3820,"wires":[["bfd81753.05c278"]]},{"id":"67c4f5ac.72638c","type":"delay","z":"8a52eade.40f148","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":140,"wires":[["c9d3fbca.784d18"]]},{"id":"6474b420.caa0ac","type":"subflow:5fdbe0b9.637a4","z":"baad02b0.36999","name":"","x":1200,"y":160,"wires":[["3b1139a4.fb4bf6"]]},{"id":"f0378dd8.136e4","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":1160,"wires":[["f337faea.7ebce8"]]},{"id":"6630c5c9.c0b99c","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["d0313994.934438"],"x":1155,"y":1140,"wires":[]},{"id":"d9ecdab2.677028","type":"link in","z":"fb7270a.0c3fe9","name":"Carrossel Perfil 2","links":["e56a92a0.bdc3f"],"x":215,"y":220,"wires":[["84ae75f3.3c0fa8","a6e500e4.efae1"]]},{"id":"e56a92a0.bdc3f","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["d9ecdab2.677028"],"x":955,"y":40,"wires":[]},{"id":"b05f343c.cea598","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["1b2a2292.66109d"],"x":1255,"y":140,"wires":[]},{"id":"3940bee6.5eb042","type":"subflow:5fdbe0b9.637a4","z":"3e11eb34.344f14","x":1380,"y":4080,"wires":[["d66538d1.3d9278"]]},{"id":"8c5eac0e.d595c","type":"link out","z":"3e11eb34.344f14","name":"","links":["1b2a2292.66109d"],"x":1371,"y":247,"wires":[]},{"id":"cd85c753.725268","type":"subflow:94f329f8.499948","z":"3e11eb34.344f14","x":1206,"y":287,"wires":[["8c5eac0e.d595c"],["52763e26.9a53c"]]},{"id":"52763e26.9a53c","type":"link out","z":"3e11eb34.344f14","name":"","links":["1b2a2292.66109d"],"x":1371,"y":307,"wires":[]},{"id":"d143b499.721438","type":"function","z":"fb7270a.0c3fe9","name":"Criar URL API Carteiras","func":"const chat      = msg.chat();\nconst valor     = chat.get('valor');\nconst perfil    = chat.get('perfil');\n\nif(valor < 50000 && perfil === \"conservador\"){\n    msg.payload = {\n        \"data\":{\n          \"type\": \"conservador\",\n          \"id\": 1,\n          \"attributes\":{\n              \"pos_fixado\": 40,\n              \"tesouro_pos\" : 30,\n              \"ipca_emissao_bancaria\":30,\n              \"renda_fixa_percent\": 100,\n              \"renda_variavel_percent\": 0,\n              \"private_credit_percent\": 0,\n              \"pos_rent\":11,\n              \"tesouro_rent\":10.3,\n              \"ipca_rent\": 11,\n              \"total_rent\": 10.8\n            } \n        }\n    };    \n} else if(valor < 50000 && perfil === \"moderado\"){\n    msg.payload = {\n     \"data\":{\n          \"type\": \"moderado\",\n          \"id\": 2,\n          \"attributes\":{\n              \"tesouro_pos\": 30,\n              \"emissao_bancaria\":20,\n              \"renda_fixa_percent\":50,\n              \"debentures\":20,\n              \"private_credit\":20,\n              \"fundo_multimercado\":30,\n              \"renda_variavel_percent\":30,\n              \"tesouro_rent\":10.3,\n              \"emissao_bancaria_rent\":11,\n              \"debentures_rent\": 12,\n              \"fundo_rent\": 14,\n              \"total_rent\": 11.9\n            } \n        }\n    };   \n} else if(valor < 50000 && perfil === \"agressivo\"){\n    msg.payload = {\n     \"data\":{\n          \"type\": \"agressivo\",\n          \"id\": 3,\n          \"attributes\":{\n              \"pos_fixado_emissao_bancaria\": 20,\n              \"tesouro_pos\":20,\n              \"renda_fixa_percent\":40,\n              \"debentures\":20,\n              \"private_credit\":20,\n              \"fundo_multimercado\":20,\n              \"acoes_fII\":20,\n              \"renda_variavel_percent\":40,\n              \"pos_fixado_rent\":11,\n              \"tesouro_pos_rent\":10.25,\n              \"fundo_multimercado_rent\": 14,\n              \"debenture_rent\": 12,\n              \"acoes_fII_rent\": 15,\n              \"total_rent\": 12.45\n            } \n        }\n    };\n} else if(valor > 50000){\n    msg.payload = {\n     \"data\":{\n          \"type\": \"conservador\",\n          \"id\": 1,\n          \"attributes\":{\n              \"pos_fixado\": 40,\n              \"tesouro_pos\" : 30,\n              \"ipca_emissao_bancaria\":30,\n              \"renda_fixa_percent\": 100,\n              \"renda_variavel_percent\": 0,\n              \"private_credit_percent\": 0,\n              \"pos_rent\":11,\n              \"tesouro_rent\":10.3,\n              \"ipca_rent\": 11,\n              \"total_rent\": 10.8\n            } \n        }\n    };   \n}else{\n    msg.payload = {\n    \"data\":{\n      \"type\": \"conservador\",\n      \"id\": 1,\n      \"attributes\":{\n              \"pos_fixado\": 40,\n              \"tesouro_pos\" : 30,\n              \"ipca_emissao_bancaria\":30,\n              \"renda_fixa_percent\": 100,\n              \"renda_variavel_percent\": 0,\n              \"private_credit_percent\": 0,\n              \"pos_rent\":11,\n              \"tesouro_rent\":10.3,\n              \"ipca_rent\": 11,\n              \"total_rent\": 10.8\n            } \n        }\n    };\n}\n\nflow.set(\"Valores_para_perfil\",msg.payload.data);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1370,"y":1060,"wires":[["7bfe80fe.93de6"]]},{"id":"eeeb8d5a.a4aa2","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":970,"y":2320,"wires":[["49717020.0c7f5","41337377.599b7c"]]},{"id":"a0ec60f8.54da6","type":"chatbot-message","z":"a8463e25.e555b","name":"Stock","message":[{"message":"Lembrando que a qualquer momento você pode realizar a busca de uma determinada ação digitando o nome dela. "}],"answer":false,"track":false,"x":270,"y":2240,"wires":[["775e7078.1d718"]]},{"id":"83503151.cbbd8","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":870,"y":740,"wires":[["82e2ae17.82ecf","5636d17a.9ffc1"]]},{"id":"159b1797.c70008","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":830,"y":1020,"wires":[["ac0b8663.fec8e8","1042a52f.e3498b"]]},{"id":"e0a3bd1d.b5d29","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":830,"y":1280,"wires":[["718faf63.4c4fb","23956494.09d96c"]]},{"id":"e2fa4e4d.9c083","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":830,"y":1200,"wires":[["d9d0dd3f.4b68b","2374819b.f7d52e"]]},{"id":"1d984a2e.3a7b46","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"Digite o nome ou parte do nome do fundo para consultar mais detalhes."}],"answer":false,"track":false,"x":270,"y":1900,"wires":[["b37f7c69.41f69"]]},{"id":"f65fb47f.e68088","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":970,"y":1980,"wires":[["c47d22b9.948e9"]]},{"id":"77a00b45.a45954","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":970,"y":1780,"wires":[["895ce319.effff","8b30c038.dbc8f"]]},{"id":"51f131a5.2e564","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":970,"y":2100,"wires":[["82608685.fb6758","45d14416.e5d45c"]]},{"id":"c6a77558.c05078","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":950,"y":2540,"wires":[["4c7a15a3.8f500c","3a7962cb.a1724e"]]},{"id":"fd220b0e.353e08","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":950,"y":2660,"wires":[["be6c4e13.45dfe","e93efb3c.27f958"]]},{"id":"b26d5113.b45b3","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":970,"y":2920,"wires":[["91b55ad4.3bd748","3e011f83.55ce"]]},{"id":"c9d3fbca.784d18","type":"chatbot-message","z":"8a52eade.40f148","name":"","message":[{"message":"A poupança é um investimento com risco bem baixo, porém rende muito pouco quando comparamos com outros investimentos..."}],"answer":false,"track":false,"x":570,"y":140,"wires":[["3293c9a2.b69e76","3b8f2e6e.64cae2"]]},{"id":"519d3a6c.e3cc54","type":"chatbot-message","z":"8a52eade.40f148","name":"","message":[{"message":"O Tesouro Direto é a alternativa mais parecida com a poupança, pois é bem seguro e você pode sacar quando você quiser. "}],"answer":false,"track":false,"x":570,"y":200,"wires":[["bb24513f.7ac6c","76652191.06f2e"]]},{"id":"111d992f.eacea7","type":"chatbot-message","z":"8a52eade.40f148","name":"","message":[{"message":"No último ano, o TD rendeu  63% mais que a poupança! E na Ativa, não cobramos taxa de custódia."}],"answer":false,"track":false,"x":570,"y":260,"wires":[["94b0b6a6.6c3208","10eb320d.6cd2ee"]]},{"id":"114e69a6.68ae16","type":"chatbot-message","z":"8a52eade.40f148","name":"","message":[{"message":"Se quiser conhecer mais sobre esse investimento, clique em ver mais detalhes do TD e assista nosso vídeo. "}],"answer":false,"track":false,"x":570,"y":320,"wires":[["b5e6ab4.f7dd058","6660f678.9acc98"]]},{"id":"548399a5.ca1f48","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"1 minuto por favor, enquanto consulto as opções..."}],"answer":false,"track":false,"x":410,"y":880,"wires":[["224d7ae2.e621d6"]]},{"id":"b0eae8de.8f2d48","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Bom saber que você já conhece e confia no Tesouro Direto! :D"}],"answer":false,"track":false,"x":390,"y":1920,"wires":[["a6974c4a.21782","25a4ba61.c68726"]]},{"id":"c6589434.a348e8","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"1 minuto por favor, enquanto consulto as opções..."}],"answer":false,"track":false,"x":370,"y":680,"wires":[["63cd260a.dfe348"]]},{"id":"338097c8.860708","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"Digite a data de fim no formato (DD-MM-AAAA):"}],"answer":false,"track":false,"x":270,"y":3140,"wires":[["d34c22ef.5d4c3"]]},{"id":"4a8a4fbc.e126c","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"Agora o número do mês:"}],"answer":false,"track":false,"x":470,"y":3660,"wires":[["642f4a17.3d2924"]]},{"id":"4246d1da.95cdc","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"E agora o ano:"}],"answer":false,"track":false,"x":470,"y":3720,"wires":[["92b91d95.28d32"]]},{"id":"a1dab8e4.a411b8","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"Beleza! Agora preciso da data final, poderia me falar o dia:"}],"answer":false,"track":false,"x":470,"y":3780,"wires":[["6c759577.8a896c"]]},{"id":"957d9379.16875","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"Agora o número mês:"}],"answer":false,"track":false,"x":470,"y":3840,"wires":[["2dc8d498.1fb1ac"]]},{"id":"5c70bdac.2e0754","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"Agora para eu iniciar a busca, poderia me falar ano:"}],"answer":false,"track":false,"x":470,"y":3900,"wires":[["e1fea43b.eeed18"]]},{"id":"7233031f.bdc3fc","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"Preciso que você me informe o dia pra inicial:"}],"answer":false,"track":false,"x":470,"y":3600,"wires":[["42c512ae.7b5bcc"]]},{"id":"1cca240e.91aafc","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[{"message":"Digite a data inicial no formato (DD-MM-AAAA):"}],"answer":false,"track":false,"x":270,"y":3060,"wires":[["1eaa5cc9.58b053"]]},{"id":"e2513619.130d78","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"Valor disponí­vel para investir","message":[{"message":"Valor disponí­vel para investir?"}],"answer":false,"track":false,"x":620,"y":520,"wires":[["a091d522.f96de8"]]},{"id":"ff61a27d.8ceb9","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"Valor mensalmente Aporte","message":[{"message":"Quanto você pode aplicar mensalmente? "}],"answer":false,"track":false,"x":1060,"y":700,"wires":[["aad0425e.3cdf2"]]},{"id":"a6e500e4.efae1","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"pefil","message":[{"message":"Qual dos perfis abaixo você mais se identifica? "}],"answer":false,"track":false,"x":390,"y":220,"wires":[["3c08a9b0.9f2ab6"]]},{"id":"d71fbddc.767cd","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Para ter certeza de que é um bom investimento, preparei um vídeo comparando ele com a poupança."}],"answer":false,"track":false,"x":790,"y":1980,"wires":[["d16dd223.c2dee","7420ce7c.ae721"]]},{"id":"73f2eecb.95e6e","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":3150,"y":1180,"wires":[["f791539d.1b34c","9f0ada4d.f065b8"]]},{"id":"38bd24a5.17ddfc","type":"chatbot-message","z":"70e10602.ab07d8","name":"","message":[{"message":"É bem rápido..."}],"answer":false,"track":false,"x":970.499921798706,"y":313.0832920074463,"wires":[["bffc0dff.f606e","c0fa1c5.39f97e"]]},{"id":"b4c70d1c.46475","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Show! Agora vou buscar os melhores investimentos de acordo com o seu perfil..."}],"answer":false,"track":false,"x":1150,"y":880,"wires":[["a9418f54.fd694","4416fa9c.4f8674"]]},{"id":"35165c94.153c34","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Com base no que você me informou, segue minha sugestão de carteira.."}],"answer":false,"track":false,"x":1150,"y":940,"wires":[["d143b499.721438","8f966456.0fd908"]]},{"id":"85f1962b.7bc598","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Qual o valor do investimento? (somente números)"}],"answer":false,"track":false,"x":630,"y":2680,"wires":[["35407e99.f29932"]]},{"id":"dc57b709.5433e8","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Quanto tempo deseja manter o investimento? (em meses)"}],"answer":false,"track":false,"x":630,"y":2740,"wires":[["f8f59e2b.c40a6"]]},{"id":"5b2a9403.c75dfc","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":630,"y":2860,"wires":[["dfcb993a.118828","860c3094.f22c5"]]},{"id":"72bf8ff8.5b209","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Qual o valor do investimento? (somente números)"}],"answer":false,"track":false,"x":820,"y":3200,"wires":[["63787805.a6f538"]]},{"id":"1d92bdf0.2e2dd2","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Você deve estar logado para investir"}],"answer":false,"track":false,"x":810,"y":3460,"wires":[["f93d1ce0.b362c","21d61837.8e0b58"]]},{"id":"bfd81753.05c278","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":1130,"y":3820,"wires":[["6abcb90c.626c98","a92647f9.c1ebe8"]]},{"id":"3a81d0cb.688c5","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Nesta simulação não consideramos o IR - que só incide no momento do resgate - nem a taxa da CBLC de 0,3% a.a."}],"answer":false,"track":false,"x":630,"y":2920,"wires":[["cfdaa8f1.3b0418","4cf7f7f5.111ff8"]]},{"id":"830cf615.446508","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Poxa, quando tiver com tempo de responder volte aqui! Mas sem suas respostas, infelizmente não consigo te ajudar :( . "}],"answer":false,"track":false,"x":990,"y":80,"wires":[["4f7f7bf2.175cf4","16f3d8cd.cae237"]]},{"id":"8e927c9b.68bf2","type":"chatbot-listen","z":"70e10602.ab07d8","name":"","showdebug":true,"rules":["yes","nope","*"],"outputs":3,"x":770,"y":260,"wires":[["79f24259.43dabc"],["38bd24a5.17ddfc"],["cddec00b.8b75"]]},{"id":"f42eac50.6f2b4","type":"chatbot-listen","z":"70e10602.ab07d8","name":"","showdebug":true,"rules":["yes","nope","only","*"],"outputs":4,"x":1470.499921798706,"y":193.0832920074463,"wires":[["4aeb4b31.b1ebe4"],["499cb0f8.294a"],["98a410eb.f57a3"],["6eea3b30.9ab0a4"]]},{"id":"45cc55b8.c9059c","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["variable","fixed","extract","*"],"outputs":4,"x":870,"y":160,"wires":[["f4212ac4.5e5d68"],["f5fe150d.e463b8"],["30bfce48.dc3b62"],["4bbaab99.176d24"]]},{"id":"aba5ae25.b476b","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["new","back","*"],"outputs":3,"x":850,"y":2400,"wires":[["daf9905a.b50ae"],["4677c665.bca898"],["4ba05d86.6cc674"]]},{"id":"72d70220.db66bc","type":"chatbot-listen","z":"495bc4b0.0f837c","name":"","showdebug":true,"rules":["invest","position","recommendations","transfer","*"],"outputs":5,"x":1030,"y":160,"wires":[["70a05137.4019"],["bb8c6fe6.c48e4"],["5c122854.b7b5f8"],["e3941bf.95592e8"],["6542ae61.afaa7"]]},{"id":"ddc8ddee.bea93","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["stocks","funds","td","private","initial","*"],"outputs":6,"x":966,"y":227,"wires":[["4a1960c8.4941c"],["692b8489.17584c"],["38dbe1b5.7e61fe"],["ce8aa.637be7568"],["cd85c753.725268"],["b87b5dd3.86b77"]]},{"id":"dcc0e711.6d6b88","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["cv","analist","back","*"],"outputs":4,"x":660,"y":1480,"wires":[["6ed3542e.a2aa4c"],["dfa036c5.82f728"],["e65f4631.2adc18"],["97db254d.849058"]]},{"id":"38563574.61e2da","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":true,"rules":["stock","funds","options","futures","fixed","note","*"],"outputs":7,"x":820,"y":440,"wires":[["115378f4.90bfe7"],["479d8853.c9e5a8"],["79d126d5.07a778"],["79d126d5.07a778"],["79d126d5.07a778"],["8100e3dd.9ecd7"],["e1057282.13477"]]},{"id":"840354cb.a94e18","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["plus","hightlights","back","*"],"outputs":4,"x":640,"y":1660,"wires":[["576f6baa.5c96a4"],["70ef54e7.b7ab5c"],["f236ba2d.72d0d8"],["ca56772c.e58898"]]},{"id":"49863a31.23b0c4","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["variable","list","back","*"],"outputs":4,"x":817,"y":2780,"wires":[["e507508e.ca383"],["505f0f28.fdd2f"],["d0073c46.c597d"],["6848fcc2.105914"]]},{"id":"793a2fb3.64517","type":"chatbot-listen","z":"baad02b0.36999","name":"","showdebug":false,"rules":["transfer","saque","*"],"outputs":3,"x":930,"y":220,"wires":[["6474b420.caa0ac"],["bda9b4f4.2eae98"],["9860f14a.0dcab"]]},{"id":"91d2a548.d73e98","type":"chatbot-listen","z":"8a52eade.40f148","name":"","showdebug":true,"rules":["plus","continue","invest","*"],"outputs":4,"x":1000,"y":380,"wires":[["54eec6e2.d1c978"],["5cd7f914.32bd78"],["5cc45eb5.bb93f"],["7014d0e7.85818"]]},{"id":"9a2b3f03.b3a68","type":"chatbot-listen","z":"8a52eade.40f148","name":"","showdebug":true,"rules":["versus","open","continue","other","*"],"outputs":5,"x":900,"y":740,"wires":[["50d8f20b.533f3c"],["bce2841f.592348"],["14a67453.5b2a2c"],["7266064a.a26108"],["b7029e81.c56f3"]]},{"id":"62ca4eed.36c44","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["invest","back","*"],"outputs":3,"x":1170,"y":2040,"wires":[["bd98fe41.2913e"],["a5aad5b1.870e38"],["612f731.e91ee8c"]]},{"id":"734cc0ad.71f0b","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["new","back","*"],"outputs":3,"x":910,"y":3380,"wires":[["b78d4163.68aa1"],["d506fbdb.72f538"],["7ba3a99f.0cfaa8"]]},{"id":"1c8b5e1a.098972","type":"chatbot-listen","z":"fb7270a.0c3fe9","name":"","showdebug":false,"rules":["yes","no"],"outputs":2,"x":770,"y":760,"wires":[["ff61a27d.8ceb9"],["a7a4ca48.b03798"]]},{"id":"d5aec72f.a7d6f8","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["number","other","*"],"outputs":3,"x":1030,"y":1100,"wires":[["f9b5e8b5.3204d8","9ac19ebb.748b9"],["2c06201b.4a7aa"],["6630c5c9.c0b99c"]]},{"id":"f2e49477.f6e2b8","type":"chatbot-listen","z":"70e10602.ab07d8","name":"","showdebug":true,"rules":["response","back","*"],"outputs":3,"x":1530,"y":380,"wires":[["29f6d58c.61bb0a"],["9cd6bd2a.7a05"],["93438c10.8ea81"]]},{"id":"7bc27dc7.54a474","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["invest","*"],"outputs":2,"x":1470,"y":740,"wires":[["5ac7ad67.4c1ee4"],["7d2a565f.726e08"]]},{"id":"2149f8ed.969d78","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["yes","nope","*"],"outputs":3,"x":730,"y":3220,"wires":[["e8fce487.200828"],["c0d42117.02a05"],["95b93253.42686"]]},{"id":"83d51bbf.0d2f58","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["yes","nope","*"],"outputs":3,"x":990,"y":3960,"wires":[["ac2cbe63.ad8d4"],["f6501949.9eff98"],["2f9f835.2ad8f7c"]]},{"id":"6a3f43d7.6e611c","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["bmf,bovespa","back","*"],"outputs":3,"x":870,"y":3540,"wires":[["974c0d89.ea8da"],["eb972454.864cf8"],["efa44f9f.82269"]]},{"id":"40a04597.77889c","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["yes","no","*"],"outputs":3,"x":964,"y":77,"wires":[["bfb58c38.504b2"],["15c4bd86.39ae82"],["68e03e8a.a67df"]]},{"id":"b809b439.5fc878","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["private","td","other","*"],"outputs":4,"x":2320,"y":720,"wires":[["a9189cbf.fff3"],["ce589d53.30eab"],["55aa2033.5e59c"],["91e910ca.2a2cf"]]},{"id":"4439fbac.5caa74","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["rescue","back","*"],"outputs":3,"x":2990,"y":680,"wires":[["4743dd02.dba674"],["5207f26f.c6091c"],["8cc2b7b3.bcde08"]]},{"id":"c3fbbab9.863118","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["buy","rescue","back","*"],"outputs":4,"x":2990,"y":400,"wires":[["7190878d.56d278"],["7190878d.56d278"],["3728059.bf9f3fa"],["16768fe2.95cd6"]]},{"id":"ce3cfa68.f738b8","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["funds","stocks","other","recommend","*"],"outputs":5,"x":2330,"y":460,"wires":[["670ca79d.5621c8"],["6822387b.7cd0e8"],["f729f6fe.3614b8"],["c0f070cd.1850c"],["57fd70c3.f976a"]]},{"id":"3def0a5e.203f26","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["invest","again","options"],"outputs":3,"x":1090,"y":2980,"wires":[["2cf004fd.78601c"],["abfc6abc.026b28"],["a93c74f9.3e30f8"]]},{"id":"22d4a598.db967a","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["login","options","*"],"outputs":3,"x":1220,"y":3520,"wires":[["af9cc173.0e74f"],["50f73104.e82dc"],["162faea5.7ceaa1"]]},{"id":"9bf3316b.c5f78","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["again","transfer","start","*"],"outputs":4,"x":1120,"y":4100,"wires":[["e08fc99d.4e2d28"],["3940bee6.5eb042"],["70374d85.d944a4"],["78bc6475.b28c1c"]]},{"id":"5133c5cb.0febfc","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["apply","again","*"],"outputs":3,"x":1350,"y":3880,"wires":[["544216ec.597968"],["9634cc2b.bb2d4"],["606313ec.cdd3dc"]]},{"id":"1a1f5cb7.583ef3","type":"chatbot-listen","z":"fb7270a.0c3fe9","name":"","showdebug":false,"rules":["yes","nope","*"],"outputs":3,"x":810,"y":80,"wires":[["e56a92a0.bdc3f"],["830cf615.446508"],["8761e4d.4bdb618"]]},{"id":"d43b1625.5fe578","type":"chatbot-parse","z":"a8463e25.e555b","name":"stockName","parseType":"string","parseVariable":"string","x":670,"y":2240,"wires":[["6c660539.05054c"],[]]},{"id":"a46635cb.647038","type":"chatbot-parse","z":"a8463e25.e555b","name":"fundName","parseType":"string","parseVariable":"fundName","x":650,"y":1900,"wires":[["f3227d51.e1613"],[]]},{"id":"974c0d89.ea8da","type":"chatbot-parse","z":"a8463e25.e555b","name":"type","parseType":"string","parseVariable":"type","x":1050,"y":3500,"wires":[["84e85984.99c6e8"],[]]},{"id":"313afd7d.4bfcc2","type":"chatbot-parse","z":"a8463e25.e555b","name":"startDay","parseType":"number-integer","parseVariable":"startDay","x":860,"y":3600,"wires":[["dac7151f.885ab8"],["38b2b341.a4624c"]]},{"id":"936a9dcf.29f4b","type":"chatbot-parse","z":"a8463e25.e555b","name":"startMonth","parseType":"number-integer","parseVariable":"startMonth","x":870,"y":3660,"wires":[["3e906b4f.4bc3d4"],["38b2b341.a4624c"]]},{"id":"2704cbb.f4ab534","type":"chatbot-parse","z":"a8463e25.e555b","name":"startYear","parseType":"number-integer","parseVariable":"startYear","x":860,"y":3720,"wires":[["d00596de.9e9b78"],["38b2b341.a4624c"]]},{"id":"a85d4391.61d9b","type":"chatbot-parse","z":"a8463e25.e555b","name":"endDay","parseType":"number-integer","parseVariable":"endDay","x":860,"y":3780,"wires":[["4c51e5a.1e3eb1c"],["38b2b341.a4624c"]]},{"id":"24452bd.db55cd4","type":"chatbot-parse","z":"a8463e25.e555b","name":"endMonth","parseType":"number-integer","parseVariable":"endMonth","x":860,"y":3840,"wires":[["ec3b1ef1.2bbec"],["38b2b341.a4624c"]]},{"id":"3213b059.ee40f","type":"chatbot-parse","z":"a8463e25.e555b","name":"endYear","parseType":"number-integer","parseVariable":"endYear","x":860,"y":3900,"wires":[["17daa215.593fae"],["38b2b341.a4624c"]]},{"id":"e353c86a.4f4d48","type":"chatbot-parse","z":"a8463e25.e555b","name":"dataFinal","parseType":"string","parseVariable":"dataFinal","x":740,"y":3140,"wires":[["57b7a9aa.859698"],[]]},{"id":"1bbe94b3.b1adbb","type":"chatbot-parse","z":"a8463e25.e555b","name":"dataInicial","parseType":"string","parseVariable":"dataInicial","x":740,"y":3060,"wires":[["338097c8.860708"],[]]},{"id":"1bcaa4c2.d0877b","type":"chatbot-parse","z":"fb7270a.0c3fe9","name":"valor","parseType":"number-integer","parseVariable":"valor","x":1050,"y":520,"wires":[["b6b899a5.aedc48"],["44c95a54.e3a524"]]},{"id":"8d9e3d1d.54385","type":"chatbot-parse","z":"fb7270a.0c3fe9","name":"aportevalor","parseType":"number-integer","parseVariable":"aportevalor","x":1550,"y":700,"wires":[["a7a4ca48.b03798"],["1d18c529.6f3d5b"]]},{"id":"f61e7aff.ce0838","type":"chatbot-parse","z":"fb7270a.0c3fe9","name":"periodo","parseType":"string","parseVariable":"periodo","x":1534.6669616699219,"y":821.0000295639038,"wires":[["de392eb6.49754"],["ff8c8645.157418"]]},{"id":"a3ec6b44.38afc8","type":"chatbot-parse","z":"3e11eb34.344f14","name":"valor_titulos","parseType":"string","parseVariable":"valor_titulos","x":2570,"y":1180,"wires":[["1f9fbd5b.16f613"],[]]},{"id":"109e8cbd.9f4db3","type":"chatbot-parse","z":"3e11eb34.344f14","name":"periodo_simular_td","parseType":"string","parseVariable":"periodo_simular_td","x":1090,"y":2740,"wires":[["7a8126e1.b52b38"],["e81b9be1.a65e98"]]},{"id":"ac7a288e.899018","type":"chatbot-parse","z":"fb7270a.0c3fe9","name":"perfil","parseType":"string","parseVariable":"perfil","x":770,"y":400,"wires":[["15829da7.a07452"],[]]},{"id":"d6120de.6c193f","type":"chatbot-video","z":"8a52eade.40f148","name":"","filename":"","caption":"","x":530,"y":660,"wires":[["b501a671.69d8f8"]]},{"id":"1f412682.7c1b49","type":"chatbot-video","z":"8a52eade.40f148","name":"","filename":"","caption":"","x":570,"y":900,"wires":[["3345c0c2.e8ea3"]]},{"id":"3d3c8db3.383fa2","type":"chatbot-inline-buttons","z":"70e10602.ab07d8","name":"","buttons":[{"type":"postback","label":"Sim","value":"yes","answer":"","alert":false},{"type":"postback","label":"Não","value":"nope","answer":"","alert":false}],"message":"Para poder te ajudar, preciso fazer umas perguntas rápidas e entender seu perfil... tudo bem?","x":200,"y":260,"wires":[["b62449c8.2d7a98"]]},{"id":"79f24259.43dabc","type":"chatbot-inline-buttons","z":"70e10602.ab07d8","name":"","buttons":[{"type":"postback","label":"Sim","value":"yes","answer":"","alert":false},{"type":"postback","label":"Não","value":"nope","answer":"","alert":false},{"type":"postback","label":"Só na Poupança","value":"only","answer":"","alert":false}],"message":"Você já fez algum tipo de investimento?","x":980.499921798706,"y":193.0832920074463,"wires":[["49cb5402.5f99bc"]]},{"id":"549db5f1.afb80c","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[{"type":"postback","label":"Renda Fixa","value":"fixed","answer":"","alert":false},{"type":"postback","label":"Renda Variável","value":"variable","answer":"","alert":false},{"type":"postback","label":"Extrato","value":"extract","answer":"","alert":false}],"message":"Escolha uma opção","x":480,"y":160,"wires":[["a45e3c1c.2d25e"]]},{"id":"2ca06519.fd74ba","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[{"type":"postback","label":"Nova Busca","value":"new","answer":"","alert":false},{"type":"postback","label":"Voltar","value":"back","answer":"","alert":false}],"message":"Gostaria de realizar alguma das operações abaixo ? ","x":460,"y":2400,"wires":[["a0c8e3f.01a4c2"]]},{"id":"c3742991.a58bc8","type":"chatbot-inline-buttons","z":"70e10602.ab07d8","name":"","buttons":[{"type":"postback","label":"Responder","value":"response","answer":"","alert":false},{"type":"postback","label":"Menu inicial","value":"back","answer":"","alert":false}],"message":"Sem essas perguntas, não consigo conhecer seu perfil para sugerir algo que combine com seus objetivos!","x":1140,"y":380,"wires":[["c561cdc.704813"]]},{"id":"e0b9d275.742a6","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[{"type":"postback","label":"Mais detalhes","value":"cv","answer":"","alert":false},{"type":"postback","label":"Lista completa","value":"analist","answer":"","alert":false},{"type":"postback","label":"Voltar","value":"back","answer":"","alert":false}],"message":"A qualquer momento você pode digitar o nome de uma ação e realizar a busca","x":260,"y":1480,"wires":[["340cb8f.b677148"]]},{"id":"c33c0940.9590e8","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[{"type":"postback","label":"Ações e Futuros","value":"stock","answer":"","alert":false},{"type":"postback","label":"Fundos e Opções","value":"funds","answer":"","alert":false},{"type":"postback","label":"Nota de Corretagem","value":"note","answer":"","alert":false}],"message":"Gostaria de ver mais detalhes sobre :","x":460,"y":440,"wires":[["76b7a60a.4a9988"]]},{"id":"b8c60f51.85ffc","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[{"type":"postback","label":"Mais detalhes","value":"plus","answer":"","alert":false},{"type":"postback","label":"Em destaque","value":"hightlights","answer":"","alert":false},{"type":"postback","label":"Voltar","value":"back","answer":"","alert":false}],"message":"Qual a opção deseja?","x":260,"y":1660,"wires":[["3ca1f5ed.494a7a"]]},{"id":"548ffc42.0679a4","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[{"type":"postback","label":"Renda Variável","value":"variable","answer":"","alert":false},{"type":"postback","label":"Lista Completa","value":"list","answer":"","alert":false},{"type":"postback","label":"Voltar","value":"Back","answer":"","alert":false}],"message":"O que deseja consultar? ","x":431,"y":2780,"wires":[["bbfc0863.613a38"]]},{"id":"30050edb.da6442","type":"chatbot-inline-buttons","z":"baad02b0.36999","name":"","buttons":[{"type":"postback","label":"Transferência ","value":"transfer","answer":"","alert":false},{"type":"postback","label":"Saque","value":"saque","answer":"","alert":false}],"message":"Escolha uma opção:","x":380,"y":220,"wires":[["5f293b13.65e3d4"]]},{"id":"e7741d71.0cdf5","type":"chatbot-inline-buttons","z":"8a52eade.40f148","name":"","buttons":[{"type":"postback","label":"Sim","value":"yes","answer":"","alert":false},{"type":"postback","label":"Não","value":"nope","answer":"","alert":false},{"type":"postback","label":"Outras opções","value":"other","answer":"","alert":false}],"message":"Quer ver nosso video comparativo entre a poupança e o TD?","x":525.9999961853027,"y":739.8333263397217,"wires":[["84e143fc.4cfc"]]},{"id":"c819f23.411f71","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[{"type":"postback","label":"Bovespa","value":"bovespa","answer":"","alert":false},{"type":"postback","label":"BMF","value":"bmf","answer":"","alert":false},{"type":"postback","label":"Voltar","value":"back","answer":"","alert":false}],"message":"Você pode escolher uma dessas opções para ver mais detalhes, ou voltar ","x":480,"y":3540,"wires":[["93e251db.1715a"]]},{"id":"86b04142.f6c63","type":"chatbot-inline-buttons","z":"fb3356c4.1da0f8","name":"","buttons":[{"type":"url","label":"Abrir conta","url":"https://www.ativainvestimentos.com.br/Cadastro/PessoaFisica/Novo/DadosIniciais","webViewHeightRatio":"full","extensions":false,"answer":"","alert":false}],"message":"Abra sua conta na Ativa grátis!","x":600,"y":160,"wires":[["bbe94c2b.88ca4","4301741c.44036c"]]},{"id":"5c35ee38.531c5","type":"chatbot-inline-buttons","z":"3e11eb34.344f14","name":"","buttons":[{"type":"postback","label":"Investir / Simular","value":"invest","answer":"","alert":false},{"type":"url","label":"Ver mais vídeos","url":"https://www.youtube.com/watch?v=VYfmn0_fvbw&list=PLfq7QAhmXgC0G4XtPUP-QHRtZxWVNOCeH","webViewHeightRatio":"full","extensions":false,"answer":"","alert":false},{"type":"postback","label":"Voltar","value":"back","answer":"","alert":false}],"message":"Você pode investir, ver mais vídeos no nosso canal ou voltar para o começo","x":800,"y":2040,"wires":[["ad775d76.758cf"]]},{"id":"dd627e0b.39ed1","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[],"message":"Segue seu extrato detalhado.","x":520,"y":3300,"wires":[["bd1a854a.64afa8","441221a4.3c3ca"]]},{"id":"a7a4ca48.b03798","type":"chatbot-inline-buttons","z":"fb7270a.0c3fe9","name":"Período manter aplicação","buttons":[{"type":"postback","label":"Até um Ano","value":"1","answer":"","alert":false},{"type":"postback","label":"De 1 a 2 Anos","value":"2","answer":"","alert":false},{"type":"postback","label":"Mais de 2 anos","value":"3","answer":"","alert":false}],"message":"Qual o período que você deseja manter sua aplicação?","x":1050,"y":820,"wires":[["409d462c.3a2818"]]},{"id":"277f83c2.007fcc","type":"chatbot-inline-buttons","z":"a8463e25.e555b","name":"","buttons":[],"message":"","x":820,"y":4060,"wires":[["fe273ae6.5e58a8","130ba267.394e2e"]]},{"id":"3b2f5275.8b94ae","type":"chatbot-inline-buttons","z":"3e11eb34.344f14","name":"","buttons":[{"type":"postback","label":"Sim","value":"yes","answer":"","alert":false},{"type":"postback","label":"Não","value":"no","answer":"","alert":false}],"message":"Você já sabe no que deseja investir?","x":534,"y":77,"wires":[["1159e55a.43dd0b"]]},{"id":"63963055.0059d","type":"chatbot-inline-buttons","z":"3e11eb34.344f14","name":"","buttons":[{"type":"postback","label":"Log In","value":"login","answer":"","alert":false},{"type":"url","label":"Abrir conta","url":"https://www.ativainvestimentos.com.br/Cadastro/PessoaFisica/Novo/DadosIniciais","webViewHeightRatio":"full","extensions":false,"answer":"","alert":false},{"type":"postback","label":"Opções investimentos","value":"options","answer":"","alert":false}],"message":"Abra sua conta na Ativa grátis!","x":820,"y":3520,"wires":[["2285cede.fc52d2"]]},{"id":"4115cdbf.72b6f4","type":"chatbot-quick-replies","z":"495bc4b0.0f837c","name":"","message":"O que gostaria de fazer ? ","buttons":[{"type":"quick-reply","label":"Quero Investir","value":"invest","url":""},{"type":"quick-reply","label":"Descubra seu perfil","value":"perfil","url":""},{"type":"quick-reply","label":"Login","value":"login","url":""},{"type":"quick-reply","label":"Abrir conta","value":"register","url":""},{"type":"quick-reply","label":"Movimentações","value":"transfer","url":""}],"x":600,"y":400,"wires":[["6c194642.65dfe8"]]},{"id":"dc0b1dfe.9d87e","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Escolha o produto que deseja ver","buttons":[{"type":"quick-reply","label":"Ações","value":"stocks","url":""},{"type":"quick-reply","label":"Fundos ","value":"funds","url":""},{"type":"quick-reply","label":"Tesouro Direto","value":"td","url":""},{"type":"quick-reply","label":"Títulos Privados","value":"private","url":""},{"type":"quick-reply","label":"Menu Inicial","value":"initial","url":""}],"x":536,"y":227,"wires":[["b91a0ff9.e4898"]]},{"id":"79154db3.2cb504","type":"chatbot-quick-replies","z":"fb7270a.0c3fe9","name":"","message":"Pretende colocar ou resgatar alguma quantia todo mês?","buttons":[{"type":"quick-reply","label":"Sim","value":"yes","url":""},{"type":"quick-reply","label":"Não","value":"no","url":""}],"x":360,"y":760,"wires":[["7d849f20.393ba"]]},{"id":"da59de79.9ca5e","type":"chatbot-quick-replies","z":"8a52eade.40f148","name":"","message":"Ou continue na ajuda que faremos uma sugestão de investimento que é a sua cara!  :smile: :)","buttons":[{"type":"quick-reply","label":"Detalhes do TD","value":"details","url":""},{"type":"quick-reply","label":"Continuar","value":"continue","url":""},{"type":"quick-reply","label":"Investir","value":"invest","url":""}],"x":600,"y":380,"wires":[["e7122653.928068"]]},{"id":"fe3438c8.26adc8","type":"chatbot-quick-replies","z":"a8463e25.e555b","name":"","message":"Deseja fazer uma nova consulta ou voltar?","buttons":[{"type":"quick-reply","label":"Nova busca","value":"new","url":""},{"type":"quick-reply","label":"Voltar","value":"back","url":""}],"x":500,"y":3380,"wires":[["18d934ae.102acb"]]},{"id":"57b7a9aa.859698","type":"chatbot-quick-replies","z":"a8463e25.e555b","name":"","message":"Você me informou a data inicial {{dataInicial}} e a data final {{dataFinal}}, posso buscar ou você preferere corrigir as datas?","buttons":[{"type":"quick-reply","label":"Buscar","value":"yes","url":""},{"type":"quick-reply","label":"Corrigir","value":"nope","url":""}],"x":300,"y":3220,"wires":[["a0e6609c.827c1"]]},{"id":"b2b9b275.062d4","type":"chatbot-quick-replies","z":"a8463e25.e555b","name":"","message":"Você me informou a data inicial {{payload.startDate}} e a data final {{payload.endDate}}, posso consultar ou você preferere corrigir as datas?","buttons":[{"type":"quick-reply","label":"Consultar","value":"yes","url":""},{"type":"quick-reply","label":"Corrigit","value":"nope","url":""}],"x":580,"y":3960,"wires":[["62a87be4.0c5294"]]},{"id":"7f0a696e.02f1e8","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Você pode investir ou fazer uma nova simulação de investimento.","buttons":[{"type":"quick-reply","label":"Investir","value":"invest","url":""},{"type":"quick-reply","label":"Simular novamente","value":"again","url":""},{"type":"quick-reply","label":"Opções investimentos","value":"options","url":""}],"x":600,"y":2980,"wires":[["7bf9cc6e.3edb74"]]},{"id":"185fa3.ecfc205d","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Saldo insuficiente para operação. Seu saldo é de R${{payload}}","buttons":[{"type":"quick-reply","label":"Simular novamente","value":"again","url":""},{"type":"quick-reply","label":"Transferir","value":"transfer","url":""},{"type":"quick-reply","label":"Inicio","value":"start","url":""}],"x":680,"y":4100,"wires":[["2664de04.3993f2"]]},{"id":"902b3fe1.46323","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"O que achou? Você quer aplicar ou simular novamente?","buttons":[{"type":"quick-reply","label":"Aplicar","value":"apply","url":""},{"type":"quick-reply","label":"Simular novamente","value":"again","url":""}],"x":920,"y":3880,"wires":[["ce5914ba.a9baf8"]]},{"id":"f337faea.7ebce8","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Não era isso que estava buscando?","buttons":[{"type":"quick-reply","label":"Escolher outro produto","value":"other","url":""}],"x":640,"y":1160,"wires":[["2db52911.0d1e86"]]},{"id":"ef4bfd0e.5ecc1","type":"chatbot-quick-replies","z":"fb7270a.0c3fe9","name":"","message":"Vou tentar te ajudar. E para isso, vou precisar fazer umas perguntas sobre seu perfil, ok?","buttons":[{"type":"quick-reply","label":"Sim","value":"yes","url":""},{"type":"quick-reply","label":"Não","value":"nope","url":""}],"x":400,"y":80,"wires":[["1cfbddbd.9dd0e2"]]},{"id":"d408da4e.f07fd8","type":"chatbot-generic-template","z":"a8463e25.e555b","name":"","title":"Fundos em destaque","subtitle":"Perfil: Conservador","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/Fundo-investimento-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"buy","alert":false},{"type":"postback","label":"Simular","value":"datails","alert":false}],"x":1630,"y":900,"wires":[["5cb09f13.35ff2","5cb09f13.35ff2"]]},{"id":"5cb09f13.35ff2","type":"chatbot-generic-template","z":"a8463e25.e555b","name":"","title":"Fundos em destaque","subtitle":"Perfil: Moderado","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/Fundo-investimento-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"buy","alert":false},{"type":"postback","label":"Simular","value":"datails","alert":false}],"x":1630,"y":940,"wires":[["a55a916e.f64a5","a55a916e.f64a5"]]},{"id":"a55a916e.f64a5","type":"chatbot-generic-template","z":"a8463e25.e555b","name":"","title":"Fundos em destaque","subtitle":"Perfil: Agerssivo","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/Fundo-investimento-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"buy","alert":false},{"type":"postback","label":"Simular","value":"datails","alert":false}],"x":1630,"y":980,"wires":[["80a3010c.90de7"]]},{"id":"a9189cbf.fff3","type":"chatbot-generic-template","z":"a8463e25.e555b","name":"","title":"Títulos Privados","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/LCI-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Voltar","value":"back","alert":false}],"x":2570,"y":660,"wires":[["c780dd13.4be27"]]},{"id":"ce589d53.30eab","type":"chatbot-generic-template","z":"a8463e25.e555b","name":"","title":"Tesouro Direto","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/tesouro-direto-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Resgatar","value":"rescue","alert":false},{"type":"postback","label":"Voltar","value":"back","alert":false}],"x":2570,"y":700,"wires":[["c780dd13.4be27"]]},{"id":"6822387b.7cd0e8","type":"chatbot-generic-template","z":"a8463e25.e555b","name":"","title":"Ações","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/card-acoes-opcao-01-negativo.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Comprar/Vender","value":"buy","alert":false},{"type":"postback","label":"Voltar","value":"back","alert":false}],"x":2570,"y":420,"wires":[["319165bf.ff7b4a"]]},{"id":"670ca79d.5621c8","type":"chatbot-generic-template","z":"a8463e25.e555b","name":"","title":"Fundos de Investimento","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/Fundo-investimento-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Resgate","value":"rescue","alert":false},{"type":"postback","label":"Voltar","value":"back","alert":false}],"x":2570,"y":380,"wires":[["319165bf.ff7b4a"]]},{"id":"9b47e73c.cf4588","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Fundos de Investimento","subtitle":"R$ 80.000,00","imageUrl":"https://s3.amazonaws.com/ativa-host1/iconografia/fundo-investimento-01x.png","sharable":true,"topElementStyle":"large","buttons":[{"type":"postback","label":"Consultar","value":"funds","alert":false}],"x":1610,"y":420,"wires":[["782fe5f.d48441c","782fe5f.d48441c"]]},{"id":"782fe5f.d48441c","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Ações","subtitle":"R$ 86.486,86","imageUrl":"https://s3.amazonaws.com/ativa-host1/iconografia/acoes-01x.png","sharable":true,"topElementStyle":"large","buttons":[{"type":"postback","label":"Consultar","value":"stocks","alert":false}],"x":1610,"y":460,"wires":[["30a646fb.f3945a","69d78a13.bfc4c4"]]},{"id":"94ada792.73bd28","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Renda Variável","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/iconografia/logo-ativa.jpg","sharable":true,"topElementStyle":"large","buttons":[{"type":"postback","label":"Recomendações","value":"recommend","alert":false}],"x":1610,"y":380,"wires":[["9b47e73c.cf4588","9b47e73c.cf4588"]]},{"id":"6c194642.65dfe8","type":"chatbot-facebook-send","z":"495bc4b0.0f837c","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":810,"y":400,"wires":[["b37c8e18.bcd6d"]]},{"id":"b62449c8.2d7a98","type":"chatbot-facebook-send","z":"70e10602.ab07d8","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":383,"y":260,"wires":[["48463c63.0cffc4"]]},{"id":"49cb5402.5f99bc","type":"chatbot-facebook-send","z":"70e10602.ab07d8","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1150.499921798706,"y":193.0832920074463,"wires":[["8ab0e6d0.7013c8"]]},{"id":"a45e3c1c.2d25e","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":670,"y":160,"wires":[["45cc55b8.c9059c"]]},{"id":"49717020.0c7f5","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1170,"y":2320,"wires":[]},{"id":"775e7078.1d718","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":470,"y":2240,"wires":[["d43b1625.5fe578"]]},{"id":"a0c8e3f.01a4c2","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":650,"y":2400,"wires":[["aba5ae25.b476b"]]},{"id":"bbe94c2b.88ca4","type":"chatbot-facebook-send","z":"fb3356c4.1da0f8","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":790,"y":160,"wires":[]},{"id":"b91a0ff9.e4898","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":743.0555267333984,"y":226.90277099609375,"wires":[["ddc8ddee.bea93"]]},{"id":"82e2ae17.82ecf","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1050,"y":740,"wires":[]},{"id":"340cb8f.b677148","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":450,"y":1480,"wires":[["dcc0e711.6d6b88"]]},{"id":"76b7a60a.4a9988","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":630,"y":440,"wires":[["38563574.61e2da"]]},{"id":"ac0b8663.fec8e8","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1050,"y":980,"wires":[]},{"id":"d9d0dd3f.4b68b","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1050,"y":1200,"wires":[]},{"id":"3ca1f5ed.494a7a","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":439,"y":1661,"wires":[["840354cb.a94e18"]]},{"id":"b37f7c69.41f69","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":450,"y":1900,"wires":[["a46635cb.647038"]]},{"id":"c47d22b9.948e9","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1150,"y":1980,"wires":[]},{"id":"895ce319.effff","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1150,"y":1780,"wires":[]},{"id":"82608685.fb6758","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1150,"y":2100,"wires":[]},{"id":"4c7a15a3.8f500c","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1170,"y":2540,"wires":[]},{"id":"be6c4e13.45dfe","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1170,"y":2660,"wires":[]},{"id":"bbfc0863.613a38","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":608,"y":2780,"wires":[["49863a31.23b0c4"]]},{"id":"91b55ad4.3bd748","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1150,"y":2920,"wires":[]},{"id":"5f293b13.65e3d4","type":"chatbot-facebook-send","z":"baad02b0.36999","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":570,"y":220,"wires":[["6227bd73.24ed24"]]},{"id":"e7122653.928068","type":"chatbot-facebook-send","z":"8a52eade.40f148","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":810,"y":380,"wires":[["91d2a548.d73e98"]]},{"id":"3293c9a2.b69e76","type":"chatbot-facebook-send","z":"8a52eade.40f148","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":810,"y":140,"wires":[]},{"id":"b501a671.69d8f8","type":"chatbot-facebook-send","z":"8a52eade.40f148","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":710,"y":660,"wires":[]},{"id":"84e143fc.4cfc","type":"chatbot-facebook-send","z":"8a52eade.40f148","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":710,"y":740,"wires":[["9a2b3f03.b3a68"]]},{"id":"3345c0c2.e8ea3","type":"chatbot-facebook-send","z":"8a52eade.40f148","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":730,"y":900,"wires":[]},{"id":"224d7ae2.e621d6","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":582,"y":879,"wires":[]},{"id":"ad775d76.758cf","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":990,"y":2040,"wires":[["62ca4eed.36c44"]]},{"id":"854bfe3.9af0b","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1130,"y":2120,"wires":[]},{"id":"a6974c4a.21782","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":650,"y":1920,"wires":[]},{"id":"c561cdc.704813","type":"chatbot-facebook-send","z":"70e10602.ab07d8","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1330,"y":380,"wires":[["f2e49477.f6e2b8"]]},{"id":"93e251db.1715a","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":650,"y":3540,"wires":[["6a3f43d7.6e611c"]]},{"id":"fe273ae6.5e58a8","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1030,"y":4060,"wires":[]},{"id":"63cd260a.dfe348","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":550,"y":680,"wires":[]},{"id":"bd1a854a.64afa8","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":710,"y":3300,"wires":[]},{"id":"d34c22ef.5d4c3","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":510,"y":3140,"wires":[["e353c86a.4f4d48"]]},{"id":"42c512ae.7b5bcc","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":650,"y":3600,"wires":[["313afd7d.4bfcc2"]]},{"id":"642f4a17.3d2924","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":650,"y":3660,"wires":[["936a9dcf.29f4b"]]},{"id":"92b91d95.28d32","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":650,"y":3720,"wires":[["2704cbb.f4ab534"]]},{"id":"6c759577.8a896c","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":650,"y":3780,"wires":[["a85d4391.61d9b"]]},{"id":"2dc8d498.1fb1ac","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":650,"y":3840,"wires":[["24452bd.db55cd4"]]},{"id":"e1fea43b.eeed18","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":650,"y":3900,"wires":[["3213b059.ee40f"]]},{"id":"18d934ae.102acb","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":710,"y":3380,"wires":[["734cc0ad.71f0b"]]},{"id":"1eaa5cc9.58b053","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":510,"y":3060,"wires":[["1bbe94b3.b1adbb"]]},{"id":"80a3010c.90de7","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1630,"y":1020,"wires":[["955d1f18.e5a16","896aaac0.2e16e8"]]},{"id":"528f521b.8bca7c","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":590,"y":400,"wires":[["ac7a288e.899018"]]},{"id":"a091d522.f96de8","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":870,"y":520,"wires":[["1bcaa4c2.d0877b"]]},{"id":"7d849f20.393ba","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":570,"y":760,"wires":[["1c8b5e1a.098972"]]},{"id":"aad0425e.3cdf2","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1330,"y":700,"wires":[["8d9e3d1d.54385"]]},{"id":"409d462c.3a2818","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1330,"y":820,"wires":[["f61e7aff.ce0838"]]},{"id":"3c08a9b0.9f2ab6","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":570,"y":220,"wires":[]},{"id":"d16dd223.c2dee","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":990,"y":1980,"wires":[]},{"id":"2db52911.0d1e86","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":830,"y":1100,"wires":[["d5aec72f.a7d6f8","f28000c8.2c423"]]},{"id":"f791539d.1b34c","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3350,"y":1180,"wires":[]},{"id":"bffc0dff.f606e","type":"chatbot-facebook-send","z":"70e10602.ab07d8","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1170.499921798706,"y":313.0832920074463,"wires":[]},{"id":"4c635ef1.8e197","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1290,"y":740,"wires":[["7bc27dc7.54a474"]]},{"id":"a0e6609c.827c1","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":510,"y":3220,"wires":[["2149f8ed.969d78"]]},{"id":"62a87be4.0c5294","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":790,"y":3960,"wires":[["83d51bbf.0d2f58"]]},{"id":"1159e55a.43dd0b","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":724,"y":77,"wires":[["40a04597.77889c"]]},{"id":"62bcac55.9821f4","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":2130,"y":720,"wires":[["b809b439.5fc878"]]},{"id":"319165bf.ff7b4a","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":2790,"y":400,"wires":[["c3fbbab9.863118"]]},{"id":"bbab286.1c310d8","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":430,"y":2440,"wires":[["8101682c.1573c8"]]},{"id":"35407e99.f29932","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":850,"y":2680,"wires":[["f70d6ec.c351d9"]]},{"id":"f8f59e2b.c40a6","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":850,"y":2740,"wires":[["109e8cbd.9f4db3"]]},{"id":"7bf9cc6e.3edb74","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":850,"y":2980,"wires":[["3def0a5e.203f26"]]},{"id":"dfcb993a.118828","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":850,"y":2860,"wires":[]},{"id":"63787805.a6f538","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":990,"y":3200,"wires":[["9a2853ca.49c63"]]},{"id":"f93d1ce0.b362c","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1000,"y":3460,"wires":[]},{"id":"2285cede.fc52d2","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1000,"y":3520,"wires":[["22d4a598.db967a"]]},{"id":"2664de04.3993f2","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":900,"y":4100,"wires":[["9bf3316b.c5f78"]]},{"id":"6abcb90c.626c98","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1330,"y":3820,"wires":[]},{"id":"cfdaa8f1.3b0418","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":850,"y":2920,"wires":[]},{"id":"ce5914ba.a9baf8","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1130,"y":3880,"wires":[["5133c5cb.0febfc"]]},{"id":"1cfbddbd.9dd0e2","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":610,"y":80,"wires":[["1a1f5cb7.583ef3"]]},{"id":"4f7f7bf2.175cf4","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1170,"y":80,"wires":[]},{"id":"c780dd13.4be27","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":2790,"y":680,"wires":[["4439fbac.5caa74"]]},{"id":"718faf63.4c4fb","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1050,"y":1280,"wires":[]},{"id":"76652191.06f2e","type":"chatbot-facebook-send","z":"8a52eade.40f148","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":810,"y":200,"wires":[]},{"id":"10eb320d.6cd2ee","type":"chatbot-facebook-send","z":"8a52eade.40f148","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":810,"y":260,"wires":[]},{"id":"6660f678.9acc98","type":"chatbot-facebook-send","z":"8a52eade.40f148","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":810,"y":320,"wires":[]},{"id":"a9418f54.fd694","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1350,"y":880,"wires":[]},{"id":"8f966456.0fd908","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1350,"y":940,"wires":[]},{"id":"9836d062.dec52","type":"chatbot-debug","z":"1e5ebc44.f4cfb4","x":250,"y":140,"wires":[]},{"id":"1e633bf0.3a5724","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Desculpe não entendi o que deseja. "}],"answer":false,"track":false,"x":1410,"y":220,"wires":[["aa31fc47.27aad"]]},{"id":"aa31fc47.27aad","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1590,"y":220,"wires":[["730ab162.3ccf2"]]},{"id":"aa900a49.aaa118","type":"link out","z":"1e5ebc44.f4cfb4","name":"Login feito com sucesso","links":["e0d80e31.c624b","12bcbdd3.eff572","d57e8dab.8f054"],"x":955,"y":120,"wires":[]},{"id":"65ca35d7.82d77c","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Ótimo! :) Então acredito que eu consiga te ajudar em diversos pontos..."}],"answer":false,"track":false,"x":1030,"y":880,"wires":[["b2cb8c39.68678","2e2e754c.ca97ea"]]},{"id":"b2cb8c39.68678","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1230,"y":880,"wires":[]},{"id":"2e2e754c.ca97ea","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":940,"wires":[["4e84c918.defd18"]]},{"id":"4e84c918.defd18","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Aqui no Messenger você pode consultar sua posição consolidada, carteiras sugeridas e até mesmo aplicar no Tesouro Direto! Tudo isso pelo chat."}],"answer":false,"track":false,"x":1190,"y":940,"wires":[["14cd354b.d1bceb","671ce573.22928c"]]},{"id":"14cd354b.d1bceb","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1390,"y":940,"wires":[]},{"id":"671ce573.22928c","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1000,"wires":[["888f0aba.eb5fd8"]]},{"id":"888f0aba.eb5fd8","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"E em breve, aprenderei novas funções para te ajudar ainda mais!"}],"answer":false,"track":false,"x":1190,"y":1000,"wires":[["acbd9ee5.5a17c","2167af53.981cc"]]},{"id":"acbd9ee5.5a17c","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1390,"y":1000,"wires":[]},{"id":"2167af53.981cc","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1060,"wires":[["6facda09.a9ead4"]]},{"id":"6facda09.a9ead4","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Agora que conheceu um pouco mais sobre mim, vou te mostrar algumas opções."}],"answer":false,"track":false,"x":1190,"y":1060,"wires":[["e751655a.f51468","d001d8b0.ef53f8"]]},{"id":"e751655a.f51468","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1390,"y":1060,"wires":[]},{"id":"d001d8b0.ef53f8","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1120,"wires":[["e288d7f4.91c428"]]},{"id":"e288d7f4.91c428","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["1b2a2292.66109d"],"x":1155,"y":1120,"wires":[]},{"id":"3eddb006.88422","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Calma que eu tenho a solução! :)"}],"answer":false,"track":false,"x":1030,"y":1240,"wires":[["8eda1356.e2924","80d2baa7.0d8d68"]]},{"id":"80d2baa7.0d8d68","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1300,"wires":[["2915b050.1cd43"]]},{"id":"8eda1356.e2924","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1233,"y":1242,"wires":[]},{"id":"2915b050.1cd43","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Para entender melhor como uma corretora de investimentos trabalha, preparei um vídeo explicativo para você."}],"answer":false,"track":false,"x":1190,"y":1300,"wires":[["12fb6881.a2db57","dc05e771.5960d8","b2235dce.2f4e3"]]},{"id":"7b594441.8f665c","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1460,"wires":[["595e8f6e.f815d"]]},{"id":"12fb6881.a2db57","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1390,"y":1300,"wires":[]},{"id":"b2235dce.2f4e3","type":"link out","z":"1e5ebc44.f4cfb4","name":"Video UPLOAD","links":["457b60fb.59e95"],"x":1335,"y":1360,"wires":[]},{"id":"c4e8073f.9e0b28","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Aqui no Messenger você pode consultar sua posição consolidada, carteiras sugeridas e até mesmo aplicar no Tesouro Direto! Tudo isso pelo chat."}],"answer":false,"track":false,"x":1190,"y":1400,"wires":[["ecd5d6af.6565b8","7b594441.8f665c"]]},{"id":"dc05e771.5960d8","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1400,"wires":[["c4e8073f.9e0b28"]]},{"id":"ecd5d6af.6565b8","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1390,"y":1400,"wires":[]},{"id":"595e8f6e.f815d","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"E em breve aprenderei novas funções para te ajudar ainda mais!"}],"answer":false,"track":false,"x":1190,"y":1460,"wires":[["27b42586.38065a","741437c.dfce3c8"]]},{"id":"27b42586.38065a","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1390,"y":1460,"wires":[]},{"id":"741437c.dfce3c8","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1520,"wires":[["5573332c.3377fc"]]},{"id":"5573332c.3377fc","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Agora que conheceu um pouco mais sobre mim, vou te mostrar algumas opções."}],"answer":false,"track":false,"x":1190,"y":1520,"wires":[["ccabb2e7.a6913","42492497.43af6c"]]},{"id":"ccabb2e7.a6913","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1390,"y":1520,"wires":[]},{"id":"df59f94f.b341e8","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["1b2a2292.66109d"],"x":1175,"y":1580,"wires":[]},{"id":"33caae5.936a952","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Beleza, {{firstName}}! É só fazer o login e acessar agora mesmo sua conta pelo chat."}],"answer":false,"track":false,"x":410,"y":880,"wires":[["481b0fbf.03a32","a5297d3c.27c5c"]]},{"id":"481b0fbf.03a32","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":610,"y":880,"wires":[]},{"id":"a5297d3c.27c5c","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":940,"wires":[["f71435c.6b555c8"]]},{"id":"f71435c.6b555c8","type":"chatbot-inline-buttons","z":"1e5ebc44.f4cfb4","name":"","buttons":[{"type":"login","url":"https://frontend-ativa.ativa-investimentos.sciensa.click:3000"}],"message":"Para acessar a sua conta utilize o botão abaixo! :) ","x":580,"y":940,"wires":[["e95c5901.132c18"]]},{"id":"e95c5901.132c18","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":770,"y":940,"wires":[]},{"id":"42492497.43af6c","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1580,"wires":[["df59f94f.b341e8"]]},{"id":"c60e7832.8a2558","type":"link in","z":"1e5ebc44.f4cfb4","name":"Faça login","links":["21b68b96.c20ab4","f407f71a.bdd0a8","422640b1.4c4fe","d31ae5d3.eab398","7205703.c24309","698b712c.c931e","36dc4e2f.e68be2","dd3ceffd.53382","b635dd13.da5fa","3ad53780.821328","ac0d7091.d233e","f4474ef7.ff714","2ae81f7f.d71ac","63f81fc8.2c8ed","2ab97718.81ee78"],"x":275,"y":880,"wires":[["33caae5.936a952"]]},{"id":"f407f71a.bdd0a8","type":"link out","z":"1e5ebc44.f4cfb4","name":"Faça login","links":["c60e7832.8a2558"],"x":1195,"y":720,"wires":[]},{"id":"6b4f258b.1bd1ec","type":"comment","z":"1e5ebc44.f4cfb4","name":"Faça login","info":"","x":320,"y":840,"wires":[]},{"id":"169cb19.ddd734e","type":"link in","z":"1e5ebc44.f4cfb4","name":"Faça Logout","links":["37dd3e43.12c042","9174e068.12e39","9f38d24.c041b3","e1747db0.de5a7","5671e88b.938d38","98555564.d37068","9ee60aac.2a64e8","667e0aae.14b474","4334b510.a6e0ec","76af2d5c.123bc4"],"x":285,"y":1200,"wires":[["44b1482c.95d098"]]},{"id":"ca0c49a3.44ddb8","type":"link out","z":"1e5ebc44.f4cfb4","name":"ATALHO","links":[],"x":1375,"y":280,"wires":[]},{"id":"ad23b738.5bb538","type":"comment","z":"1e5ebc44.f4cfb4","name":"Faça logout","info":"","x":340,"y":1160,"wires":[]},{"id":"f7977df0.20b5d","type":"link in","z":"1e5ebc44.f4cfb4","name":"m1","links":["492eae0c.30a63","db79243f.725b38"],"x":915,"y":880,"wires":[["65ca35d7.82d77c"]]},{"id":"492eae0c.30a63","type":"link out","z":"1e5ebc44.f4cfb4","name":"m1","links":["f7977df0.20b5d"],"x":1195,"y":640,"wires":[]},{"id":"2b1b8ec.ce71e72","type":"link out","z":"1e5ebc44.f4cfb4","name":"m2","links":["a267ac53.6a67b"],"x":1195,"y":680,"wires":[]},{"id":"a267ac53.6a67b","type":"link in","z":"1e5ebc44.f4cfb4","name":"m2","links":["683fbcbc.2e38a4","2b1b8ec.ce71e72"],"x":915,"y":1240,"wires":[["3eddb006.88422"]]},{"id":"d0313994.934438","type":"link in","z":"1e5ebc44.f4cfb4","name":"API.AI","links":["efa44f9f.82269","162faea5.7ceaa1","68e03e8a.a67df","44c95a54.e3a524","606313ec.cdd3dc","16768fe2.95cd6","b87b5dd3.86b77","87d8135e.7effb","93438c10.8ea81","c1940aeb.019b78","9860f14a.0dcab","e1057282.13477","8cc2b7b3.bcde08","6eea3b30.9ab0a4","cddec00b.8b75","6848fcc2.105914","ff8c8645.157418","2f9f835.2ad8f7c","4bbaab99.176d24","1d18c529.6f3d5b","4ba05d86.6cc674","95b93253.42686","7ba3a99f.0cfaa8","7014d0e7.85818","b7029e81.c56f3","97db254d.849058","91e910ca.2a2cf","57fd70c3.f976a","6542ae61.afaa7","f3244cf4.46365","ca56772c.e58898","892804c.d3613f8","500e9b0c.5c5d04","8761e4d.4bdb618","2fcd4fa3.f9e57","1443714a.a65fbf","7971441f.ebd27c","78bc6475.b28c1c","54bd6baf.a4c6d4","3dd8877c.e1da68","6630c5c9.c0b99c","c93f0f50.56e4a","47b05c65.b06984","7d2a565f.726e08","41fb21ab.14d95","bb99e424.5219f8"],"x":575,"y":460,"wires":[["471939bb.0ca238"]]},{"id":"8c4e76c7.561b38","type":"chatbot-waiting","z":"1e5ebc44.f4cfb4","waitingType":"typing","x":1060,"y":220,"wires":[["d648ed5d.00e8d","b4ed7bce.c54d78"]]},{"id":"b4ed7bce.c54d78","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1270,"y":160,"wires":[]},{"id":"d648ed5d.00e8d","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1240,"y":220,"wires":[["1e633bf0.3a5724"]]},{"id":"36dc4e2f.e68be2","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["c60e7832.8a2558"],"x":1015,"y":340,"wires":[]},{"id":"4eb345e0.391bfc","type":"function","z":"1e5ebc44.f4cfb4","name":"Obtem Token","func":"if(!global.set(\"token\")){\n    global.set(\"token\",'');\n}\n\nif(msg.payload.linkStatus === 'linked'){\n    global.set(\"token\", msg.payload.content);\n    msg.payload = msg.payload.content;\n    return [msg,null,null];\n}else if(msg.payload.linkStatus === 'unlinked'){\n    global.set(\"token\",'');\n    return [null,msg,null];\n}else{\n    return [null,null,msg];\n}","outputs":"3","noerr":0,"x":504,"y":316,"wires":[["ad53a9ff.2c0b98"],[],["471939bb.0ca238"]]},{"id":"44b1482c.95d098","type":"chatbot-inline-buttons","z":"1e5ebc44.f4cfb4","name":"","buttons":[{"type":"logout"}],"message":"Beleza, {{firstName}}! A qualquer momento você pode fazer o Log out usando o menu do chat.","x":420,"y":1200,"wires":[["ef296c10.4bd08","d6f5cd3e.44303"]]},{"id":"ef296c10.4bd08","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":610,"y":1200,"wires":[]},{"id":"ad53a9ff.2c0b98","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Beleza, {{firstName}}! A qualquer momento você pode fazer o Log out usando o menu do chat."}],"answer":false,"track":false,"x":690,"y":60,"wires":[["d899bdee.0d4c4","71658487.afb6cc"]]},{"id":"d899bdee.0d4c4","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":890,"y":60,"wires":[]},{"id":"71658487.afb6cc","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":860,"y":120,"wires":[["aa900a49.aaa118"]]},{"id":"29f54726.ea94f8","type":"function","z":"3e11eb34.344f14","name":"Calculo Arredondamento com taxa","func":"const chat = msg.chat();\nconst valor = chat.get('valor_titulos');\n\n// valor * (1,111 ^ ano_de_vencimento)\n\n// Math.pow((1+ (total_rent/100)), periodo)\nconst taxad = Math.pow(1+(11,11/100), (1/360));\nconst valorrendimento = Math.round(valor * Math.pow(taxad, 1802));\n\nmsg.payload = `No vencimento do título escolhido seus R$${Math.round(valor)} se tornariam R$${valorrendimento}`;\n//Na hora do saque, teria incidência de IR de 15% em cima do valor do lucro. Nesse caso, o IR é <IMPOSTOR$> e o valor líquido seria <R$$>-<IMPOSTR$>.\n\nreturn msg;","outputs":1,"noerr":0,"x":2940,"y":1240,"wires":[["770e5087.bdd76"]]},{"id":"770e5087.bdd76","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":3150,"y":1240,"wires":[["677997b2.5e2e58"]]},{"id":"677997b2.5e2e58","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3350,"y":1240,"wires":[]},{"id":"80863b0.eedafc8","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":1100,"wires":[["2db52911.0d1e86","f0378dd8.136e4"]]},{"id":"1f6eb2fe.b4e6ed","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":740,"wires":[["4c635ef1.8e197","871ee2c3.c38f5"]]},{"id":"29c77462.1771ec","type":"link out","z":"1e5ebc44.f4cfb4","name":"Menu persistente Inicio","links":["f7d78465.252418"],"x":1015,"y":420,"wires":[]},{"id":"429cf377.1da7ac","type":"file in","z":"1e5ebc44.f4cfb4","name":"","filename":"/usr/src/node-red/videos-ativa/ativa.mp4","format":"","sendError":true,"x":480,"y":1660,"wires":[["8fd4440d.9b06e8"]]},{"id":"8fd4440d.9b06e8","type":"chatbot-video","z":"1e5ebc44.f4cfb4","name":"","filename":"","caption":"","x":715.6363525390625,"y":1659.9090881347656,"wires":[["6cfa5bc5.992064"]]},{"id":"6cfa5bc5.992064","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":935.6363525390625,"y":1659.9090881347656,"wires":[]},{"id":"457b60fb.59e95","type":"link in","z":"1e5ebc44.f4cfb4","name":"Video O que é corretora","links":["b2235dce.2f4e3"],"x":275,"y":1660,"wires":[["429cf377.1da7ac"]]},{"id":"ca9554ed.ff02d8","type":"subflow:94f329f8.499948","z":"495bc4b0.0f837c","name":"","x":370,"y":280,"wires":[["a7df5fa3.7e75b"],["4115cdbf.72b6f4"]]},{"id":"a7df5fa3.7e75b","type":"chatbot-quick-replies","z":"495bc4b0.0f837c","name":"","message":"O que gostaria de fazer ? ","buttons":[{"type":"quick-reply","label":"Quero Investir","value":"invest","url":""},{"type":"quick-reply","label":"Minha posição","value":"position","url":""},{"type":"quick-reply","label":"Recomendações","value":"recommendations","url":""},{"type":"quick-reply","label":"Movimentações","value":"transfer","url":""}],"x":600,"y":160,"wires":[["1cbe1188.65a61e"]]},{"id":"1cbe1188.65a61e","type":"chatbot-facebook-send","z":"495bc4b0.0f837c","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":810,"y":160,"wires":[["72d70220.db66bc"]]},{"id":"d80421c9.ad95","type":"chatbot-facebook-receive","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","x":245,"y":301,"wires":[["9836d062.dec52","4eb345e0.391bfc"]]},{"id":"4334b510.a6e0ec","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["169cb19.ddd734e"],"x":1015,"y":380,"wires":[]},{"id":"ae3be07a.5c3fd","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["7e971f53.d73f6"],"x":1015,"y":460,"wires":[]},{"id":"2a521383.0fac5c","type":"subflow:94f329f8.499948","z":"a8463e25.e555b","x":310,"y":200,"wires":[["549db5f1.afb80c"],["a9654719.f384c8"]]},{"id":"4bbaab99.176d24","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":1035,"y":220,"wires":[]},{"id":"a9654719.f384c8","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":435,"y":240,"wires":[]},{"id":"b320cefc.5a2ac","type":"comment","z":"1e5ebc44.f4cfb4","name":"Segunda tentativa","info":"","x":1830,"y":80,"wires":[]},{"id":"a236ff36.6343c","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Ainda estou em fase de aprendizado, mas eu vou te dar algumas opções."}],"answer":false,"track":false,"x":2110,"y":80,"wires":[["14f03455.4d676c","218ca30.d87795e"]]},{"id":"14f03455.4d676c","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2260,"y":80,"wires":[["f01adcfc.8d83d"]]},{"id":"f01adcfc.8d83d","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["1b2a2292.66109d"],"x":2375,"y":80,"wires":[]},{"id":"218ca30.d87795e","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2290,"y":140,"wires":[]},{"id":"6639ed5a.371284","type":"comment","z":"a8463e25.e555b","name":"Renda Variável","info":"","x":1560,"y":340,"wires":[]},{"id":"7e6c5037.8b1e5","type":"comment","z":"a8463e25.e555b","name":"Renda FIxa","info":"","x":1550,"y":600,"wires":[]},{"id":"4ef4db96.aaea64","type":"chatbot-apiai","z":"c0875af8.7cf1d8","apiai":"cebf41f1.21d16","rules":[{"topic":"getstarted"},{"topic":"menu-inicio"},{"topic":"menu-login"},{"topic":"menu-logout"},{"topic":"tesouro_direto_simular"},{"topic":"meajuda"},{"topic":"cadastro_conta"},{"topic":"corretagem"},{"topic":"tesouro_direto"},{"topic":"investir"},{"topic":"renda_fixa"},{"topic":"renda_variavel"},{"topic":"fundos"},{"topic":"acoes"}],"outputs":15,"x":510,"y":520,"wires":[[],[],[],[],[],[],[],["9e1bec23.ad83e"],["7127de49.c8d4e"],["14fc7a72.ef7206"],["14fc7a72.ef7206"],["14fc7a72.ef7206"],["14fc7a72.ef7206"],["14fc7a72.ef7206"],["14fc7a72.ef7206"]]},{"id":"14fc7a72.ef7206","type":"chatbot-message","z":"c0875af8.7cf1d8","name":"","message":[{"message":"{{payload}}"}],"answer":false,"track":false,"x":750,"y":600,"wires":[["a61b0f50.86a2d"]]},{"id":"7127de49.c8d4e","type":"chatbot-inline-buttons","z":"c0875af8.7cf1d8","name":"","buttons":[{"type":"url","label":"Mais informações","url":"https://www.ativainvestimentos.com.br/Investimentos/Plataformas-de-Negociacao/Plataformas-Profissionais/Pacote-Corretagem/","webViewHeightRatio":"full","extensions":false,"answer":"","alert":false}],"message":"{{payload}}","x":760,"y":560,"wires":[["40a79c2a.935cf4"]]},{"id":"40a79c2a.935cf4","type":"chatbot-facebook-send","z":"c0875af8.7cf1d8","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":970,"y":560,"wires":[]},{"id":"a61b0f50.86a2d","type":"chatbot-facebook-send","z":"c0875af8.7cf1d8","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":970,"y":600,"wires":[]},{"id":"471939bb.0ca238","type":"subflow:c0875af8.7cf1d8","z":"1e5ebc44.f4cfb4","name":"","x":710,"y":360,"wires":[["8c4e76c7.561b38"],["60834c6b.7135f4"],["d5afd59e.eacf38"],["36dc4e2f.e68be2"],["4334b510.a6e0ec"],["29c77462.1771ec"],["ae3be07a.5c3fd"]]},{"id":"730ab162.3ccf2","type":"subflow:c0875af8.7cf1d8","z":"1e5ebc44.f4cfb4","name":"","x":1770,"y":220,"wires":[["a236ff36.6343c"],["fd519e88.c4424"],["109f2f85.2a238"],["dd3ceffd.53382"],["76af2d5c.123bc4"],["32183ac.484eac6"],["28bba49d.dcac1c"]]},{"id":"16768fe2.95cd6","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":3135,"y":460,"wires":[]},{"id":"e1057282.13477","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":1035,"y":520,"wires":[]},{"id":"cddec00b.8b75","type":"link out","z":"70e10602.ab07d8","name":"","links":["d0313994.934438"],"x":915,"y":440,"wires":[]},{"id":"6eea3b30.9ab0a4","type":"link out","z":"70e10602.ab07d8","name":"","links":["d0313994.934438"],"x":1655,"y":260,"wires":[]},{"id":"93438c10.8ea81","type":"link out","z":"70e10602.ab07d8","name":"","links":["d0313994.934438"],"x":1655,"y":420,"wires":[]},{"id":"68e03e8a.a67df","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":1149,"y":117,"wires":[]},{"id":"b87b5dd3.86b77","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":1173,"y":338,"wires":[]},{"id":"cd3e0302.5c1d7","type":"chatbot-inline-buttons","z":"9dc9bbf9.89db48","name":"","buttons":[{"type":"url","label":"Home Broker","url":"https://www.ativainvestimentos.com.br/Minha-Conta/Produtos/Acesso/HomeBroker/","webViewHeightRatio":"full","extensions":false,"answer":"","alert":false}],"message":"Você pode continuar pelo nosso Home Broker","x":380,"y":380,"wires":[["afc66b5c.16b0f8","a48bee73.cddd1"]]},{"id":"afc66b5c.16b0f8","type":"chatbot-facebook-send","z":"9dc9bbf9.89db48","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":570,"y":380,"wires":[]},{"id":"79d126d5.07a778","type":"subflow:9dc9bbf9.89db48","z":"a8463e25.e555b","name":"","x":1070,"y":440,"wires":[["5bd39c8e.a169b4"]]},{"id":"6848fcc2.105914","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":982,"y":2840,"wires":[]},{"id":"2f9f835.2ad8f7c","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":1115,"y":4000,"wires":[]},{"id":"efa44f9f.82269","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":1015,"y":3580,"wires":[]},{"id":"3b1139a4.fb4bf6","type":"subflow:94f329f8.499948","z":"baad02b0.36999","x":1450,"y":160,"wires":[["73886b99.6fc264"],["6f234190.936b1"]]},{"id":"bda9b4f4.2eae98","type":"subflow:94f329f8.499948","z":"baad02b0.36999","x":1170,"y":340,"wires":[["ff24ccc2.2f2d8","a9d14666.53f548"],["10b51832.59eeb8"]]},{"id":"7205703.c24309","type":"link out","z":"baad02b0.36999","name":"login","links":["c60e7832.8a2558"],"x":1755,"y":460,"wires":[]},{"id":"e670dc47.993b7","type":"chatbot-quick-replies","z":"baad02b0.36999","name":"","message":"Você pode fazer login ou ver outras opções.","buttons":[{"type":"quick-reply","label":"Login","value":"login","url":""},{"type":"quick-reply","label":"Outras opções","value":"other","url":""}],"x":1400,"y":500,"wires":[["58c8150c.9f53ec"]]},{"id":"c09bca49.5abec8","type":"chatbot-message","z":"baad02b0.36999","name":"","message":[{"message":"Para fazer o pedido de saque você precisa estar logado."}],"answer":false,"track":false,"x":1370,"y":420,"wires":[["ebe01b39.911da8","ea14c7a0.05eb98"]]},{"id":"58c8150c.9f53ec","type":"chatbot-listen","z":"baad02b0.36999","name":"","showdebug":false,"rules":["login","other","*"],"outputs":3,"x":1590,"y":500,"wires":[["7205703.c24309"],["54da33e6.8fe98c"],["c1940aeb.019b78"]]},{"id":"ebe01b39.911da8","type":"chatbot-facebook-send","z":"baad02b0.36999","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1590,"y":420,"wires":[]},{"id":"ea14c7a0.05eb98","type":"delay","z":"baad02b0.36999","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1220,"y":500,"wires":[["e670dc47.993b7"]]},{"id":"10b51832.59eeb8","type":"delay","z":"baad02b0.36999","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1220,"y":420,"wires":[["c09bca49.5abec8"]]},{"id":"54da33e6.8fe98c","type":"link out","z":"baad02b0.36999","name":"mensagem depois do video","links":["1b2a2292.66109d"],"x":1755,"y":500,"wires":[]},{"id":"c1940aeb.019b78","type":"link out","z":"baad02b0.36999","name":"api.ai","links":["d0313994.934438"],"x":1755,"y":540,"wires":[]},{"id":"ff24ccc2.2f2d8","type":"subflow:9dc9bbf9.89db48","z":"baad02b0.36999","x":1390,"y":320,"wires":[[]]},{"id":"9860f14a.0dcab","type":"link out","z":"baad02b0.36999","name":"","links":["d0313994.934438"],"x":1055,"y":400,"wires":[]},{"id":"44c95a54.e3a524","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["d0313994.934438"],"x":1175,"y":560,"wires":[]},{"id":"1d18c529.6f3d5b","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["d0313994.934438"],"x":1695,"y":740,"wires":[]},{"id":"ff8c8645.157418","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["d0313994.934438"],"x":1695,"y":860,"wires":[]},{"id":"15829da7.a07452","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":400,"y":520,"wires":[["e2513619.130d78"]]},{"id":"6dc3899f.81dc18","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1130,"y":1280,"wires":[]},{"id":"12db3b64.0b0225","type":"chatbot-inline-buttons","z":"fb7270a.0c3fe9","name":"2, 5 e 10 anos","buttons":[{"type":"postback","label":"2 Anos","value":"2","answer":"","alert":false},{"type":"postback","label":"5 Anos","value":"5","answer":"","alert":false},{"type":"postback","label":"10 Anos","value":"10","answer":"","alert":false}],"message":"Você também pode simular com outros períodos, escolha uma das opções abaixo: ","x":680,"y":1400,"wires":[["5de8e451.f1c7ec"]]},{"id":"5de8e451.f1c7ec","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":950,"y":1400,"wires":[["9ff40fee.d1dec"]]},{"id":"5a1f85fb.cf45dc","type":"function","z":"fb7270a.0c3fe9","name":"Mensgem posterior a carteira","func":"const chat              = msg.chat();\nconst valor             = chat.get('valor');\nconst aportevalor       = chat.get('aportevalor');\nconst total_rent        = flow.get('Valores_para_perfil.attributes.total_rent');\n\nconst conta = Math.round(valor *(1+ (total_rent/100)));\n\nmsg.payload = `Na carteira sugerida, seus R$${valor} iniciais se transformariam, aproximadamente, em R$${conta} em apenas um ano.`;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":720,"y":1280,"wires":[["b871c282.c4b9"]]},{"id":"b871c282.c4b9","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[],"answer":false,"track":false,"x":910,"y":1280,"wires":[["6dc3899f.81dc18","c4fdccc9.cb719"]]},{"id":"dd0322f9.fbd4e","type":"function","z":"fb7270a.0c3fe9","name":"rent_sobre_poupanca","func":"const total_rent = flow.get('Valores_para_perfil.attributes.total_rent');\n\nconst rent_sobre_poupanca = Math.round((1-(total_rent/7.94))*(-100));\n\nmsg.payload = `Rendendo ${rent_sobre_poupanca}% a mais que a poupança.`;\n\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":1340,"wires":[["7213b464.ee75dc"]]},{"id":"7213b464.ee75dc","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[],"answer":false,"track":false,"x":910,"y":1340,"wires":[["fbf2a8a5.2179f8","b1c3b7b8.7d2938"]]},{"id":"fbf2a8a5.2179f8","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1130,"y":1340,"wires":[]},{"id":"69e5a5ba.16cf1c","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":850,"y":1740,"wires":[["3f6001a6.fefd9e"]]},{"id":"986f9b55.f37b98","type":"chatbot-inline-buttons","z":"fb7270a.0c3fe9","name":"","buttons":[{"type":"url","label":"Abrir conta","url":"https://www.ativainvestimentos.com.br/Cadastro/PessoaFisica/Novo/DadosIniciais","webViewHeightRatio":"full","extensions":false,"answer":"","alert":false},{"type":"postback","label":"Menu Inicial","value":"inicial","answer":"","alert":false}],"message":"Gostou do que viu ? Então abra sua conta e veja mais opções que podemos te oferecer. ","x":640,"y":1740,"wires":[["69e5a5ba.16cf1c"]]},{"id":"47e991c9.a54e9","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["1b2a2292.66109d"],"x":1155,"y":1740,"wires":[]},{"id":"1f32f4e6.26545b","type":"comment","z":"fb7270a.0c3fe9","name":"Simula Casteira de investimento ","info":"","x":430,"y":1240,"wires":[]},{"id":"8e04ae9b.c9b0b","type":"link in","z":"fb7270a.0c3fe9","name":"Mock carrossel carteira recomendada","links":["7bfe80fe.93de6"],"x":1615,"y":1880,"wires":[["465b6f67.9a4da"]]},{"id":"b1c3b7b8.7d2938","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1400,"wires":[["12db3b64.0b0225"]]},{"id":"c4fdccc9.cb719","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1340,"wires":[["dd0322f9.fbd4e"]]},{"id":"57ace219.ad9fac","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":1740,"wires":[["986f9b55.f37b98"]]},{"id":"2c8eb941.67add6","type":"comment","z":"fb7270a.0c3fe9","name":"Imagem carteira sugerida","info":"","x":1710,"y":1820,"wires":[]},{"id":"36a87444.f05a6c","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":2490,"y":1500,"wires":[["dbc58c9b.17fc3"]]},{"id":"7688f0e5.8b7bd","type":"http request","z":"fb7270a.0c3fe9","name":"carteira 8","method":"GET","ret":"bin","url":"http://i.imgur.com/zCMTWvB.png","tls":"","x":2240,"y":2240,"wires":[["8eac190a.f5a878"]]},{"id":"cb9a3696.f762e8","type":"http request","z":"fb7270a.0c3fe9","name":"carteira 7","method":"GET","ret":"bin","url":"http://i.imgur.com/vdoXfBT.png","tls":"","x":2240,"y":2140,"wires":[["e904e3ea.163be"]]},{"id":"c219f5aa.1ae7a8","type":"http request","z":"fb7270a.0c3fe9","name":"carteira 9","method":"GET","ret":"bin","url":"http://i.imgur.com/6HUlQcw.png","tls":"","x":2240,"y":2340,"wires":[["4d3b32b4.1d5a6c"]]},{"id":"3f23e95c.15b9d6","type":"http request","z":"fb7270a.0c3fe9","name":"carteira 6","method":"GET","ret":"bin","url":"http://i.imgur.com/h8DX13T.png","tls":"","x":2240,"y":2040,"wires":[["ff067724.1d8d78"]]},{"id":"fbeae6fb.fb08c8","type":"http request","z":"fb7270a.0c3fe9","name":"carteira 4","method":"GET","ret":"bin","url":"http://i.imgur.com/wOeicZY.png","tls":"","x":2240,"y":1840,"wires":[["8fdf2752.b7e698"]]},{"id":"85d84477.307228","type":"http request","z":"fb7270a.0c3fe9","name":"carteira 5","method":"GET","ret":"bin","url":"http://i.imgur.com/vQqY96k.png","tls":"","x":2240,"y":1940,"wires":[["1bd19968.012c77"]]},{"id":"5736a06d.244ea","type":"http request","z":"fb7270a.0c3fe9","name":"carteira 3","method":"GET","ret":"bin","url":"http://i.imgur.com/C6q8bGI.png","tls":"","x":2240,"y":1720,"wires":[["21ac3aff.84f9b6"]]},{"id":"30e1c5c5.3262aa","type":"http request","z":"fb7270a.0c3fe9","name":"carteira 2","method":"GET","ret":"bin","url":"http://i.imgur.com/2R8jMOS.png","tls":"","x":2240,"y":1620,"wires":[["25716cfb.fa5bb4"]]},{"id":"e42bd1f0.03514","type":"function","z":"fb7270a.0c3fe9","name":"Filtra Valor","func":"const chat = msg.chat();\nconst valor = chat.get('valor');\n\nif(valor > 50000){\n    return [msg,null,null];\n}else if (valor <= 50000 && valor >=10000 ){\n    return [null,msg,null];\n}else{\n    return [null,null,msg];\n}\nreturn msg;","outputs":"3","noerr":0,"x":1950,"y":1820,"wires":[["cb9a3696.f762e8"],["fbeae6fb.fb08c8"],["1f7b1a80.247a96"]]},{"id":"465b6f67.9a4da","type":"function","z":"fb7270a.0c3fe9","name":"Filtra Perfil","func":"const chat = msg.chat();\n//let perfil = 'conservador';\n\nlet perfil = chat.get('perfil');\n\n    if (perfil === 'conservador'){\n        return [msg,null,null];\n    }else if (perfil === 'moderado'){\n        return [null,msg,null];\n    } else if (perfil === 'agressivo'){\n        return [null,null,msg];\n    } else{\n        perfil = 'conservador';\n    }\n        \n\n\n","outputs":"3","noerr":0,"x":1750,"y":1880,"wires":[["e42bd1f0.03514"],["e5195501.d6f9b8"],["8a3770aa.a093"]]},{"id":"e5195501.d6f9b8","type":"function","z":"fb7270a.0c3fe9","name":"Filtra Valor","func":"const chat = msg.chat();\nconst valor = chat.get('valor');\n\nif(valor > 50000){\n    return [msg,null,null];\n}else if (valor <= 50000 && valor >=10000 ){\n    return [null,msg,null];\n}else{\n    return [null,null,msg];\n}\nreturn msg;","outputs":"3","noerr":0,"x":1950,"y":1880,"wires":[["7688f0e5.8b7bd"],["85d84477.307228"],["30e1c5c5.3262aa"]]},{"id":"8a3770aa.a093","type":"function","z":"fb7270a.0c3fe9","name":"Filtra Valor","func":"const chat = msg.chat();\nconst valor = chat.get('valor');\n\nif(valor > 50000){\n    return [msg,null,null];\n}else if (valor <= 50000 && valor >=10000 ){\n    return [null,msg,null];\n}else{\n    return [null,null,msg];\n}\nreturn msg;","outputs":"3","noerr":0,"x":1950,"y":1940,"wires":[["c219f5aa.1ae7a8"],["3f23e95c.15b9d6"],["5736a06d.244ea"]]},{"id":"25716cfb.fa5bb4","type":"chatbot-image","z":"fb7270a.0c3fe9","name":"","filename":"","image":"","caption":"","x":2390,"y":1620,"wires":[["c68463fa.189b7","9585b674.0757f8"]]},{"id":"21ac3aff.84f9b6","type":"chatbot-image","z":"fb7270a.0c3fe9","name":"","filename":"","caption":"","x":2390,"y":1720,"wires":[["1507cacb.51bdb5","589b3870.cb3b78"]]},{"id":"8fdf2752.b7e698","type":"chatbot-image","z":"fb7270a.0c3fe9","name":"","filename":"","caption":"","x":2390,"y":1840,"wires":[["63e7a436.67468c","9047dd02.4d6a2"]]},{"id":"1bd19968.012c77","type":"chatbot-image","z":"fb7270a.0c3fe9","name":"","filename":"","caption":"","x":2390,"y":1940,"wires":[["1a485de0.5eeef2","cb25b63.d534e48"]]},{"id":"ff067724.1d8d78","type":"chatbot-image","z":"fb7270a.0c3fe9","name":"","filename":"","image":"","caption":"","x":2390,"y":2040,"wires":[["29499909.d24836","23008f65.2b442"]]},{"id":"e904e3ea.163be","type":"chatbot-image","z":"fb7270a.0c3fe9","name":"","filename":"","caption":"","x":2390,"y":2140,"wires":[["11933dee.afa7e2","65ab1e50.f36cd"]]},{"id":"8eac190a.f5a878","type":"chatbot-image","z":"fb7270a.0c3fe9","name":"","filename":"","caption":"","x":2390,"y":2240,"wires":[["c08fdbaa.6a54c8","d47f5309.6f4aa"]]},{"id":"4d3b32b4.1d5a6c","type":"chatbot-image","z":"fb7270a.0c3fe9","name":"","filename":"","caption":"","x":2390,"y":2340,"wires":[["af02a5f7.1f6928","867bc57a.657018"]]},{"id":"c68463fa.189b7","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2570,"y":1660,"wires":[]},{"id":"1507cacb.51bdb5","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2570,"y":1780,"wires":[]},{"id":"63e7a436.67468c","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2570,"y":1880,"wires":[]},{"id":"1a485de0.5eeef2","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2570,"y":1980,"wires":[]},{"id":"29499909.d24836","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2570,"y":2080,"wires":[]},{"id":"11933dee.afa7e2","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2570,"y":2180,"wires":[]},{"id":"c08fdbaa.6a54c8","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2570,"y":2280,"wires":[]},{"id":"af02a5f7.1f6928","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2570,"y":2380,"wires":[]},{"id":"be0eb1a1.44e","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3055,"y":1560,"wires":[]},{"id":"cb330d77.70d98","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3075,"y":1660,"wires":[]},{"id":"afe6e544.55e038","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3075,"y":1780,"wires":[]},{"id":"b96ce424.5036f8","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3075,"y":1880,"wires":[]},{"id":"5a0baf21.bf042","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3075,"y":1980,"wires":[]},{"id":"ad2fe823.1014f8","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3075,"y":2080,"wires":[]},{"id":"2f0896c.8f20c6a","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3075,"y":2180,"wires":[]},{"id":"ec606e39.f3613","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3075,"y":2280,"wires":[]},{"id":"92a11a71.8e9b38","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["78e8f516.6857ec","541c3755.6b6378"],"x":3075,"y":2380,"wires":[]},{"id":"16e824e1.90235b","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Para você que não quer se expor à muitos riscos e tem um perfil mais conservador, sugiro essa carteira mais segura."}],"answer":false,"track":false,"x":2910,"y":1500,"wires":[["bc9cc387.3c5a3","197f4397.b036ac"]]},{"id":"dbc58c9b.17fc3","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1500,"wires":[["16e824e1.90235b"]]},{"id":"57e3b22d.8a470c","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"O rendimento bruto esperado por ano é de 10,6%... Rende 36% a mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":1560,"wires":[["197f4397.b036ac","be0eb1a1.44e"]]},{"id":"bc9cc387.3c5a3","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1560,"wires":[["57e3b22d.8a470c"]]},{"id":"197f4397.b036ac","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3130,"y":1500,"wires":[]},{"id":"8a6b49a5.a33d48","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Como você tem um perfil um pouco mais equilibrado, querendo auferir lucros maiores sem correr tanto risco, montei uma carteira mais moderada: nem tão conservador, nem tão arrojado..."}],"answer":false,"track":false,"x":2910,"y":1620,"wires":[["ab45066b.944978","d68c52f5.bf86"]]},{"id":"9585b674.0757f8","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1620,"wires":[["8a6b49a5.a33d48"]]},{"id":"7c5e2131.f14c9","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"O rendimento bruto esperado nessa carteira é de 12,5% anual, equivalente a 50% a mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":1660,"wires":[["d68c52f5.bf86","cb330d77.70d98"]]},{"id":"ab45066b.944978","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1660,"wires":[["7c5e2131.f14c9"]]},{"id":"d68c52f5.bf86","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3150,"y":1620,"wires":[]},{"id":"773848e8.f2f7d8","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Você gosta de correr um certo risco para auferir lucros maiores, certo? Pensando nisso, montei uma carteira mais arrojada!"}],"answer":false,"track":false,"x":2910,"y":1720,"wires":[["caab1b5.2623fe8","aa842e45.a97a6"]]},{"id":"589b3870.cb3b78","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1720,"wires":[["773848e8.f2f7d8"]]},{"id":"65d144d3.a87eac","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Esperamos render, aproximadamente, 13,75% ao ano com essa carteira, equivalente a 74% mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":1780,"wires":[["aa842e45.a97a6","afe6e544.55e038"]]},{"id":"aa842e45.a97a6","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3150,"y":1720,"wires":[]},{"id":"caab1b5.2623fe8","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1780,"wires":[["65d144d3.a87eac"]]},{"id":"4d25c65e.ab4ab8","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Como você tem um perfil um pouco mais equilibrado, querendo auferir lucros maiores sem correr tanto risco, montei uma carteira mais moderada: nem tão conservador, nem tão arrojado..."}],"answer":false,"track":false,"x":2910,"y":1940,"wires":[["c5e91d3a.b97c1","361450d6.e3256"]]},{"id":"cb25b63.d534e48","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1940,"wires":[["4d25c65e.ab4ab8"]]},{"id":"da1b0861.d1afd8","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"O rendimento bruto esperado nessa carteira é de quase 12% anual, equivalente a 46% a mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":1980,"wires":[["361450d6.e3256","5a0baf21.bf042"]]},{"id":"361450d6.e3256","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3150,"y":1940,"wires":[]},{"id":"c5e91d3a.b97c1","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1980,"wires":[["da1b0861.d1afd8"]]},{"id":"d1dc148d.d54048","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Para você que não quer se expor à muitos riscos e tem um perfil mais conservador, sugiro essa carteira segura."}],"answer":false,"track":false,"x":2910,"y":1840,"wires":[["75f63136.28634","b21d145e.3cbb68"]]},{"id":"9047dd02.4d6a2","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1840,"wires":[["d1dc148d.d54048"]]},{"id":"d6752807.8412a8","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"O rendimento bruto esperado por ano é de 10,8%... Rende 38% a mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":1880,"wires":[["b21d145e.3cbb68","b96ce424.5036f8"]]},{"id":"b21d145e.3cbb68","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3150,"y":1840,"wires":[]},{"id":"75f63136.28634","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":1880,"wires":[["d6752807.8412a8"]]},{"id":"eee4486a.0c62e8","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Você gosta de correr um certo risco para auferir lucros maiores, certo? Pensando nisso, montei uma carteira mais arrojada!"}],"answer":false,"track":false,"x":2910,"y":2040,"wires":[["6148ab8f.ea6d14","3ad26257.4d0ece"]]},{"id":"23008f65.2b442","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":2040,"wires":[["eee4486a.0c62e8"]]},{"id":"914165b7.d02758","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Esperamos render, aproximadamente, 12,45% ao ano com essa carteira, equivalente a 50% mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":2080,"wires":[["3ad26257.4d0ece","ad2fe823.1014f8"]]},{"id":"3ad26257.4d0ece","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3150,"y":2040,"wires":[]},{"id":"6148ab8f.ea6d14","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":2080,"wires":[["914165b7.d02758"]]},{"id":"9e22e50f.7cca18","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Para você que não quer se expor à muitos riscos e tem um perfil mais conservador, sugiro essa carteira mais segura."}],"answer":false,"track":false,"x":2910,"y":2140,"wires":[["34a62dd9.135d82","9aafa780.786c08"]]},{"id":"65ab1e50.f36cd","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":2140,"wires":[["9e22e50f.7cca18"]]},{"id":"4155470e.45bc58","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"O rendimento bruto esperado por ano é de 10,6%... Rende 36% a mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":2180,"wires":[["9aafa780.786c08","2f0896c.8f20c6a"]]},{"id":"9aafa780.786c08","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3150,"y":2140,"wires":[]},{"id":"34a62dd9.135d82","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":2180,"wires":[["4155470e.45bc58"]]},{"id":"88fd835a.edb75","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Como você tem um perfil um pouco mais equilibrado, querendo auferir lucros maiores sem correr tanto risco, montei uma carteira mais moderada: nem tão conservador, nem tão arrojado..."}],"answer":false,"track":false,"x":2910,"y":2240,"wires":[["c7eee132.cc67","6cdd955f.3903cc"]]},{"id":"d47f5309.6f4aa","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":2240,"wires":[["88fd835a.edb75"]]},{"id":"49512e07.d1b65","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"O rendimento bruto esperado nessa carteira é de quase 12% anual, equivalente a 50% a mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":2280,"wires":[["6cdd955f.3903cc","ec606e39.f3613"]]},{"id":"6cdd955f.3903cc","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3150,"y":2240,"wires":[]},{"id":"c7eee132.cc67","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":2280,"wires":[["49512e07.d1b65"]]},{"id":"8cbb4265.855b","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Você gosta de correr um certo risco para auferir lucros maiores, certo? Pensando nisso, montei uma carteira mais arrojada!"}],"answer":false,"track":false,"x":2910,"y":2340,"wires":[["e883f95f.991058","9b875bba.553358"]]},{"id":"867bc57a.657018","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":2340,"wires":[["8cbb4265.855b"]]},{"id":"4742ec99.cd5804","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[{"message":"Esperamos render, aproximadamente, 12,45% ao ano com essa carteira, equivalente a 50% mais que a poupança!"}],"answer":false,"track":false,"x":2910,"y":2380,"wires":[["9b875bba.553358","92a11a71.8e9b38"]]},{"id":"9b875bba.553358","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":3150,"y":2340,"wires":[]},{"id":"e883f95f.991058","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2760,"y":2380,"wires":[["4742ec99.cd5804"]]},{"id":"541c3755.6b6378","type":"link in","z":"fb7270a.0c3fe9","name":"simula carteira em um ano","links":["2f0896c.8f20c6a","92a11a71.8e9b38","ec606e39.f3613","be0eb1a1.44e","cb330d77.70d98","b96ce424.5036f8","5a0baf21.bf042","afe6e544.55e038","ad2fe823.1014f8"],"x":315,"y":1280,"wires":[["83ccdb69.4858d8"]]},{"id":"29747e8a.c31522","type":"function","z":"fb7270a.0c3fe9","name":"Simular opções de anos","func":"const chat          = msg.chat();\nconst anos          = msg.payload.content;\nconst valor         = chat.get('valor');\nconst total_rent    = flow.get('Valores_para_perfil.attributes.total_rent');\n\n\nconst conta         = valor * Math.pow((1+ (total_rent/100)), anos);\n\n\nmsg.payload = `Nesse período de ${anos} anos, a carteira sugerida, o valor inicial se transformariam, aproximadamente, em R$${(conta).toFixed(2)}.`;\n//msg.payload = {anos,valor,total_rent}\n\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":1660,"wires":[["3259afaf.6b86a"]]},{"id":"83ccdb69.4858d8","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1280,"wires":[["5a1f85fb.cf45dc"]]},{"id":"1f7b1a80.247a96","type":"chatbot-generic-template","z":"fb7270a.0c3fe9","name":"","title":"Carteira recomendada","subtitle":"","imageUrl":"http://i.imgur.com/Wiwwc3Q.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Detalhes","value":"details","alert":false}],"x":2270,"y":1500,"wires":[["36a87444.f05a6c"]]},{"id":"cd566393.d295b","type":"chatbot-quick-replies","z":"fb7270a.0c3fe9","name":"","message":"Você também pode simular com outros perfis","buttons":[{"type":"quick-reply","label":"Outros perfis","value":"other","url":""},{"type":"quick-reply","label":"Abrir conta","value":"open","url":""},{"type":"quick-reply","label":"Menu inicial","value":"inicial","url":""}],"x":680,"y":1460,"wires":[["e58e8440.9e82f8"]]},{"id":"9ff40fee.d1dec","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":480,"y":1460,"wires":[["cd566393.d295b"]]},{"id":"c666e1ab.0773a","type":"chatbot-listen","z":"fb7270a.0c3fe9","name":"","showdebug":false,"rules":["other","number","open","inicial","*"],"outputs":5,"x":1170,"y":1460,"wires":[["6ddf269a.461ca8"],["bca0a25c.bb869"],["4d844ee9.aec3d"],["d4237d84.8c53a"],["7a2d15d7.bc67ec"]]},{"id":"6ddf269a.461ca8","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["405aaa85.15ba84"],"x":1385,"y":1380,"wires":[]},{"id":"7a2d15d7.bc67ec","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["bd9f19ba.7158d8"],"x":1385,"y":1540,"wires":[]},{"id":"3259afaf.6b86a","type":"chatbot-message","z":"fb7270a.0c3fe9","name":"","message":[],"answer":false,"track":false,"x":750,"y":1660,"wires":[["a7f9e6f1.005c38","57ace219.ad9fac"]]},{"id":"4d844ee9.aec3d","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["246c6239.1dcc1e"],"x":1385,"y":1460,"wires":[]},{"id":"d4237d84.8c53a","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["6cecd582.fc79ac"],"x":1385,"y":1500,"wires":[]},{"id":"e58e8440.9e82f8","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":950,"y":1460,"wires":[["c666e1ab.0773a"]]},{"id":"a7f9e6f1.005c38","type":"chatbot-facebook-send","z":"fb7270a.0c3fe9","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":950,"y":1660,"wires":[]},{"id":"b24382a7.f89c7","type":"link in","z":"fb7270a.0c3fe9","name":"Simula carteira ceomendada em anos","links":["bca0a25c.bb869"],"x":315,"y":1660,"wires":[["29747e8a.c31522"]]},{"id":"bca0a25c.bb869","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["b24382a7.f89c7"],"x":1385,"y":1420,"wires":[]},{"id":"3f6001a6.fefd9e","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1740,"wires":[["47e991c9.a54e9"]]},{"id":"84ae75f3.3c0fa8","type":"chatbot-generic-template","z":"fb7270a.0c3fe9","name":"Seguro","title":"Seguro","subtitle":"Aumentar meu patrimônio com o menor risco possí­vel.","imageUrl":"https://s3.amazonaws.com/ativa-host1/perfis/Proteção1.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Selecionar","value":"conservador","alert":false}],"x":400,"y":300,"wires":[["3236fe11.bb0432"]]},{"id":"3236fe11.bb0432","type":"chatbot-generic-template","z":"fb7270a.0c3fe9","name":"Arrojado","title":"Arrojado","subtitle":"Maximizar meus ganhos, aceitando eventuais perdas.","imageUrl":"https://s3.amazonaws.com/ativa-host1/perfis/Agressivo.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Selecionar","value":"agressivo","alert":false}],"x":540,"y":300,"wires":[["436bfb30.c95634"]]},{"id":"436bfb30.c95634","type":"chatbot-generic-template","z":"fb7270a.0c3fe9","name":"Planejado","title":"Planejado","subtitle":"Garantir uma renda no futuro.","imageUrl":"https://s3.amazonaws.com/ativa-host1/perfis/Garantia.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Selecionar","value":"moderado","alert":false}],"x":680,"y":300,"wires":[["5346a485.5dea0c"]]},{"id":"5346a485.5dea0c","type":"chatbot-generic-template","z":"fb7270a.0c3fe9","name":"Protegido","title":"Protegido","subtitle":"Rendimentos superiores à inflação, sem risco envolvido.","imageUrl":"https://s3.amazonaws.com/ativa-host1/perfis/Conservador.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Selecionar","value":"conservador","alert":false}],"x":820,"y":300,"wires":[["dffd770f.7b0ef8"]]},{"id":"dffd770f.7b0ef8","type":"chatbot-generic-template","z":"fb7270a.0c3fe9","name":"Equilibrado","title":"Equilibrado","subtitle":"Equilí­brio, aceitando um certo risco-retorno.","imageUrl":"https://s3.amazonaws.com/ativa-host1/perfis/Equilibrado.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Selecionar","value":"conservador","alert":false}],"x":970,"y":300,"wires":[["484dff88.e1b0d"]]},{"id":"484dff88.e1b0d","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":400,"y":400,"wires":[["528f521b.8bca7c"]]},{"id":"81e09454.7f4ca8","type":"subflow:fb3356c4.1da0f8","z":"495bc4b0.0f837c","name":"","x":1310,"y":440,"wires":[["bf58a906.fa4bc8"]]},{"id":"bf58a906.fa4bc8","type":"link out","z":"495bc4b0.0f837c","name":"","links":["1b2a2292.66109d"],"x":1435,"y":440,"wires":[]},{"id":"2c06201b.4a7aa","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["b8dadb34.3a5bc8"],"x":1155,"y":1100,"wires":[]},{"id":"612f731.e91ee8c","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["b8dadb34.3a5bc8"],"x":1335,"y":2080,"wires":[]},{"id":"a48bee73.cddd1","type":"delay","z":"9dc9bbf9.89db48","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":320,"wires":[[]]},{"id":"5bd39c8e.a169b4","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":1195,"y":440,"wires":[]},{"id":"162faea5.7ceaa1","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":1375,"y":3560,"wires":[]},{"id":"1fba53a9.84072c","type":"http request","z":"3e11eb34.344f14","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/consolided_position/0","tls":"","x":910,"y":3300,"wires":[["b194dfe.e264a2"]]},{"id":"b194dfe.e264a2","type":"function","z":"3e11eb34.344f14","name":"API Obtem Saldo","func":"if(msg.payload.data){\n    const user_id           = msg.payload.data.attributes.id;\n    const total_balance     = msg.payload.data.attributes.total_balance;\n    \n    flow.set(\"user_id\",user_id);\n    \n    msg.payload = {total_balance,user_id};\n    return [msg,null];\n    \n}else{\n    msg.payload = \"Não consegui consultar seu saldo.\";\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":1110,"y":3300,"wires":[["6ac5679d.003c98"],["4f09e6c2.60cf78"]]},{"id":"544216ec.597968","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Beleza! Agora vou enviar seu pedido para o TD"}],"answer":false,"track":false,"x":1530,"y":3840,"wires":[["7206e411.b3f54c","e25e093f.268dd8"]]},{"id":"7206e411.b3f54c","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1720,"y":3840,"wires":[]},{"id":"76803635.e83b88","type":"function","z":"3e11eb34.344f14","name":"Resuldado Compra","func":"if(msg.payload.code_error === \"0\"){\n    msg.payload = `Título comprado com sucesso!`;\n    return [msg,null];\n}else{\n    const error = msg.payload.description;\n    msg.payload = `Não consegui comprar, ${error}`;\n    return [null,msg];\n}\n","outputs":"2","noerr":0,"x":1290,"y":4420,"wires":[["68b16f40.bfab2"],["498acbcc.890a74"]]},{"id":"68b16f40.bfab2","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":1470,"y":4380,"wires":[["7cc53910.ff9528","362f4223.cbf19e"]]},{"id":"7cc53910.ff9528","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1650,"y":4380,"wires":[]},{"id":"56c6dd8a.d2f0c4","type":"function","z":"3e11eb34.344f14","name":"prepara payload","func":"const code_title    = flow.get('codigo_td');\nconst qty           = JSON.stringify(flow.get('qtd_efetiva'));\n\nmsg.payload = {\"code_title\": code_title,\"qty\": qty };\n\nreturn msg;","outputs":"1","noerr":0,"x":900,"y":4420,"wires":[["276268f1.7a16a8"]]},{"id":"e6b28203.ad2cc","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1660,"y":4600,"wires":[["1b95b6c1.825fc9"]]},{"id":"276268f1.7a16a8","type":"http request","z":"3e11eb34.344f14","name":"","method":"POST","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/fixedIncomes/public_titles/buy","tls":"","x":1090,"y":4420,"wires":[["76803635.e83b88","9d0721f7.17f63"]]},{"id":"1b95b6c1.825fc9","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["1b2a2292.66109d"],"x":1775,"y":4600,"wires":[]},{"id":"498acbcc.890a74","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":1470,"y":4460,"wires":[["b2fb0cea.ff4c9","e6b28203.ad2cc"]]},{"id":"b2fb0cea.ff4c9","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1650,"y":4460,"wires":[]},{"id":"606313ec.cdd3dc","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":1495,"y":3920,"wires":[]},{"id":"b023c1eb.6e2ce","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Carteira Recomendada","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/iconografia/logo-ativa.jpg","sharable":true,"topElementStyle":"large","buttons":[{"type":"url","label":"Arquivo","url":"https://www.ativainvestimentos.com.br/Documentos/Research/Relatorios/Mensal_31_07.pdf","webViewHeightRatio":"full","extensions":false,"alert":false}],"x":1610,"y":100,"wires":[["9321b46c.b0c858"]]},{"id":"9321b46c.b0c858","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Carteira Recomendada","subtitle":"","imageUrl":"https://pbs.twimg.com/profile_images/833695659249242113/fpuIhBJj.jpg","sharable":true,"topElementStyle":"large","buttons":[{"type":"url","label":"Arquivo","url":"https://www.ativainvestimentos.com.br/Documentos/Research/Relatorios/Mensal_31_07.pdf","webViewHeightRatio":"full","extensions":false,"alert":false}],"x":1610,"y":140,"wires":[["a55d9488.fcdda8"]]},{"id":"a55d9488.fcdda8","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Carteira Recomendada","subtitle":"","imageUrl":"https://pbs.twimg.com/profile_images/833695659249242113/fpuIhBJj.jpg","sharable":true,"topElementStyle":"large","buttons":[{"type":"url","label":"Arquivo","url":"https://www.ativainvestimentos.com.br/Documentos/Research/Relatorios/Carteira%20FIIs_31-07-2017%20--.pdf","webViewHeightRatio":"full","extensions":false,"alert":false}],"x":1610,"y":180,"wires":[["6675f574.f2bbac","9f42c07b.2632d"]]},{"id":"6675f574.f2bbac","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1630,"y":220,"wires":[]},{"id":"6e4a891.c9daf78","type":"link in","z":"c0875af8.7cf1d8","name":"API.ai","links":[],"x":335,"y":560,"wires":[["4ef4db96.aaea64"]]},{"id":"d57e8dab.8f054","type":"link in","z":"495bc4b0.0f837c","name":"Posição consolidada","links":["aa900a49.aaa118"],"x":255,"y":640,"wires":[["34c67bf6.5f5824","27f6fa3f.208fc6"]]},{"id":"a952172.ccfb9e8","type":"comment","z":"495bc4b0.0f837c","name":"Posição consolidada","info":"","x":330,"y":600,"wires":[]},{"id":"34c67bf6.5f5824","type":"chatbot-message","z":"495bc4b0.0f837c","name":"","message":[{"message":"Estou consultando suas informações..."}],"answer":false,"track":false,"x":410,"y":640,"wires":[["d4f73f99.dc21e","395f7913.c84f76"]]},{"id":"d4f73f99.dc21e","type":"chatbot-facebook-send","z":"495bc4b0.0f837c","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":630,"y":640,"wires":[]},{"id":"3fb51b42.ae6494","type":"chatbot-facebook-send","z":"495bc4b0.0f837c","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":810,"y":900,"wires":[]},{"id":"5b0aa51f.1f08ec","type":"chatbot-image","z":"495bc4b0.0f837c","name":"","filename":"","image":"/usr/src/node-red/posicao-do-cliente.png","caption":"","x":570,"y":900,"wires":[["3fb51b42.ae6494","f380c532.36d938"]]},{"id":"f1bc0d28.2b4f3","type":"http request","z":"495bc4b0.0f837c","name":"","method":"GET","ret":"bin","url":"https://s3.amazonaws.com/ativa-host1/posicao-do-cliente.png","tls":"","x":570,"y":840,"wires":[["cb33e2f9.2fe7d","3d3fd546.3d954a"]]},{"id":"4a3ebd67.756844","type":"link out","z":"495bc4b0.0f837c","name":"","links":["1b2a2292.66109d"],"x":875,"y":960,"wires":[]},{"id":"f380c532.36d938","type":"delay","z":"495bc4b0.0f837c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":760,"y":960,"wires":[["4a3ebd67.756844"]]},{"id":"3d3fd546.3d954a","type":"delay","z":"495bc4b0.0f837c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":900,"wires":[["5b0aa51f.1f08ec"]]},{"id":"cb33e2f9.2fe7d","type":"file","z":"495bc4b0.0f837c","name":"posicao-do-cliente.png","filename":"/usr/src/node-red/posicao-do-cliente.png","appendNewline":true,"createDir":false,"overwriteFile":"true","x":800,"y":840,"wires":[]},{"id":"4ba05d86.6cc674","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":995,"y":2440,"wires":[]},{"id":"95b93253.42686","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":895,"y":3260,"wires":[]},{"id":"7ba3a99f.0cfaa8","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":1055,"y":3420,"wires":[]},{"id":"7014d0e7.85818","type":"link out","z":"8a52eade.40f148","name":"","links":["d0313994.934438"],"x":1155,"y":440,"wires":[]},{"id":"b7029e81.c56f3","type":"link out","z":"8a52eade.40f148","name":"","links":["d0313994.934438"],"x":1055,"y":820,"wires":[]},{"id":"7266064a.a26108","type":"link out","z":"8a52eade.40f148","name":"","links":["1b2a2292.66109d"],"x":1055,"y":780,"wires":[]},{"id":"5cc45eb5.bb93f","type":"link out","z":"8a52eade.40f148","name":"","links":["e6f48335.ddb81"],"x":1155,"y":400,"wires":[]},{"id":"97db254d.849058","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":815,"y":1540,"wires":[]},{"id":"7190878d.56d278","type":"subflow:9dc9bbf9.89db48","z":"a8463e25.e555b","x":3190,"y":380,"wires":[["98c30884.a11218"]]},{"id":"98c30884.a11218","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":3295,"y":380,"wires":[]},{"id":"91e910ca.2a2cf","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":2495,"y":780,"wires":[]},{"id":"57fd70c3.f976a","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":2495,"y":540,"wires":[]},{"id":"4743dd02.dba674","type":"subflow:9dc9bbf9.89db48","z":"a8463e25.e555b","x":3190,"y":640,"wires":[["fee44ae1.661308"]]},{"id":"fee44ae1.661308","type":"link out","z":"a8463e25.e555b","name":"","links":[],"x":3295,"y":640,"wires":[]},{"id":"b37c8e18.bcd6d","type":"chatbot-listen","z":"495bc4b0.0f837c","name":"","showdebug":false,"rules":["invest","perfil","login","register","transfer","*"],"outputs":6,"x":1030,"y":400,"wires":[["4af36113.5e62e"],["5cef9b8e.883d64"],["698b712c.c931e"],["81e09454.7f4ca8"],["b2f1742c.bbba08"],["f3244cf4.46365"]]},{"id":"4af36113.5e62e","type":"link out","z":"495bc4b0.0f837c","name":"Output Consultar ","links":["e170d505.202298"],"x":1255,"y":320,"wires":[]},{"id":"6542ae61.afaa7","type":"link out","z":"495bc4b0.0f837c","name":"","links":["d0313994.934438"],"x":1255,"y":240,"wires":[]},{"id":"f3244cf4.46365","type":"link out","z":"495bc4b0.0f837c","name":"","links":["d0313994.934438"],"x":1255,"y":520,"wires":[]},{"id":"bb8c6fe6.c48e4","type":"link out","z":"495bc4b0.0f837c","name":"","links":["d4836b49.ab4078"],"x":1255,"y":120,"wires":[]},{"id":"b2f1742c.bbba08","type":"link out","z":"495bc4b0.0f837c","name":"Tranfer flow","links":["a2605bda.5fb868"],"x":1255,"y":480,"wires":[]},{"id":"5c122854.b7b5f8","type":"link out","z":"495bc4b0.0f837c","name":"","links":["77ee3a73.d9a994"],"x":1255,"y":160,"wires":[]},{"id":"5cef9b8e.883d64","type":"link out","z":"495bc4b0.0f837c","name":"","links":["9d724f8a.717c3"],"x":1255,"y":360,"wires":[]},{"id":"698b712c.c931e","type":"link out","z":"495bc4b0.0f837c","name":"","links":["c60e7832.8a2558"],"x":1255,"y":400,"wires":[]},{"id":"be5c0ed5.a7a67","type":"comment","z":"a8463e25.e555b","name":"Menu Fluxo Consultar","info":"","x":280,"y":160,"wires":[]},{"id":"66b511e1.451fc","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1020,"y":920,"wires":[["3b5c8e18.ca8f62"]]},{"id":"1042a52f.e3498b","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1020,"y":1040,"wires":[["91dc5ef9.91329"]]},{"id":"2e0b94fb.08321c","type":"chatbot-message","z":"a8463e25.e555b","name":"","message":[],"answer":false,"track":false,"x":830,"y":940,"wires":[["66b511e1.451fc","ac0b8663.fec8e8"]]},{"id":"8b30c038.dbc8f","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1120,"y":1840,"wires":[["83890d69.d3d79"]]},{"id":"ca56772c.e58898","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":815,"y":1720,"wires":[]},{"id":"45d14416.e5d45c","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1120,"y":2160,"wires":[["ed27d381.a800e"]]},{"id":"3e011f83.55ce","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1120,"y":2980,"wires":[["d7299c3c.2b732"]]},{"id":"d7299c3c.2b732","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":1235,"y":2980,"wires":[]},{"id":"38b2b341.a4624c","type":"link out","z":"a8463e25.e555b","name":"","links":["d4836b49.ab4078"],"x":1080,"y":3760,"wires":[]},{"id":"89378a97.5932d8","type":"comment","z":"c0875af8.7cf1d8","name":"Inicio","info":"","x":790,"y":320,"wires":[]},{"id":"656c7735.6e03c8","type":"comment","z":"c0875af8.7cf1d8","name":"Login","info":"","x":790,"y":360,"wires":[]},{"id":"b5d1f859.631538","type":"comment","z":"c0875af8.7cf1d8","name":"Logout","info":"","x":790,"y":400,"wires":[]},{"id":"5516888d.949218","type":"comment","z":"c0875af8.7cf1d8","name":"Defalt","info":"","x":790,"y":240,"wires":[]},{"id":"632ae852.75bfc8","type":"comment","z":"c0875af8.7cf1d8","name":"Me Ajuda","info":"","x":800,"y":480,"wires":[]},{"id":"9e1bec23.ad83e","type":"subflow:fb3356c4.1da0f8","z":"c0875af8.7cf1d8","x":770,"y":520,"wires":[["18cd2a73.f29036"]]},{"id":"f86c7d7a.16f9d","type":"comment","z":"c0875af8.7cf1d8","name":"Get Started","info":"","x":810,"y":280,"wires":[]},{"id":"58e50e4.000c2f","type":"comment","z":"c0875af8.7cf1d8","name":"Simular TD","info":"","x":800,"y":440,"wires":[]},{"id":"cf722880.778758","type":"chatbot-message","z":"1e5ebc44.f4cfb4","name":"","message":[{"message":"Olá {{firstName}}, tudo bem? Falo em nome da ATIVA Investimentos, corretora independente, há mais de 30 anos no mercado ! :)"}],"answer":false,"track":false,"x":390,"y":640,"wires":[["2325960b.4e53da","3f0443a1.9b256c"]]},{"id":"2325960b.4e53da","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":570,"y":640,"wires":[]},{"id":"3f0443a1.9b256c","type":"delay","z":"1e5ebc44.f4cfb4","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":400,"y":700,"wires":[["70a3844c.f08bdc"]]},{"id":"70a3844c.f08bdc","type":"chatbot-quick-replies","z":"1e5ebc44.f4cfb4","name":"","message":"Você sabe o que uma corretora de investimentos faz?","buttons":[{"type":"quick-reply","label":"Sim","value":"yes","url":""},{"type":"quick-reply","label":"Não","value":"nope","url":""},{"type":"quick-reply","label":"Já sou Cliente","value":"client","url":""}],"x":560,"y":700,"wires":[["6f8663ac.9051bc"]]},{"id":"6f8663ac.9051bc","type":"chatbot-facebook-send","z":"1e5ebc44.f4cfb4","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":770,"y":700,"wires":[["d9e5003f.6fc11"]]},{"id":"d9e5003f.6fc11","type":"chatbot-listen","z":"1e5ebc44.f4cfb4","name":"","showdebug":false,"rules":["yes","nope","client","*"],"outputs":4,"x":990,"y":700,"wires":[["492eae0c.30a63"],["2b1b8ec.ce71e72"],["f407f71a.bdd0a8"],["892804c.d3613f8"]]},{"id":"6d88480c.27b048","type":"link in","z":"1e5ebc44.f4cfb4","name":"Mensagem Get Started","links":["60834c6b.7135f4","fd519e88.c4424"],"x":275,"y":640,"wires":[["cf722880.778758"]]},{"id":"60834c6b.7135f4","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["6d88480c.27b048"],"x":1015,"y":260,"wires":[]},{"id":"892804c.d3613f8","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["d0313994.934438"],"x":1195,"y":760,"wires":[]},{"id":"d5afd59e.eacf38","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["1b2a2292.66109d"],"x":1015,"y":300,"wires":[]},{"id":"b0260eba.3242f","type":"link in","z":"c0875af8.7cf1d8","name":"3","links":["18cd2a73.f29036"],"x":555,"y":320,"wires":[[]]},{"id":"18cd2a73.f29036","type":"link out","z":"c0875af8.7cf1d8","name":"","links":["b0260eba.3242f"],"x":895,"y":520,"wires":[]},{"id":"f1fcaf07.943b5","type":"comment","z":"1e5ebc44.f4cfb4","name":"Mensagem Get Started","info":"","x":360,"y":600,"wires":[]},{"id":"dd3ceffd.53382","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["c60e7832.8a2558"],"x":2075,"y":200,"wires":[]},{"id":"32183ac.484eac6","type":"link out","z":"1e5ebc44.f4cfb4","name":"Menu persistente Inicio","links":["f7d78465.252418"],"x":2075,"y":280,"wires":[]},{"id":"76af2d5c.123bc4","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["169cb19.ddd734e"],"x":2075,"y":240,"wires":[]},{"id":"28bba49d.dcac1c","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["7e971f53.d73f6"],"x":2075,"y":320,"wires":[]},{"id":"fd519e88.c4424","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["6d88480c.27b048"],"x":2075,"y":120,"wires":[]},{"id":"109f2f85.2a238","type":"link out","z":"1e5ebc44.f4cfb4","name":"","links":["1b2a2292.66109d"],"x":2075,"y":160,"wires":[]},{"id":"6e9dd4d5.0235bc","type":"comment","z":"1e5ebc44.f4cfb4","name":"Sabe o que é corretora","info":"","x":1000,"y":840,"wires":[]},{"id":"d25770e2.ba997","type":"comment","z":"1e5ebc44.f4cfb4","name":"Sabe o que é corretora","info":"","x":1000,"y":1200,"wires":[]},{"id":"9c812b4f.3b3cf8","type":"comment","z":"1e5ebc44.f4cfb4","name":"Video O que é corretora","info":"","x":360,"y":1620,"wires":[]},{"id":"b340a3c7.47472","type":"subflow:94f329f8.499948","z":"a8463e25.e555b","x":290,"y":500,"wires":[["c33c0940.9590e8"],["106e63d1.ab907c"]]},{"id":"106e63d1.ab907c","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":415,"y":560,"wires":[]},{"id":"6df42d27.3def24","type":"function","z":"fdb8e9c2.836b68","name":"Header x-www-form","func":"if(global.get(\"token\").length >= 200){\n    const token = global.get(\"token\");\n    msg.headers = { \"content-type\": \"application/x-www-form-urlencoded\", \"Accept\":\"application/vnd.Api+json\", \"Authorization\": `bearer ${token}`};\n    return [msg,null];\n}else{\n    msg.payload = \"Token inválido.\";\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":320,"y":160,"wires":[[],[]]},{"id":"f52834db.92a8e8","type":"subflow:fdb8e9c2.836b68","z":"3e11eb34.344f14","name":"","x":700,"y":3320,"wires":[["1fba53a9.84072c"],["afdc4959.9ec268"]]},{"id":"2f1fded4.8b48a2","type":"function","z":"a7fbe337.09148","name":"Header vnd.api+json","func":"if(global.get(\"token\").length >= 200){\n    const token = global.get(\"token\");\n    msg.headers = { \"content-type\": \"application/vnd.api+json\", \"Accept\":\"application/vnd.Api+json\", \"Authorization\": `bearer ${token}`};\n    return [msg,null];\n}else{\n    msg.payload = \"Token inválido.\";\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":320,"y":160,"wires":[[],[]]},{"id":"38f35001.8783c","type":"subflow:a7fbe337.09148","z":"a8463e25.e555b","x":300,"y":780,"wires":[["4a02b61a.020ee8"],["318cde9e.564ec2"]]},{"id":"afdc4959.9ec268","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["b8dadb34.3a5bc8"],"x":855,"y":3340,"wires":[]},{"id":"e81b9be1.a65e98","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["b8dadb34.3a5bc8"],"x":1255,"y":2760,"wires":[]},{"id":"d6f5cd3e.44303","type":"debug","z":"1e5ebc44.f4cfb4","name":"","active":true,"console":"false","complete":"true","x":560,"y":1360,"wires":[]},{"id":"bf30bd60.20743","type":"function","z":"495bc4b0.0f837c","name":"API Posição consolidada","func":"if(msg.payload.data){\n    let mensagem = '';\n    const public_securities_balance     = msg.payload.data.attributes.public_securities_balance;\n    const privat_securities_balance     = msg.payload.data.attributes.privat_securities_balance;\n    const stocks_balance                = msg.payload.data.attributes.stocks_balance;\n    const total_balance                 = msg.payload.data.attributes.total_balance;\n    mensagem += `Saldo disponível R$: ${(total_balance).toFixed(2)}`;\n    msg.payload = mensagem;\n    return [msg,null];\n}else{\n    msg.payload = \"Tente novamente.\";\n    return [null,msg];\n}\n//.toFixed(2)","outputs":"2","noerr":0,"x":930,"y":740,"wires":[["1d5f3437.87648c"],["e4a4f629.904158"]]},{"id":"82dbecca.462ce","type":"http request","z":"495bc4b0.0f837c","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/consolided_position/0","tls":"","x":676,"y":740,"wires":[["bf30bd60.20743"]]},{"id":"395f7913.c84f76","type":"subflow:fdb8e9c2.836b68","z":"495bc4b0.0f837c","x":460,"y":760,"wires":[["82dbecca.462ce"],["6b942da6.240af4"]]},{"id":"6b942da6.240af4","type":"link out","z":"495bc4b0.0f837c","name":"","links":[],"x":615,"y":780,"wires":[]},{"id":"55d7f445.7ce70c","type":"chatbot-facebook-send","z":"5fdbe0b9.637a4","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":450,"y":320,"wires":[["3e7b1e82.37b832"]]},{"id":"184fe6ee.b80ee9","type":"chatbot-quick-replies","z":"5fdbe0b9.637a4","name":"","message":"Selecione um dos bancos abaixo ou se já tiver realizado a transferência, selecione já realizei","buttons":[{"type":"quick-reply","label":"Já realizei","value":"already","url":""},{"type":"quick-reply","label":"Itaú","value":"itau","url":""},{"type":"quick-reply","label":"Bradesco","value":"bradesco","url":""},{"type":"quick-reply","label":"BM&F","value":"bmf","url":""},{"type":"quick-reply","label":"Santander","value":"santander","url":""},{"type":"quick-reply","label":"Banco do Brasil","value":"bb","url":""}],"x":260,"y":320,"wires":[["55d7f445.7ce70c"]]},{"id":"98292aae.d49988","type":"delay","z":"5fdbe0b9.637a4","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1220,"y":460,"wires":[[]]},{"id":"3e7b1e82.37b832","type":"delay","z":"5fdbe0b9.637a4","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":320,"wires":[["8b73bc26.a0057"]]},{"id":"8b73bc26.a0057","type":"chatbot-listen","z":"5fdbe0b9.637a4","name":"","showdebug":false,"rules":["bradesco","itau","bmf","santander","bb","already"],"outputs":6,"x":780,"y":320,"wires":[["2f5a85e.a105f7a"],["254218ff.b242e8"],["1289983b.929e78"],["afd2aa7d.6c4888"],["469b66a6.dc1428"],["bd1080c4.1c79a"]]},{"id":"444a5bd0.285614","type":"chatbot-message","z":"5fdbe0b9.637a4","name":"","message":[{"message":"Para agilizar o processo, envie o comprovante da operação para comprovantes@ativainvestimentos.com.br"}],"answer":false,"track":false,"x":1370,"y":340,"wires":[["2bcdabe9.7cb6d4","5deb0377.983b8c"]]},{"id":"678e47a9.342ef8","type":"chatbot-facebook-send","z":"5fdbe0b9.637a4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1570,"y":400,"wires":[]},{"id":"845b12cc.3b4f","type":"chatbot-message","z":"5fdbe0b9.637a4","name":"","message":[{"message":"O tempo médio para o saldo ficar disponível em sua conta é de 2 horas. Agora é só aguardar um pouquinho :) !"}],"answer":false,"track":false,"x":1370,"y":400,"wires":[["678e47a9.342ef8","98292aae.d49988"]]},{"id":"2bcdabe9.7cb6d4","type":"delay","z":"5fdbe0b9.637a4","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1220,"y":400,"wires":[["845b12cc.3b4f"]]},{"id":"5deb0377.983b8c","type":"chatbot-facebook-send","z":"5fdbe0b9.637a4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1570,"y":340,"wires":[]},{"id":"2f5a85e.a105f7a","type":"chatbot-message","z":"5fdbe0b9.637a4","name":"","message":[{"message":"Segue dados bancários da nossa conta no Bradesco.\nAgência: 2373-6\nConta: 421762-4\nCNPJ: 33.775.974/0001-04\nFavorecido: ATIVA Investimentos S/A Corretora de Títulos, Câmbio e Valores"}],"answer":false,"track":false,"x":1000,"y":220,"wires":[["de36e473.634768","bd1080c4.1c79a"]]},{"id":"254218ff.b242e8","type":"chatbot-message","z":"5fdbe0b9.637a4","name":"","message":[{"message":"Segue dados bancários da nossa conta no Itaú.\nAgência: 0911\nConta: 07483-9\nCNPJ: 33.775.974/0001-04\nFavorecido: ATIVA Investimentos S/A Corretora de Títulos, Câmbio e Valores"}],"answer":false,"track":false,"x":1000,"y":260,"wires":[["de36e473.634768","bd1080c4.1c79a"]]},{"id":"1289983b.929e78","type":"chatbot-message","z":"5fdbe0b9.637a4","name":"","message":[{"message":"Segue dados bancários da nossa conta no BM&F.\nAgência: 0001\nConta: 222-6\nCNPJ: 33.775.974/0001-04\nFavorecido: ATIVA Investimentos S/A Corretora de Títulos, Câmbio e Valores"}],"answer":false,"track":false,"x":1000,"y":300,"wires":[["de36e473.634768","bd1080c4.1c79a"]]},{"id":"afd2aa7d.6c4888","type":"chatbot-message","z":"5fdbe0b9.637a4","name":"","message":[{"message":"Segue dados bancários da nossa conta no Santander.\nAgência: 2050\nConta: 13000610-6\nCNPJ: 33.775.974/0001-04\nFavorecido: ATIVA Investimentos S/A Corretora de Títulos, Câmbio e Valores"}],"answer":false,"track":false,"x":1000,"y":340,"wires":[["de36e473.634768","bd1080c4.1c79a"]]},{"id":"469b66a6.dc1428","type":"chatbot-message","z":"5fdbe0b9.637a4","name":"","message":[{"message":"Segue dados bancários da nossa conta no Banco do Brasil.\nAgência: 3519-0\nConta: 118545-4\nCNPJ: 33.775.974/0001-04\nFavorecido: ATIVA Investimentos S/A Corretora de Títulos, Câmbio e Valores"}],"answer":false,"track":false,"x":1000,"y":380,"wires":[["de36e473.634768","bd1080c4.1c79a"]]},{"id":"de36e473.634768","type":"chatbot-facebook-send","z":"5fdbe0b9.637a4","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1250,"y":260,"wires":[]},{"id":"bd1080c4.1c79a","type":"delay","z":"5fdbe0b9.637a4","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1220,"y":340,"wires":[["444a5bd0.285614"]]},{"id":"af7c79a5.052f38","type":"comment","z":"5fdbe0b9.637a4","name":"Informaçao sobre envio do comprovante","info":"","x":1310,"y":300,"wires":[]},{"id":"1d5f3437.87648c","type":"chatbot-message","z":"495bc4b0.0f837c","name":"","message":[],"answer":false,"track":false,"x":1130,"y":720,"wires":[["6b66018d.10b7"]]},{"id":"6b66018d.10b7","type":"chatbot-facebook-send","z":"495bc4b0.0f837c","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1330,"y":720,"wires":[]},{"id":"e4a4f629.904158","type":"link out","z":"495bc4b0.0f837c","name":"","links":["1b2a2292.66109d"],"x":1095,"y":760,"wires":[]},{"id":"69d78a13.bfc4c4","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1760,"y":500,"wires":[["2550cf91.6d909"]]},{"id":"2550cf91.6d909","type":"chatbot-quick-replies","z":"a8463e25.e555b","name":"","message":"Não era isso que estava buscando?","buttons":[{"type":"quick-reply","label":"Menu principal","value":"other","url":""}],"x":1920,"y":500,"wires":[["30a646fb.f3945a"]]},{"id":"30a646fb.f3945a","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":2130,"y":460,"wires":[["ce3cfa68.f738b8"]]},{"id":"c0f070cd.1850c","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":2495,"y":500,"wires":[]},{"id":"d42b5c72.d7d87","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1760,"y":760,"wires":[["bfda115b.d7298"]]},{"id":"bfda115b.d7298","type":"chatbot-quick-replies","z":"a8463e25.e555b","name":"","message":"Não era isso que estava buscando?","buttons":[{"type":"quick-reply","label":"Menu principal","value":"other","url":""}],"x":1920,"y":760,"wires":[["62bcac55.9821f4"]]},{"id":"55aa2033.5e59c","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":2495,"y":740,"wires":[]},{"id":"43b15559.02c40c","type":"chatbot-listen","z":"a8463e25.e555b","name":"","showdebug":false,"rules":["buy","datails","other","*"],"outputs":4,"x":2350,"y":1020,"wires":[["73b48564.8c54cc"],["73b48564.8c54cc"],["3e4be0be.28741"],["500e9b0c.5c5d04"]]},{"id":"896aaac0.2e16e8","type":"chatbot-facebook-send","z":"a8463e25.e555b","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":2150,"y":1020,"wires":[["43b15559.02c40c"]]},{"id":"955d1f18.e5a16","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1800,"y":1060,"wires":[["3d74311f.d9506e"]]},{"id":"3d74311f.d9506e","type":"chatbot-quick-replies","z":"a8463e25.e555b","name":"","message":"Não era isso que estava buscando?","buttons":[{"type":"quick-reply","label":"Menu principal","value":"other","url":""}],"x":1960,"y":1060,"wires":[["896aaac0.2e16e8"]]},{"id":"73b48564.8c54cc","type":"subflow:9dc9bbf9.89db48","z":"a8463e25.e555b","x":2570,"y":980,"wires":[["2d18f1f7.6abcae"]]},{"id":"2d18f1f7.6abcae","type":"link out","z":"a8463e25.e555b","name":"","links":[],"x":2675,"y":980,"wires":[]},{"id":"500e9b0c.5c5d04","type":"link out","z":"a8463e25.e555b","name":"","links":["d0313994.934438"],"x":2515,"y":1060,"wires":[]},{"id":"3e4be0be.28741","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":2515,"y":1020,"wires":[]},{"id":"23956494.09d96c","type":"delay","z":"a8463e25.e555b","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1020,"y":1340,"wires":[["6d20c1b5.aebb7"]]},{"id":"318cde9e.564ec2","type":"link out","z":"a8463e25.e555b","name":"","links":["1b2a2292.66109d"],"x":435,"y":820,"wires":[]},{"id":"fea8bfc.bf4bb4","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Renda Fixa","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/iconografia/logo-ativa.jpg","sharable":true,"topElementStyle":"large","buttons":[{"type":"postback","label":"Recomendações","value":"recommend","alert":false}],"x":1610,"y":640,"wires":[["77e5babb.8d7654"]]},{"id":"77e5babb.8d7654","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Titulos Privados","subtitle":"R$ 80.000,00","imageUrl":"https://s3.amazonaws.com/ativa-host1/iconografia/titulos-privados-01x.png","sharable":true,"topElementStyle":"large","buttons":[{"type":"postback","label":"Consultar","value":"private","alert":false}],"x":1610,"y":680,"wires":[["977d6455.ec5b68"]]},{"id":"977d6455.ec5b68","type":"chatbot-list-template","z":"a8463e25.e555b","name":"","title":"Tesouro direto","subtitle":"R$ 86.486,00","imageUrl":"https://s3.amazonaws.com/ativa-host1/iconografia/titulos-publicos-01x.png","sharable":true,"topElementStyle":"large","buttons":[{"type":"postback","label":"Consultar","value":"td","alert":false}],"x":1610,"y":720,"wires":[["d42b5c72.d7d87","62bcac55.9821f4"]]},{"id":"8761e4d.4bdb618","type":"link out","z":"fb7270a.0c3fe9","name":"","links":["d0313994.934438"],"x":955,"y":120,"wires":[]},{"id":"16f3d8cd.cae237","type":"delay","z":"fb7270a.0c3fe9","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1160,"y":140,"wires":[["b05f343c.cea598"]]},{"id":"6c04d5a6.afe77c","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Banco BTG","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/CDB-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest","alert":false}],"x":790,"y":620,"wires":[["39678fd3.9eb3a"]]},{"id":"39678fd3.9eb3a","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Banco BTG","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/card-acoes-opcao-01-positivo.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest","alert":false}],"x":790,"y":660,"wires":[["f3669a5b.d1f898"]]},{"id":"f3669a5b.d1f898","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Banco BTG","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/card-acoes-opcao-02-negativo.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest","alert":false}],"x":790,"y":700,"wires":[["6e650f67.d9ba2"]]},{"id":"6e650f67.d9ba2","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Banco BTG","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/card-acoes-opcao-02-positivo.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest","alert":false}],"x":790,"y":740,"wires":[["1f6eb2fe.b4e6ed"]]},{"id":"ac2cbe63.ad8d4","type":"subflow:fdb8e9c2.836b68","z":"a8463e25.e555b","x":360,"y":4060,"wires":[["d0906e83.32bb3"],[]]},{"id":"289e64e4.0b855c","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Tesouro Prefixado com Juros Semestrais 2027 (NTNF)","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/tesouro-direto-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest 170","alert":false},{"type":"postback","label":"Simular","value":"simulate 170","alert":false}],"x":430,"y":2280,"wires":[["41ae8e83.e6d21"]]},{"id":"41ae8e83.e6d21","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Tesouro Prefixado 2023 (LTN)","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/tesouro-direto-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest 169","alert":false},{"type":"postback","label":"Simular","value":"simulate 169","alert":false}],"x":430,"y":2320,"wires":[["1de229fb.32cb76"]]},{"id":"1de229fb.32cb76","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Tesouro IPCA+ com Juros Semestrais 2050 (NTNB)","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/tesouro-direto-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest 160","alert":false},{"type":"postback","label":"Simular","value":"simulate 160","alert":false}],"x":430,"y":2360,"wires":[["ac68719c.99a3b"]]},{"id":"ac68719c.99a3b","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Tesouro IPCA+ 2035 (NTNB Princ)","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/tesouro-direto-imagem.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest 138","alert":false},{"type":"postback","label":"Simular","value":"simulate 138","alert":false}],"x":430,"y":2400,"wires":[["bbab286.1c310d8"]]},{"id":"8101682c.1573c8","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":2440,"wires":[["ad4d5ac1.5026f8"]]},{"id":"27f8d764.fca998","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["b8dadb34.3a5bc8"],"x":1255,"y":2700,"wires":[]},{"id":"1443714a.a65fbf","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["d0313994.934438"],"x":1095,"y":2460,"wires":[]},{"id":"4f09e6c2.60cf78","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":1310,"y":3320,"wires":[["83378f51.cb503","f983c169.86ad5"]]},{"id":"83378f51.cb503","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1490,"y":3320,"wires":[]},{"id":"6ac5679d.003c98","type":"link out","z":"3e11eb34.344f14","name":"","links":["ec332604.8b4158"],"x":1275,"y":3280,"wires":[]},{"id":"ec332604.8b4158","type":"link in","z":"3e11eb34.344f14","name":"TD Verifica Saldo para operação","links":["6ac5679d.003c98"],"x":275,"y":3960,"wires":[["c0df8e3.f77ed7"]]},{"id":"a2b849c3.467918","type":"comment","z":"3e11eb34.344f14","name":"TD Verifica Saldo para operação","info":"","x":390,"y":3920,"wires":[]},{"id":"93fb97cf.a5ae18","type":"link in","z":"3e11eb34.344f14","name":"TD API envio do pedido","links":["15e1a7c5.847da8"],"x":275,"y":4460,"wires":[["9e9d6df4.92301"]]},{"id":"15e1a7c5.847da8","type":"link out","z":"3e11eb34.344f14","name":"","links":["93fb97cf.a5ae18"],"x":1795,"y":3780,"wires":[]},{"id":"e25e093f.268dd8","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1700,"y":3780,"wires":[["15e1a7c5.847da8"]]},{"id":"168dcf68.bdc021","type":"comment","z":"3e11eb34.344f14","name":"TD API envio do pedido","info":"","x":360,"y":4420,"wires":[]},{"id":"78bc6475.b28c1c","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":1295,"y":4160,"wires":[]},{"id":"efa1bad6.526178","type":"function","z":"5675ea4c.327a84","name":"Header application/json","func":"if(global.get(\"token\").length >= 200){\n    const token = global.get(\"token\");\n    msg.headers = { \"content-type\": \"application/json\", \"Accept\":\"application/vnd.Api+json\", \"Authorization\": `bearer ${token}`};\n    return [msg,null];\n}else{\n    msg.payload = \"Token inválido.\";\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":330,"y":160,"wires":[[],[]]},{"id":"9e9d6df4.92301","type":"subflow:5675ea4c.327a84","z":"3e11eb34.344f14","name":"","x":650,"y":4460,"wires":[["56c6dd8a.d2f0c4"],["54bd6baf.a4c6d4"]]},{"id":"54bd6baf.a4c6d4","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":835,"y":4500,"wires":[]},{"id":"f70d6ec.c351d9","type":"chatbot-parse","z":"3e11eb34.344f14","name":"valor_simular_td","parseType":"number-integer","parseVariable":"valor_simular_td","x":1080,"y":2680,"wires":[["b6c95344.e405e"],["27f8d764.fca998"]]},{"id":"9a2853ca.49c63","type":"chatbot-parse","z":"3e11eb34.344f14","name":"valor_simular_td","parseType":"number-integer","parseVariable":"valor_simular_td","x":1200,"y":3200,"wires":[["f52834db.92a8e8"],["3dd8877c.e1da68"]]},{"id":"3dd8877c.e1da68","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["d0313994.934438"],"x":1355,"y":3220,"wires":[]},{"id":"f983c169.86ad5","type":"link out","z":"3e11eb34.344f14","name":"Options","links":["1b2a2292.66109d"],"x":1415,"y":3380,"wires":[]},{"id":"200f6352.ae79bc","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Não consegui comunicação com o Tesouro direto. Tente novamente mais tarde."}],"answer":false,"track":false,"x":1310,"y":3740,"wires":[["c9716327.a149d","caa7f0b3.d2b73"]]},{"id":"c9716327.a149d","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1510,"y":3740,"wires":[]},{"id":"caa7f0b3.d2b73","type":"link out","z":"3e11eb34.344f14","name":"Options","links":["1b2a2292.66109d"],"x":1435,"y":3700,"wires":[]},{"id":"da916638.0dea48","type":"link out","z":"3e11eb34.344f14","name":"Options","links":["1b2a2292.66109d"],"x":1155,"y":2860,"wires":[]},{"id":"5123812.960c38","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Qual o valor do investimento? (somente números)"}],"answer":false,"track":false,"x":1050,"y":2820,"wires":[["550e5c9.c23b9a4","da916638.0dea48"]]},{"id":"550e5c9.c23b9a4","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1230,"y":2820,"wires":[]},{"id":"d882d3c8.4aff2","type":"chatbot-parse","z":"3e11eb34.344f14","name":"codigo_titulo_privado","parseType":"number-integer","parseVariable":"codigo_titulo_privado","x":1420,"y":1060,"wires":[["7be23aad.b76d24"],["c93f0f50.56e4a"]]},{"id":"7be23aad.b76d24","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Qual o valor do investimento? (somente números)"}],"answer":false,"track":false,"x":1630,"y":1020,"wires":[["816e4cdc.be313"]]},{"id":"91764a1b.3cdc38","type":"chatbot-parse","z":"3e11eb34.344f14","name":"valor_investir_titulo_privado","parseType":"number-integer","parseVariable":"valor_investir_titulo_privado","x":2060,"y":1020,"wires":[["4375287c.1ed3f8"],["ac0d7091.d233e"]]},{"id":"816e4cdc.be313","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1810,"y":1020,"wires":[["91764a1b.3cdc38"]]},{"id":"871ee2c3.c38f5","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":980,"y":800,"wires":[["f96bd0e2.5ea73"]]},{"id":"f96bd0e2.5ea73","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Não era isso que estava buscando?","buttons":[{"type":"quick-reply","label":"Escolher outro produto","value":"other","url":""}],"x":1140,"y":800,"wires":[["4c635ef1.8e197"]]},{"id":"5ac7ad67.4c1ee4","type":"subflow:9dc9bbf9.89db48","z":"3e11eb34.344f14","x":1650,"y":720,"wires":[["e7928ae9.8080f8"]]},{"id":"e7928ae9.8080f8","type":"link out","z":"3e11eb34.344f14","name":"","links":["1b2a2292.66109d"],"x":1775,"y":720,"wires":[]},{"id":"a475432c.c18","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Você deve receber um email  de confirmação do Tesouro direto em até um dia útil."}],"answer":false,"track":false,"x":1630,"y":4320,"wires":[["d0ef3443.b844b8","fb18fd0.da82b"]]},{"id":"d0ef3443.b844b8","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1830,"y":4320,"wires":[]},{"id":"362f4223.cbf19e","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1480,"y":4320,"wires":[["a475432c.c18"]]},{"id":"fb18fd0.da82b","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1480,"y":4260,"wires":[["b4141a49.b1ebc8"]]},{"id":"b4141a49.b1ebc8","type":"link out","z":"3e11eb34.344f14","name":"stocks hightlights","links":["1b2a2292.66109d"],"x":1635,"y":4260,"wires":[]},{"id":"9d0721f7.17f63","type":"debug","z":"3e11eb34.344f14","name":"TD Request","active":true,"console":"false","complete":"payload","x":1130,"y":4360,"wires":[]},{"id":"f3ce95f5.4fb258","type":"chatbot-video","z":"3e11eb34.344f14","name":"","filename":"","caption":"","x":970,"y":2120,"wires":[["854bfe3.9af0b"]]},{"id":"a5559b9f.07ffb8","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"Banco BTG","subtitle":"","imageUrl":"https://s3.amazonaws.com/ativa-host1/carteiras/card-acoes-opcao-01-negativo.png","sharable":true,"aspectRatio":"horizontal","buttons":[{"type":"postback","label":"Investir","value":"invest","alert":false}],"x":790,"y":580,"wires":[[]]},{"id":"c93f0f50.56e4a","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":1575,"y":1100,"wires":[]},{"id":"3f9d39b7.864bf6","type":"http request","z":"3e11eb34.344f14","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/fixedIncomes/private_titles/code/{{payload}}","tls":"","x":630,"y":1320,"wires":[["592a5b46.794054"]]},{"id":"592a5b46.794054","type":"function","z":"3e11eb34.344f14","name":"API Renda Fixa","func":"if(msg.payload.data){\n    const type_of_product               = msg.payload.data.attributes.type_of_product;\n    const minimum_application           = msg.payload.data.attributes.minimum_application;\n    const tax_rate                      = msg.payload.data.attributes.tax_rate;\n    const price                         = msg.payload.data.attributes.price;\n    const maturity                      = msg.payload.data.attributes.maturity;\n    msg.payload = {type_of_product,minimum_application,tax_rate,price,maturity};\n    return [msg,null];\n}else{\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":826,"y":1320,"wires":[["228b3294.03024e"],["f4474ef7.ff714"]]},{"id":"47db945d.78b63c","type":"link out","z":"3e11eb34.344f14","name":"private hightlights","links":["fa4d0651.d9aa68"],"x":975,"y":1620,"wires":[]},{"id":"228b3294.03024e","type":"function","z":"3e11eb34.344f14","name":"Calcula rendimento","func":"const type_of_product               = msg.payload.type_of_product;\nconst minimum_application           = msg.payload.minimum_application;\nconst tax_rate                      = msg.payload.tax_rate/100;\nconst maturity                      = new Date(msg.payload.maturity);\nconst date_actual                   = new Date();\nconst diff_days                     = parseInt((date_actual - maturity) / (1000 * 60 * 60 * 24)); \nconst isento_ir                     = ['LCI','LCA','CRI','CRA'];\nlet porcentagem_ir                  = '';\nconst valor                         = chat.get('valor_investir_titulo_privado');\nconst rendimento_real               = 9.25 * tax_rate;\n\nconst resultado_isento = isento_ir.indexOf(type_of_product);\n\nif(valor < minimum_application){\n    msg.payload = `O valor mínimo para essa aplicação é de R$${minimum_application}.`;\n    return [msg,null];\n\n}else if(resultado_isento === 1){\n    const taxa_dia               = Math.pow(1+rendimento_real/100, 1/360);\n    const expo_taxa_dia          = Math.pow(taxa_dia, 1080);\n    const valor_rendimento       = valor * expo_taxa_dia ;\n    msg.payload = `No vencimento do título escolhido seus R$${(valor).toFixed(2)} se tornariam R$${(valor_rendimento)}, esse título é isento de Imposto e não terá dedução do lucro.`;\n    return [null,msg];\n    \n}else{\n    \n    if(diff_days <= 180){\n        porcentagem_ir = 22.5;\n    }else if(diff_days >= 181 && diff_days <= 360){\n        porcentagem_ir = 20;\n    }else if(diff_days >= 361 && diff_days <= 720){\n        porcentagem_ir = 17.5;\n    }else if(diff_days >= 721){\n        porcentagem_ir = 15;\n    }\n\n    const taxa_dia               = Math.pow(1+rendimento_real/100, 1/360);\n    const expo_taxa_dia          = Math.pow(taxa_dia, 1080);\n    const valor_rendimento       = valor * expo_taxa_dia ;\n    const valor_lucro            = valor_rendimento - valor;\n    const valor_imposto          = valor_lucro * (porcentagem_ir/100);\n    const valor_liquido          = valor_rendimento - valor_imposto;\n    msg.payload = `No vencimento do título escolhido seus R$${(valor).toFixed(2)} se tornariam R$${(valor_rendimento).toFixed(2)}, Na hora do saque, teria incidência de IR de ${(porcentagem_ir).toFixed(2)}% em cima do valor do lucro. Nesse caso, o IR é R$${(valor_imposto).toFixed(2)} e o valor líquido seria R$${(valor_liquido).toFixed(2)}`;\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":1046,"y":1300,"wires":[["dff5125b.a2ef1"],["c054e1af.a2bfe"]]},{"id":"c054e1af.a2bfe","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":1250,"y":1320,"wires":[["6e6a8563.1c019c","7a0460d7.5dbb7"]]},{"id":"6e6a8563.1c019c","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1400,"y":1380,"wires":[["4d6d5d7a.57cf04"]]},{"id":"a9ad1a13.007088","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Para continuar escolha uma das opções abaixo","buttons":[{"type":"quick-reply","label":"Investir","value":"invest","url":""},{"type":"quick-reply","label":"Refazer operação","value":"again","url":""},{"type":"quick-reply","label":"Outras opções","value":"other","url":""}],"x":436,"y":1640,"wires":[["e3b667c6.9b7cc8"]]},{"id":"b713350b.7d3828","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["invest","again","other","*"],"outputs":4,"x":816,"y":1640,"wires":[["85e20b63.7a3c88"],["47db945d.78b63c"],["8c6719e5.510308"],["41fb21ab.14d95"]]},{"id":"41fb21ab.14d95","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":975,"y":1700,"wires":[]},{"id":"e79b1040.fb082","type":"http request","z":"3e11eb34.344f14","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/consolided_position/0","tls":"","x":1446,"y":1520,"wires":[["62390d7a.7bff34"]]},{"id":"62390d7a.7bff34","type":"function","z":"3e11eb34.344f14","name":"API Obtem Saldo","func":"if(msg.payload.data){\n    const chat                          = msg.chat();\n    const total_balance                 = msg.payload.data.attributes.total_balance;\n    const valor_investir_titulo_privado = get.chat('valor_investir_titulo_privado');\n    \n    msg.payload = total_balance;\n    return [msg,null];\n}else{\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":1646,"y":1520,"wires":[["1e87c146.4dc12f"],["431d321e.62dbbc"]]},{"id":"8c6719e5.510308","type":"link out","z":"3e11eb34.344f14","name":"","links":["b8dadb34.3a5bc8"],"x":975,"y":1660,"wires":[]},{"id":"dff5125b.a2ef1","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":1250,"y":1280,"wires":[["3c526f9d.8a5dc"]]},{"id":"d6090afa.109b68","type":"link out","z":"3e11eb34.344f14","name":"private hightlights","links":["fa4d0651.d9aa68"],"x":1955,"y":1240,"wires":[]},{"id":"3c526f9d.8a5dc","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Para continuar escolha uma das opções abaixo.","buttons":[{"type":"quick-reply","label":"Refazer operação","value":"again","url":""},{"type":"quick-reply","label":"Outras opções","value":"other","url":""}],"x":1420,"y":1280,"wires":[["d6461b29.0d5668"]]},{"id":"b7408964.ffd3f8","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["again","other","*"],"outputs":3,"x":1810,"y":1280,"wires":[["d6090afa.109b68"],["b02b2043.9b8af"],["47b05c65.b06984"]]},{"id":"47b05c65.b06984","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":1955,"y":1320,"wires":[]},{"id":"b02b2043.9b8af","type":"link out","z":"3e11eb34.344f14","name":"","links":["b8dadb34.3a5bc8"],"x":1955,"y":1280,"wires":[]},{"id":"b635dd13.da5fa","type":"link out","z":"3e11eb34.344f14","name":"","links":["c60e7832.8a2558"],"x":1391,"y":1560,"wires":[]},{"id":"7a0460d7.5dbb7","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1430,"y":1320,"wires":[]},{"id":"e3b667c6.9b7cc8","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":636,"y":1640,"wires":[["b713350b.7d3828"]]},{"id":"d6461b29.0d5668","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1610,"y":1280,"wires":[["b7408964.ffd3f8"]]},{"id":"85e20b63.7a3c88","type":"subflow:94f329f8.499948","z":"3e11eb34.344f14","name":"","x":1026,"y":1580,"wires":[["5d1c5032.94bb8"],["aac1f5f2.835e38"]]},{"id":"aac1f5f2.835e38","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Você precisa fazer seu login antes de fazer alguma operação."}],"answer":false,"track":false,"x":1186,"y":1620,"wires":[["e61d9579.d79b48","87a3ad24.9c434"]]},{"id":"e61d9579.d79b48","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":1366,"y":1620,"wires":[]},{"id":"5d1c5032.94bb8","type":"subflow:fdb8e9c2.836b68","z":"3e11eb34.344f14","name":"","x":1236,"y":1540,"wires":[["e79b1040.fb082"],["b635dd13.da5fa"]]},{"id":"3ad53780.821328","type":"link out","z":"3e11eb34.344f14","name":"","links":["c60e7832.8a2558"],"x":1435,"y":1680,"wires":[]},{"id":"ac0d7091.d233e","type":"link out","z":"3e11eb34.344f14","name":"","links":["c60e7832.8a2558"],"x":2235,"y":1040,"wires":[]},{"id":"f4474ef7.ff714","type":"link out","z":"3e11eb34.344f14","name":"","links":["c60e7832.8a2558"],"x":971,"y":1340,"wires":[]},{"id":"ddb6990a.f3d0f8","type":"subflow:a7fbe337.09148","z":"3e11eb34.344f14","x":416,"y":1360,"wires":[["3f9d39b7.864bf6"],["2ae81f7f.d71ac"]]},{"id":"2ae81f7f.d71ac","type":"link out","z":"3e11eb34.344f14","name":"","links":["c60e7832.8a2558"],"x":571,"y":1400,"wires":[]},{"id":"7d2a565f.726e08","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":1595,"y":760,"wires":[]},{"id":"431d321e.62dbbc","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"Não consegui obter seu saldo. Tente novamente mais tarde."}],"answer":false,"track":false,"x":1826,"y":1560,"wires":[["63f81fc8.2c8ed","a66ad703.ae5848"]]},{"id":"63f81fc8.2c8ed","type":"link out","z":"3e11eb34.344f14","name":"","links":["c60e7832.8a2558"],"x":1935,"y":1600,"wires":[]},{"id":"e581527a.387e7","type":"link in","z":"3e11eb34.344f14","name":"Títulos Privado Requisição","links":["4375287c.1ed3f8"],"x":255,"y":1360,"wires":[["ddb6990a.f3d0f8"]]},{"id":"4375287c.1ed3f8","type":"link out","z":"3e11eb34.344f14","name":"","links":["e581527a.387e7"],"x":2235,"y":1000,"wires":[]},{"id":"d75c0125.53d18","type":"link in","z":"3e11eb34.344f14","name":"Títulos Privados Valida Investir","links":["4d6d5d7a.57cf04"],"x":275,"y":1640,"wires":[["a9ad1a13.007088"]]},{"id":"4d6d5d7a.57cf04","type":"link out","z":"3e11eb34.344f14","name":"","links":["d75c0125.53d18"],"x":1535,"y":1380,"wires":[]},{"id":"abec584d.001a28","type":"comment","z":"3e11eb34.344f14","name":"Título Privado Requisição","info":"","x":350,"y":1320,"wires":[]},{"id":"c5a42433.0f2728","type":"comment","z":"3e11eb34.344f14","name":"Títulos Privados Investir","info":"","x":360,"y":1600,"wires":[]},{"id":"87a3ad24.9c434","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1336,"y":1680,"wires":[["3ad53780.821328"]]},{"id":"1e87c146.4dc12f","type":"function","z":"3e11eb34.344f14","name":"Saldo Disponível","func":"const chat = msg.chat();\nconst valor_investir_titulo_privado = chat.get(\"valor_investir_titulo_privado\");\nconst saldo = msg.payload;\n\nif(saldo >= valor_investir_titulo_privado){\n    msg.payload = \"Saldo disponível para operação.\";\n    return [msg,null];\n}else{\n    msg.payload = \"Saldo indisponível para operação.\";\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":1870,"y":1480,"wires":[["7fc8a768.ebd8a8"],["b916b2.1365095"]]},{"id":"b916b2.1365095","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[],"answer":false,"track":false,"x":2050,"y":1500,"wires":[["7f94c64f.e58388","db11563e.9a8938"]]},{"id":"6142e0fb.49256","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2880,"y":1480,"wires":[["47322933.fad798"]]},{"id":"947aee91.53642","type":"link out","z":"3e11eb34.344f14","name":"Investir td  logado","links":["fa4d0651.d9aa68"],"x":3055,"y":1540,"wires":[]},{"id":"ad01412e.c5e62","type":"link out","z":"3e11eb34.344f14","name":"Investir td  logado","links":["1b2a2292.66109d"],"x":2835,"y":1580,"wires":[]},{"id":"8f268f0e.b3896","type":"subflow:5fdbe0b9.637a4","z":"3e11eb34.344f14","x":2920,"y":1540,"wires":[["947aee91.53642"]]},{"id":"7752815b.79fb7","type":"chatbot-listen","z":"3e11eb34.344f14","name":"","showdebug":false,"rules":["again","transfer","start","*"],"outputs":4,"x":2660,"y":1560,"wires":[["6142e0fb.49256"],["8f268f0e.b3896"],["ad01412e.c5e62"],["bb99e424.5219f8"]]},{"id":"db11563e.9a8938","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Saldo insuficiente para operação. Seu saldo é de R${{payload}}","buttons":[{"type":"quick-reply","label":"Simular novamente","value":"again","url":""},{"type":"quick-reply","label":"Transferir","value":"transfer","url":""},{"type":"quick-reply","label":"Inicio","value":"start","url":""}],"x":2220,"y":1560,"wires":[["1a8e9191.110afe"]]},{"id":"1a8e9191.110afe","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":2440,"y":1560,"wires":[["7752815b.79fb7"]]},{"id":"bb99e424.5219f8","type":"link out","z":"3e11eb34.344f14","name":"","links":["d0313994.934438"],"x":2835,"y":1620,"wires":[]},{"id":"a66ad703.ae5848","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2010,"y":1560,"wires":[]},{"id":"7f94c64f.e58388","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":2230,"y":1500,"wires":[]},{"id":"47322933.fad798","type":"link out","z":"3e11eb34.344f14","name":"Investir td  logado","links":["fa4d0651.d9aa68"],"x":3055,"y":1480,"wires":[]},{"id":"7fc8a768.ebd8a8","type":"link out","z":"3e11eb34.344f14","name":"","links":["6041f9ac.fde4e8"],"x":2015,"y":1460,"wires":[]},{"id":"6041f9ac.fde4e8","type":"link in","z":"3e11eb34.344f14","name":"Títulos Privado Saldo Disponível","links":["7fc8a768.ebd8a8"],"x":275,"y":1760,"wires":[["c5b550c0.f585d"]]},{"id":"c5b550c0.f585d","type":"subflow:fdb8e9c2.836b68","z":"3e11eb34.344f14","x":440,"y":1760,"wires":[[],[]]},{"id":"d736c70f.9dc438","type":"http request","z":"3e11eb34.344f14","name":"","method":"POST","ret":"obj","url":"http://34.226.159.114:4000/fixedIncomes/private_titles","tls":"","x":570,"y":960,"wires":[["bad43890.7a4db8"]]},{"id":"802cc8ce.7ca978","type":"function","z":"3e11eb34.344f14","name":"invest ou simulate","func":"let res = msg.payload.content.split('.');\n\nflow.set(\"id_title\", res[1]);\n\nif(res[0] == 'invest'){\n    return [msg,null];\n}else if(res[0] == 'simulate'){\n    return [null,msg];\n}","outputs":"2","noerr":0,"x":1030,"y":1220,"wires":[[],[]]},{"id":"2ac28f04.ea1a9","type":"function","z":"3e11eb34.344f14","name":"Payload","func":"msg.body = msg.payload;\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":960,"wires":[["d736c70f.9dc438"]]},{"id":"165b8ca0.718ab3","type":"chatbot-generic-template","z":"3e11eb34.344f14","name":"","title":"","subtitle":"","imageUrl":"","sharable":true,"aspectRatio":"horizontal","buttons":[],"x":590,"y":1000,"wires":[["80863b0.eedafc8","2b04269.582eeda"]]},{"id":"bad43890.7a4db8","type":"function","z":"3e11eb34.344f14","name":"Elements","func":"msg.payload.elements = [\n    \n        {\n         title: `${msg.payload[0].attributes.emitter}`,\n         subtitle: null,\n         imageUrl: `${msg.payload[0].attributes.url}`,\n         buttons: [{\n          type: 'postback',\n          value: `invest.${msg.payload[0].id}`,\n          label: 'Investir'\n            },\n            {\n          type: 'postback',\n          value: `simulate.${msg.payload[0].id}`,\n          label: 'Simular'\n            }\n            ]\n        },{\n         title: `${msg.payload[1].attributes.emitter}`,\n         subtitle: null,\n         imageUrl: `${msg.payload[1].attributes.url}`,\n         buttons: [{\n          type: 'postback',\n          value: `invest.${msg.payload[1].id}`,\n          label: 'Investir'\n            },\n            {\n          type: 'postback',\n          value: `simulate.${msg.payload[1].id}`,\n          label: 'Simular'\n            }]\n        },{\n         title: `${msg.payload[2].attributes.emitter}`,\n         subtitle: null,\n         imageUrl: `${msg.payload[2].attributes.url}`,\n         buttons: [{\n          type: 'postback',\n          value: `invest.${msg.payload[2].id}`,\n          label: 'Investir'\n            },\n            {\n          type: 'postback',\n          value: `simulate.${msg.payload[2].id}`,\n          label: 'Simular'\n            }]\n        },{\n         title: `${msg.payload[3].attributes.emitter}`,\n         subtitle: null,\n         imageUrl: `${msg.payload[3].attributes.url}`,\n         buttons: [{\n          type: 'postback',\n          value: `invest.${msg.payload[3].id}`,\n          label: 'Investir'\n            },\n            {\n          type: 'postback',\n          value: `simulate.${msg.payload[3].id}`,\n          label: 'Simular'\n            }]\n        },{\n         title: `${msg.payload[4].attributes.emitter}`,\n         subtitle: null,\n         imageUrl: `${msg.payload[4].attributes.url}`,\n         buttons: [{\n          type: 'postback',\n          value: `invest.${msg.payload[4].id}`,\n          label: 'Investir'\n            },\n            {\n          type: 'postback',\n          value: `simulate.${msg.payload[4].id}`,\n          label: 'Simular'\n            }]\n        }\n]\nreturn msg;","outputs":"1","noerr":0,"x":420,"y":1000,"wires":[["165b8ca0.718ab3"]]},{"id":"cddae357.aeb05","type":"http request","z":"3e11eb34.344f14","name":"","method":"GET","ret":"obj","url":"https://api.ativainvestimentos.com.br/v1/fixedIncomes/private_titles","tls":"","x":570,"y":920,"wires":[["2ac28f04.ea1a9"]]},{"id":"fe2de325.e552e","type":"function","z":"3e11eb34.344f14","name":"Header","func":"msg.headers = {\"content-type\":\"application/vnd.api+json\"}\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":920,"wires":[["cddae357.aeb05"]]},{"id":"2b04269.582eeda","type":"debug","z":"3e11eb34.344f14","name":"","active":true,"console":"false","complete":"false","x":790,"y":960,"wires":[]},{"id":"9ac19ebb.748b9","type":"debug","z":"3e11eb34.344f14","name":"","active":true,"console":"false","complete":"false","x":1250,"y":1000,"wires":[]},{"id":"f9b5e8b5.3204d8","type":"function","z":"3e11eb34.344f14","name":"Split codigo","func":"const response = msg.payload.content.split('.');\nconst codigo = response[1];\nmsg.payload = codigo;\nmsg.content = codigo;\nreturn msg;","outputs":"1","noerr":0,"x":1210,"y":1060,"wires":[["d882d3c8.4aff2"]]},{"id":"f28000c8.2c423","type":"debug","z":"3e11eb34.344f14","name":"","active":true,"console":"false","complete":"false","x":970,"y":1020,"wires":[]},{"id":"ae02eaaa.69c348","type":"link in","z":"3e11eb34.344f14","name":"Fundos Carrossel","links":["692b8489.17584c"],"x":320,"y":416,"wires":[["94c1d480.3a0408"]]},{"id":"9930733a.d6379","type":"comment","z":"3e11eb34.344f14","name":"Fundos","info":"","x":350,"y":353,"wires":[]},{"id":"7011cc11.82e174","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1012,"y":545,"wires":[["27c6b9f4.6c8556"]]},{"id":"94c1d480.3a0408","type":"chatbot-message","z":"3e11eb34.344f14","name":"","message":[{"message":"1 minuto por favor, enquanto consulto as opções..."}],"answer":false,"track":false,"x":534,"y":381,"wires":[["a60cfe1e.bb03a","6998b9e8.0a9128"]]},{"id":"27c6b9f4.6c8556","type":"chatbot-quick-replies","z":"3e11eb34.344f14","name":"","message":"Não era isso que estava buscando?","buttons":[{"type":"quick-reply","label":"Escolher outro produto","value":"other","url":""}],"x":1175,"y":545,"wires":[["1d0d5949.003eb7"]]},{"id":"a60cfe1e.bb03a","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":false,"outputs":0,"x":710,"y":380,"wires":[]},{"id":"1d0d5949.003eb7","type":"chatbot-facebook-send","z":"3e11eb34.344f14","bot":"50fc8620.7f18b8","track":true,"outputs":1,"x":1355,"y":502,"wires":[[]]},{"id":"6998b9e8.0a9128","type":"delay","z":"3e11eb34.344f14","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":945,"y":502,"wires":[["1d0d5949.003eb7","7011cc11.82e174"]]},{"id":"ef35d03f.3b027","type":"debug","z":"3e11eb34.344f14","name":"","active":true,"console":"false","complete":"false","x":915,"y":453,"wires":[]},{"id":"27f6fa3f.208fc6","type":"delay","z":"495bc4b0.0f837c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":420,"y":840,"wires":[["f1bc0d28.2b4f3"]]}]